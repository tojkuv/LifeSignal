<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiIyZGMxZTAwZC1kYjBhLTQyMzktODkzNC1iZTE0MDEyNGNlZWYiLCJjb252ZXJzYXRpb25zIjp7IjJkYzFlMDBkLWRiMGEtNDIzOS04OTM0LWJlMTQwMTI0Y2VlZiI6eyJpZCI6IjJkYzFlMDBkLWRiMGEtNDIzOS04OTM0LWJlMTQwMTI0Y2VlZiIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMThUMDg6NDc6MTAuODI1WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTE4VDA4OjUwOjI1LjIzN1oiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6IjgzYzI0YTJkLWE0ZDgtNDJhMy1iMmJmLWU0YjdiNTFhMTcxNCIsInV1aWQiOiIyOWM2YmMyMi01YzA0LTQzMTctYjUwMy1kMmQwMmViNThkNzgiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ3NTU4MDMwODI3LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiZWY0YzU2Zi1iNjYzLTQyMTgtYWRjZC0yOGI4YjcyYTE5MDIiLCJyZXF1ZXN0X21lc3NhZ2UiOiJtaWdyYXRlIEBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQgdG8gQEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0IGFzIGNvbXB1dGVkIHByb3BlcnRpZXMgYW5kIG1pZ3JhdGUgdGhlIHN0YXRlIGZyb20gQEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IHRvIEBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlld01vZGVsLnN3aWZ0ICIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJtaWdyYXRlICJ9LHsidHlwZSI6Im1lbnRpb24iLCJhdHRycyI6eyJpZCI6Ii9BcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQiLCJsYWJlbCI6IlBob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdCIsImRhdGEiOnsibGFiZWwiOiJQaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQiLCJuYW1lIjoiQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0IiwiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoiQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0In0sInR5cGUiOiJpdGVtIn19fSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IiB0byAifSx7InR5cGUiOiJtZW50aW9uIiwiYXR0cnMiOnsiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnQiLCJsYWJlbCI6IlByb2ZpbGVWaWV3LnN3aWZ0IiwiZGF0YSI6eyJsYWJlbCI6IlByb2ZpbGVWaWV3LnN3aWZ0IiwibmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0IiwiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlldy5zd2lmdCJ9LCJ0eXBlIjoiaXRlbSJ9fX0seyJ0eXBlIjoidGV4dCIsInRleHQiOiIgYXMgY29tcHV0ZWQgcHJvcGVydGllcyBhbmQgbWlncmF0ZSB0aGUgc3RhdGUgZnJvbSAifSx7InR5cGUiOiJtZW50aW9uIiwiYXR0cnMiOnsiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwuc3dpZnQiLCJsYWJlbCI6IlBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IiwiZGF0YSI6eyJsYWJlbCI6IlBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IiwibmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IiwiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwuc3dpZnQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbC5zd2lmdCJ9LCJ0eXBlIjoiaXRlbSJ9fX0seyJ0eXBlIjoidGV4dCIsInRleHQiOiIgdG8gIn0seyJ0eXBlIjoibWVudGlvbiIsImF0dHJzIjp7ImlkIjoiL0FyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQiLCJsYWJlbCI6IlByb2ZpbGVWaWV3TW9kZWwuc3dpZnQiLCJkYXRhIjp7ImxhYmVsIjoiUHJvZmlsZVZpZXdNb2RlbC5zd2lmdCIsIm5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlld01vZGVsLnN3aWZ0IiwiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXdNb2RlbC5zd2lmdCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQifSwidHlwZSI6Iml0ZW0ifX19LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiICJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbeyJsYWJlbCI6IlBob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdCIsIm5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQiLCJpZCI6Ii9BcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQifSwidHlwZSI6Iml0ZW0ifSx7ImxhYmVsIjoiUHJvZmlsZVZpZXcuc3dpZnQiLCJuYW1lIjoiQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnQiLCJpZCI6Ii9BcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlldy5zd2lmdCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0In0sInR5cGUiOiJpdGVtIn0seyJsYWJlbCI6IlBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IiwibmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IiwiaWQiOiIvQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwuc3dpZnQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbC5zd2lmdCJ9LCJ0eXBlIjoiaXRlbSJ9LHsibGFiZWwiOiJQcm9maWxlVmlld01vZGVsLnN3aWZ0IiwibmFtZSI6IkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQiLCJpZCI6Ii9BcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlld01vZGVsLnN3aWZ0IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoiQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXdNb2RlbC5zd2lmdCJ9LCJ0eXBlIjoiaXRlbSJ9XSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNkNvMWtRaDlmMkNOVGdyZmZSQ2o0UiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiU2hvdyBtZSB0aGUgY29udGVudCBvZiBQaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQgYW5kIFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0IGZpbGVzIHRvIHVuZGVyc3RhbmQgd2hhdCBuZWVkcyB0byBiZSBtaWdyYXRlZC5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ2xsIGhlbHAgeW91IG1pZ3JhdGUgdGhlIFBob25lTnVtYmVyQ2hhbmdlVmlldyBhbmQgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwgaW50byB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwgZmlsZXMuIExldCBtZSBmaXJzdCBnYXRoZXIgaW5mb3JtYXRpb24gYWJvdXQgdGhlc2UgZmlsZXMgdG8gdW5kZXJzdGFuZCB0aGVpciBzdHJ1Y3R1cmUgYW5kIGNvbnRlbnQuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6Im1pZ3JhdGUgQEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdCB0byBAQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnQgYXMgY29tcHV0ZWQgcHJvcGVydGllcyBhbmQgbWlncmF0ZSB0aGUgc3RhdGUgZnJvbSBAQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwuc3dpZnQgdG8gQEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQgIn19LHsiaWQiOjEsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0ODowOC41NzlaIiwicmVzcG9uc2VfdGV4dCI6IkknbGwgaGVscCB5b3UgbWlncmF0ZSB0aGUgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3IGFuZCBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbCBpbnRvIHRoZSBQcm9maWxlVmlldyBhbmQgUHJvZmlsZVZpZXdNb2RlbCBmaWxlcy4gTGV0IG1lIGZpcnN0IGdhdGhlciBpbmZvcm1hdGlvbiBhYm91dCB0aGVzZSBmaWxlcyB0byB1bmRlcnN0YW5kIHRoZWlyIHN0cnVjdHVyZSBhbmQgY29udGVudC5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyYzg1Yzk1ZC05NzMzLTRlM2YtOTVlNy0wYjg2MjA2N2I3N2YiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFVZU40cVlTNnVKQWdwRHMyWTF4c3BIIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJTaG93IG1lIHRoZSBjb250ZW50IG9mIFByb2ZpbGVWaWV3LnN3aWZ0IGFuZCBQcm9maWxlVmlld01vZGVsLnN3aWZ0IHRvIHVuZGVyc3RhbmQgd2hlcmUgdG8gaW50ZWdyYXRlIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZ1bmN0aW9uYWxpdHkuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCBtZSBjaGVjayB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwgZmlsZXMgdG8gdW5kZXJzdGFuZCB3aGVyZSBJIG5lZWQgdG8gaW50ZWdyYXRlIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZ1bmN0aW9uYWxpdHk6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbC5zd2lmdFxuLi4uXG5cbi8vLyBWaWV3IG1vZGVsIGZvciB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3XG5jbGFzcyBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbDogT2JzZXJ2YWJsZU9iamVjdCB7XG4gICAgLy8gTUFSSzogLSBQdWJsaXNoZWQgUHJvcGVydGllc1xuXG4gICAgLy8vIFRoZSBwaG9uZSBudW1iZXIgYmVpbmcgZWRpdGVkXG4gICAgQFB1Ymxpc2hlZCB2YXIgZWRpdGluZ1Bob25lOiBTdHJpbmcgPSBcIlwiXG5cbiAgICAvLy8gVGhlIHBob25lIHJlZ2lvbiBiZWluZyBlZGl0ZWRcbiAgICBAUHVibGlzaGVkIHZhciBlZGl0aW5nUGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIlxuXG4gICAgLy8vIFdoZXRoZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhcyBiZWVuIHNlbnRcbiAgICBAUHVibGlzaGVkIHZhciBpc0NvZGVTZW50OiBCb29sID0gZmFsc2VcblxuICAgIC8vLyBUaGUgdmVyaWZpY2F0aW9uIGNvZGVcbiAgICBAUHVibGlzaGVkIHZhciB2ZXJpZmljYXRpb25Db2RlOiBTdHJpbmcgPSBcIlwiXG5cbiAgICAvLy8gV2hldGhlciB0aGUgdmlldyBpcyBsb2FkaW5nXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNMb2FkaW5nOiBCb29sID0gZmFsc2VcblxuICAgIC8vLyBXaGV0aGVyIHRoZSBwaG9uZSBudW1iZXIgZmllbGQgaXMgZm9jdXNlZFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzUGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuXG4gICAgLy8vIFdoZXRoZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGZpZWxkIGlzIGZvY3VzZWRcbiAgICBAUHVibGlzaGVkIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuXG4gICAgLy8vIEVycm9yIG1lc3NhZ2VcbiAgICBAUHVibGlzaGVkIHZhciBlcnJvck1lc3NhZ2U6IFN0cmluZz8gPSBuaWxcblxuICAgIC8vLyBFbnZpcm9ubWVudCBkaXNtaXNzIGFjdGlvblxuICAgIHZhciBkaXNtaXNzQWN0aW9uOiBEaXNtaXNzQWN0aW9uPyA9IG5pbFxuXG4gICAgLy8vIEF2YWlsYWJsZSByZWdpb25zXG4gICAgbGV0IHJlZ2lvbnMgPSBbXG4gICAgICAgIChcIlVTXCIsIFwiKzFcIiksXG4gICAgICAgIChcIkNBXCIsIFwiKzFcIiksXG4gICAgICAgIChcIlVLXCIsIFwiKzQ0XCIpLFxuICAgICAgICAoXCJBVVwiLCBcIis2MVwiKVxuICAgIF1cblxuICAgIC8vIE1BUks6IC0gUHJpdmF0ZSBQcm9wZXJ0aWVzXG5cbiAgICAvLy8gVGhlIGN1cnJlbnQgcGhvbmUgbnVtYmVyXG4gICAgdmFyIGN1cnJlbnRQaG9uZTogU3RyaW5nID0gXCJcIlxuXG4gICAgLy8vIFRoZSBjdXJyZW50IHBob25lIHJlZ2lvblxuICAgIHZhciBjdXJyZW50UGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIlxuXG4gICAgLy8vIENvbXBsZXRpb24gaGFuZGxlciBmb3Igd2hlbiB0aGUgcGhvbmUgbnVtYmVyIGlzIGNoYW5nZWRcbiAgICBwcml2YXRlIHZhciBvblBob25lTnVtYmVyQ2hhbmdlZDogKChTdHJpbmcsIFN0cmluZykgLT4gVm9pZCk/ID0gbmlsXG5cbiAgICAvLy8gQ29tcGxldGlvbiBoYW5kbGVyIGZvciB3aGVuIHRoZSB2aWV3IGlzIGRpc21pc3NlZFxuICAgIHByaXZhdGUgdmFyIG9uRGlzbWlzczogKCgpIC0+IFZvaWQpPyA9IG5pbFxuXG4gICAgLy8gTUFSSzogLSBJbml0aWFsaXphdGlvblxuXG4gICAgLy8vIEluaXRpYWxpemUgdGhlIHZpZXcgbW9kZWwgd2l0aCBkZWZhdWx0IHZhbHVlc1xuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIE1vY2sgZGF0YSBpbml0aWFsaXphdGlvblxuICAgICAgICBzZWxmLmN1cnJlbnRQaG9uZSA9IFwiKDk1NCkgMjM0LTU2NzhcIlxuICAgICAgICBzZWxmLmN1cnJlbnRQaG9uZVJlZ2lvbiA9IFwiVVNcIlxuICAgICAgICBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbiA9IFwiVVNcIlxuXG4gICAgICAgIC8vIFNldCB1cCBtb2NrIGNhbGxiYWNrIGZvciBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAgICAgIHNlbGYub25QaG9uZU51bWJlckNoYW5nZWQgPSB7IG5ld1Bob25lLCByZWdpb24gaW5cbiAgICAgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdXBkYXRlIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBwcmludCBpdCB0byB0aGUgY29uc29sZVxuICAgICAgICAgICAgcHJpbnQoXCJQaG9uZSBudW1iZXIgY2hhbmdlZCB0byBcXChuZXdQaG9uZSkgKFxcKHJlZ2lvbikpXCIpXG5cbiAgICAgICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBiZSBjb25uZWN0ZWQgdG8gdGhlIFByb2ZpbGVWaWV3TW9kZWwncyBoYW5kbGVQaG9uZU51bWJlckNoYW5nZWQgbWV0aG9kXG4gICAgICAgICAgICBOb3RpZmljYXRpb25DZW50ZXIuZGVmYXVsdC5wb3N0KG5hbWU6IE5TTm90aWZpY2F0aW9uLk5hbWUoXCJQaG9uZU51bWJlckNoYW5nZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG5pbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJbmZvOiBbXCJwaG9uZVwiOiBuZXdQaG9uZSwgXCJyZWdpb25cIjogcmVnaW9uXSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1BUks6IC0gQ29tcHV0ZWQgUHJvcGVydGllc1xuXG4gICAgLy8vIENvbXB1dGVkIHByb3BlcnR5IHRvIGNoZWNrIGlmIHRoZSBwaG9uZSBudW1iZXIgaXMgdmFsaWRcbiAgICB2YXIgaXNQaG9uZU51bWJlclZhbGlkOiBCb29sIHtcbiAgICAgICAgLy8gTWF0Y2ggbG9naW4gc2NyZWVuIHZhbGlkYXRpb25cbiAgICAgICAgLy8gQWxsb3cgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJzXG4gICAgICAgIGlmIGVkaXRpbmdQaG9uZSA9PSBcIjEyMzQ1Njc4OTBcIiB8fCBlZGl0aW5nUGhvbmUgPT0gXCIwMDAwMDAwMDAwXCIgfHwgZWRpdGluZ1Bob25lID09IFwiKzExMjM0NTY3ODkwXCIge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpbXBsZSB2YWxpZGF0aW9uOiBhdCBsZWFzdCAxMCBkaWdpdHNcbiAgICAgICAgcmV0dXJuIGVkaXRpbmdQaG9uZS5maWx0ZXIgeyAkMC5pc051bWJlciB9LmNvdW50ID49IDEwXG4gICAgfVxuXG4gICAgLy8vIENvbXB1dGVkIHByb3BlcnR5IHRvIGNoZWNrIGlmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyB2YWxpZFxuICAgIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZDogQm9vbCB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvbkNvZGUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfS5jb3VudCA9PSA2XG4gICAgfVxuXG4gICAgLy8vIEdldCB0aGUgcGhvbmUgbnVtYmVyIHBsYWNlaG9sZGVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICB2YXIgcGhvbmVOdW1iZXJQbGFjZWhvbGRlcjogU3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGFcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFhYLVhYWC1YWFhcIiAvLyBGb3JtYXQgZm9yIFVLXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWC1YWFgtWFhYWFwiIC8vIERlZmF1bHQgZm9ybWF0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNQVJLOiAtIFB1YmxpYyBNZXRob2RzXG5cbiAgICAvLy8gQ2FuY2VsIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICBmdW5jIGNhbmNlbFBob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICAgICAgb25EaXNtaXNzPygpXG4gICAgICAgIGlmIGxldCBkaXNtaXNzID0gZGlzbWlzc0FjdGlvbiB7XG4gICAgICAgICAgICBkaXNtaXNzKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBTZW5kIHZlcmlmaWNhdGlvbiBjb2RlIGZvciBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAgZnVuYyBzZW5kUGhvbmVDaGFuZ2VWZXJpZmljYXRpb25Db2RlKCkge1xuICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byB0aGUgcGhvbmUgbnVtYmVyXG4gICAgICAgIGlzTG9hZGluZyA9IHRydWVcblxuICAgICAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5XG4gICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAxLjUpIHsgW3dlYWsgc2VsZl0gaW5cbiAgICAgICAgICAgIGd1YXJkIGxldCBzZWxmID0gc2VsZiBlbHNlIHsgcmV0dXJuIH1cbiAgICAgICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIHNlbGYuaXNDb2RlU2VudCA9IHRydWVcbiAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuXG4gICAgICAgICAgICAvLyBGb2N1cyB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgZmllbGRcbiAgICAgICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAwLjUpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBWZXJpZnkgdGhlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICBmdW5jIHZlcmlmeVBob25lQ2hhbmdlKCkge1xuICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHZlcmlmeSB0aGUgY29kZSB3aXRoIHRoZSBzZXJ2ZXJcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgZGVsYXlcbiAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgICAgICAgICAgc2VsZi5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgaWYgIXNlbGYuZWRpdGluZ1Bob25lLmlzRW1wdHkgJiYgc2VsZi52ZXJpZmljYXRpb25Db2RlLmNvdW50ID49IDQge1xuICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRQaG9uZSA9IFBob25lRm9ybWF0dGVyLmZvcm1hdFBob25lTnVtYmVyKHNlbGYuZWRpdGluZ1Bob25lLCByZWdpb246IHNlbGYuZWRpdGluZ1Bob25lUmVnaW9uKVxuICAgICAgICAgICAgICAgIHNlbGYub25QaG9uZU51bWJlckNoYW5nZWQ/KGZvcm1hdHRlZFBob25lLCBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgICAgICAgICAgICAgICBzZWxmLm9uRGlzbWlzcz8oKVxuICAgICAgICAgICAgICAgIGlmIGxldCBkaXNtaXNzID0gc2VsZi5kaXNtaXNzQWN0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgdGV4dCBjaGFuZ2VcbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgIHN3aXRjaCBlZGl0aW5nUGhvbmVSZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJVS1wiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICBmb3JtYXRVS1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdEFVUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEhhbmRsZSB2ZXJpZmljYXRpb24gY29kZSB0ZXh0IGNoYW5nZVxuICAgIGZ1bmMgaGFuZGxlVmVyaWZpY2F0aW9uQ29kZUNoYW5nZShuZXdWYWx1ZTogU3RyaW5nKSB7XG4gICAgICAgIC8vIEZvcm1hdCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgYXMgWFhYLVhYWFxuICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXdWYWx1ZS5maWx0ZXIgeyAkMC5pc051bWJlciB9XG5cbiAgICAgICAgLy8gTGltaXQgdG8gNiBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoNikpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgICAgICAgICAgbGV0IGZpcnN0UGFydCA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBzZWNvbmRQYXJ0ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSA9IFwiXFwoZmlyc3RQYXJ0KS1cXChzZWNvbmRQYXJ0KVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQgIT0gdmVyaWZpY2F0aW9uQ29kZSB7XG4gICAgICAgICAgICAvLyBKdXN0IHVzZSB0aGUgZmlsdGVyZWQgZGlnaXRzIGlmIDMgb3IgZmV3ZXJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBIYW5kbGUgcmVnaW9uIHNlbGVjdGlvbiBjaGFuZ2VcbiAgICBmdW5jIGhhbmRsZVJlZ2lvbkNoYW5nZSgpIHtcbiAgICAgICAgSGFwdGljRmVlZGJhY2suc2VsZWN0aW9uRmVlZGJhY2soKVxuICAgIH1cblxuICAgIC8vLyBGb3JtYXQgYSBVUy9DYW5hZGEgcGhvbmUgbnVtYmVyIChYWFgtWFhYLVhYWFgpXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA2IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMylcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdFxuaW1wb3J0IFN3aWZ0VUlcbmltcG9ydCBGb3VuZGF0aW9uXG5cbi8vLyBBIHZpZXcgZm9yIGNoYW5naW5nIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyXG5zdHJ1Y3QgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBWaWV3IHtcbiAgICAvLy8gVGhlIHZpZXcgbW9kZWxcbiAgICBAU3RhdGVPYmplY3QgcHJpdmF0ZSB2YXIgdmlld01vZGVsOiBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbFxuXG4gICAgLy8vIERpc21pc3MgYWN0aW9uXG4gICAgQEVudmlyb25tZW50KFxcLmRpc21pc3MpIHByaXZhdGUgdmFyIGRpc21pc3NcblxuICAgIC8vLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIHBob25lIG51bWJlciBmaWVsZFxuICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHBob25lTnVtYmVyRmllbGRGb2N1c2VkOiBCb29sXG5cbiAgICAvLy8gRm9jdXMgc3RhdGUgZm9yIHRoZSB2ZXJpZmljYXRpb24gY29kZSBmaWVsZFxuICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQ6IEJvb2xcblxuICAgIC8vLyBJbml0aWFsaXplIHdpdGggYSB2aWV3IG1vZGVsXG4gICAgaW5pdChjdXJyZW50UGhvbmU6IFN0cmluZywgY3VycmVudFBob25lUmVnaW9uOiBTdHJpbmcgPSBcIlVTXCIsIG9uUGhvbmVOdW1iZXJDaGFuZ2VkOiAoKFN0cmluZywgU3RyaW5nKSAtPiBWb2lkKT8gPSBuaWwpIHtcbiAgICAgICAgbGV0IHZpZXdNb2RlbCA9IFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsKFxuICAgICAgICAgICAgY3VycmVudFBob25lOiBjdXJyZW50UGhvbmUsXG4gICAgICAgICAgICBjdXJyZW50UGhvbmVSZWdpb246IGN1cnJlbnRQaG9uZVJlZ2lvbixcbiAgICAgICAgICAgIG9uUGhvbmVOdW1iZXJDaGFuZ2VkOiBvblBob25lTnVtYmVyQ2hhbmdlZCxcbiAgICAgICAgICAgIG9uRGlzbWlzczogbmlsXG4gICAgICAgIClcbiAgICAgICAgX3ZpZXdNb2RlbCA9IFN0YXRlT2JqZWN0KHdyYXBwZWRWYWx1ZTogdmlld01vZGVsKVxuICAgIH1cblxuICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgICAgICBOYXZpZ2F0aW9uU3RhY2sge1xuICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHN5c3RlbSBncm91cGVkIGJhY2tncm91bmQgZm9yIHRoZSBtYWluIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICBDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKVxuICAgICAgICAgICAgICAgICAgICAuZWRnZXNJZ25vcmluZ1NhZmVBcmVhKC5hbGwpXG4gICAgICAgICAgICAgICAgICAgIC5mcmFtZShoZWlnaHQ6IDApIC8vIFplcm8gaGVpZ2h0IHRvIG5vdCB0YWtlIHVwIHNwYWNlXG4gICAgICAgICAgICAgICAgaWYgIXZpZXdNb2RlbC5pc0NvZGVTZW50IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbCBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgVlN0YWNrKGFsaWdubWVudDogLmxlYWRpbmcsIHNwYWNpbmc6IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ3VycmVudCBQaG9uZSBOdW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQodmlld01vZGVsLmN1cnJlbnRQaG9uZS5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogdmlld01vZGVsLmN1cnJlbnRQaG9uZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5LCBhbGlnbm1lbnQ6IC5sZWFkaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIk5ldyBQaG9uZSBOdW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgOClcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnaW9uIHBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiUmVnaW9uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpY2tlcihcIlJlZ2lvblwiLCBzZWxlY3Rpb246ICR2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvckVhY2godmlld01vZGVsLnJlZ2lvbnMsIGlkOiBcXC4wKSB7IHJlZ2lvbiBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlxcKHJlZ2lvbi4wKSAoXFwocmVnaW9uLjEpKVwiKS50YWcocmVnaW9uLjApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBpY2tlclN0eWxlKE1lbnVQaWNrZXJTdHlsZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbikgeyBfLCBfIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnNlbGVjdGlvbkZlZWRiYWNrKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEZpZWxkKGdldFBob25lTnVtYmVyUGxhY2Vob2xkZXIoKSwgdGV4dDogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmtleWJvYXJkVHlwZSgucGhvbmVQYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm11bHRpbGluZVRleHRBbGlnbm1lbnQoLmxlYWRpbmcpIC8vIExlZnQgYWxpZ24gdGhlIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lKSB7IG5ld1ZhbHVlIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBuZXdWYWx1ZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMDAwMDAwMDAwMFwiIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlciBhcyBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGhlIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVLOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWE6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgZm9ybWF0OiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB5b3VyIG5ldyBwaG9uZSBudW1iZXIuIFdlJ2xsIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byBjb25maXJtLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGV0IGVycm9yTWVzc2FnZSA9IHZpZXdNb2RlbC5lcnJvck1lc3NhZ2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguY2FwdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoXCJYWFgtWFhYXCIsIHRleHQ6ICR2aWV3TW9kZWwudmVyaWZpY2F0aW9uQ29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5udW1iZXJQYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwudmVyaWZpY2F0aW9uQ29kZSkgeyBvbGRWYWx1ZSwgbmV3VmFsdWUgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0IHRoZSB2ZXJpZmljYXRpb24gY29kZSBhcyBYWFgtWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW1pdCB0byA2IGRpZ2l0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCg2KSlcbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnZlcmlmeVBob25lQ2hhbmdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVmVyaWZ5IENvZGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhaXNWZXJpZmljYXRpb25Db2RlVmFsaWQgPyBDb2xvci5ncmF5IDogQ29sb3IuYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICFpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDE2KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBTcGFjZXIobWluTGVuZ3RoOiAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJUaXRsZURpc3BsYXlNb2RlKC5pbmxpbmUpXG4gICAgICAgICAgICAubmF2aWdhdGlvblRpdGxlKFwiQ2hhbmdlIFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAgICAgICAgICAudG9vbGJhciB7XG4gICAgICAgICAgICAgICAgVG9vbGJhckl0ZW0ocGxhY2VtZW50OiAubmF2aWdhdGlvbkJhckxlYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgQnV0dG9uKFwiQ2FuY2VsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmNhbmNlbFBob25lTnVtYmVyQ2hhbmdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc21pc3MoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIHZhbGlkXG4gICAgcHJpdmF0ZSB2YXIgaXNWZXJpZmljYXRpb25Db2RlVmFsaWQ6IEJvb2wge1xuICAgICAgICAvLyBSZW1vdmUgYW55IG5vbi1kaWdpdCBjaGFyYWN0ZXJzIGFuZCBjaGVjayBpZiB3ZSBoYXZlIDYgZGlnaXRzXG4gICAgICAgIHJldHVybiB2aWV3TW9kZWwudmVyaWZpY2F0aW9uQ29kZS5maWx0ZXIgeyAkMC5pc051bWJlciB9LmNvdW50ID09IDZcbiAgICB9XG5cbiAgICAvLy8gR2V0IHRoZSBwaG9uZSBudW1iZXIgcGxhY2Vob2xkZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgIHByaXZhdGUgZnVuYyBnZXRQaG9uZU51bWJlclBsYWNlaG9sZGVyKCkgLT4gU3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYLVhYWC1YWFhYXCIgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhXG4gICAgICAgIGNhc2UgXCJVS1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBVS1xuICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWFgtWFhYLVhYWFwiIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBEZWZhdWx0IGZvcm1hdFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXIgKFhYWC1YWFgtWFhYWClcbiAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VVNQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcblxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDYge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNilcbiAgICAgICAgICAgIHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMylcbiAgICAgICAgICAgIHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHQuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE2Q28xa1FoOWYyQ05UZ3JmZlJDajRSIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0ODoxOC4xMTJaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQgbWUgY2hlY2sgdGhlIFByb2ZpbGVWaWV3IGFuZCBQcm9maWxlVmlld01vZGVsIGZpbGVzIHRvIHVuZGVyc3RhbmQgd2hlcmUgSSBuZWVkIHRvIGludGVncmF0ZSB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSBmdW5jdGlvbmFsaXR5OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjVjNzUwOTQ3LTQ1YzgtNGVkOS05MjcxLTk3MGUxYmJjZDZjYSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUpaOUdIdWlxUEI5WVBxS3UxeEZqY1giLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlNob3cgbWUgdGhlIFBob25lRm9ybWF0dGVyIHV0aWxpdHkgY2xhc3Mgb3IgYW55IG90aGVyIHV0aWxpdHkgY2xhc3NlcyByZWxhdGVkIHRvIHBob25lIG51bWJlciBmb3JtYXR0aW5nLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUncyBhIFBob25lRm9ybWF0dGVyIHV0aWxpdHkgdGhhdCdzIGJlaW5nIHVzZWQgaW4gdGhlIGNvZGU6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBMaWZlU2lnbmFsL0xpZmVTaWduYWwvRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IENvbXBvc2FibGVBcmNoaXRlY3R1cmVcbmltcG9ydCBVSUtpdFxuXG4vLy8gQSBTd2lmdFVJIHZpZXcgZm9yIGRpc3BsYXlpbmcgdGhlIHVzZXIgcHJvZmlsZSB1c2luZyBUQ0FcbnN0cnVjdCBQcm9maWxlVmlldzogVmlldyB7XG4gICAgLy8vIFRoZSBzdG9yZSBmb3IgdGhlIHVzZXIgZmVhdHVyZVxuICAgIEBCaW5kYWJsZSB2YXIgc3RvcmU6IFN0b3JlT2Y8VXNlckZlYXR1cmU+XG5cbiAgICB2YXIgYm9keTogc29tZSBWaWV3IHtcbiAgICAgICAgaWYgc3RvcmUucHJvZmlsZSA9PSBuaWwgfHwgKHN0b3JlLnVzZXJEYXRhLm5hbWUuaXNFbXB0eSAmJiBzdG9yZS5pc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIC8vIFNob3cgbG9hZGluZyB2aWV3IHdoZW4gdXNlciBkYXRhIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgICAgIFByb2dyZXNzVmlldyhcIkxvYWRpbmcgcHJvZmlsZS4uLlwiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgICAgICAgICAgICAgVlN0YWNrIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvZmlsZSBIZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDaXJjbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWxsKENvbG9yKFVJQ29sb3Iuc3lzdGVtQmFja2dyb3VuZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKHdpZHRoOiA4MCwgaGVpZ2h0OiA4MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3ZlcmxheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChTdHJpbmcoc3RvcmUudXNlckRhdGEubmFtZS5wcmVmaXgoMSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC50aXRsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm92ZXJsYXkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENpcmNsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3Ryb2tlKENvbG9yLmJsdWUsIGxpbmVXaWR0aDogMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHN0b3JlLnVzZXJEYXRhLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChzdG9yZS51c2VyRGF0YS5waG9uZU51bWJlci5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogc3RvcmUudXNlckRhdGEucGhvbmVOdW1iZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnN1YmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIC8vIEVkaXQgbmFtZSBzaGVldFxuICAgICAgICAgICAgLnNoZWV0KGlzUHJlc2VudGVkOiAkc3RvcmUucHJvZmlsZSEuc2hvd0VkaXROYW1lU2hlZXQuc2VuZGluZyhcXC5wcm9maWxlLnNldFNob3dFZGl0TmFtZVNoZWV0KSkge1xuICAgICAgICAgICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAgICAgICAgICAgICAgICAgIFNjcm9sbFZpZXcge1xuICAgICAgICAgICAgICAgICAgICAgICAgVlN0YWNrKGFsaWdubWVudDogLmxlYWRpbmcsIHNwYWNpbmc6IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoXCJOYW1lXCIsIHRleHQ6ICRzdG9yZS5wcm9maWxlIS5lZGl0aW5nTmFtZS5zZW5kaW5nKFxcLnByb2ZpbGUudXBkYXRlRWRpdGluZ05hbWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1HcmF5NSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlBlb3BsZSB3aWxsIHNlZSB0aGlzIG5hbWUgaWYgeW91IGludGVyYWN0IHdpdGggdGhlbSBhbmQgdGhleSBkb24ndCBoYXZlIHlvdSBzYXZlZCBhcyBhIGNvbnRhY3QuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAgICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLnNlbmQoLnByb2ZpbGUoLnN0YXJ0UGhvbmVOdW1iZXJDaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ2hhbmdlIFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IuYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICFzdG9yZS5wcm9maWxlIS5pc0NvZGVTZW50IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIk5ldyBQaG9uZSBOdW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lvbiBwaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyKFwiUmVnaW9uXCIsIHNlbGVjdGlvbjogJHN0b3JlLnByb2ZpbGUhLmVkaXRpbmdQaG9uZVJlZ2lvbi5zZW5kaW5nKFxcLnByb2ZpbGUudXBkYXRlRWRpdGluZ1Bob25lUmVnaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlVTICgrMSlcIikudGFnKFwiVVNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDQSAoKzEpXCIpLnRhZyhcIkNBXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVUsgKCs0NClcIikudGFnKFwiR0JcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJBVSAoKzYxKVwiKS50YWcoXCJBVVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5waWNrZXJTdHlsZShNZW51UGlja2VyU3R5bGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEZpZWxkKFwiUGhvbmUgTnVtYmVyXCIsIHRleHQ6ICRzdG9yZS5wcm9maWxlIS5lZGl0aW5nUGhvbmUuc2VuZGluZyhcXC5wcm9maWxlLnVwZGF0ZUVkaXRpbmdQaG9uZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1HcmF5NSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiRW50ZXIgeW91ciBuZXcgcGhvbmUgbnVtYmVyLiBXZSdsbCBzZW5kIGEgdmVyaWZpY2F0aW9uIGNvZGUgdG8gY29uZmlybS5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuc2VuZCgucHJvZmlsZSguc2VuZFBob25lQ2hhbmdlVmVyaWZpY2F0aW9uQ29kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoc3RvcmUuaXNMb2FkaW5nID8gXCJTZW5kaW5nLi4uXCIgOiBcIlNlbmQgVmVyaWZpY2F0aW9uIENvZGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigud2hpdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yLmJsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhdGlvbiBjb2RlIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlZlcmlmaWNhdGlvbiBDb2RlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiRW50ZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gXFwoUGhvbmVGb3JtYXR0ZXIuZm9ybWF0UGhvbmVOdW1iZXIoc3RvcmUucHJvZmlsZSEuZWRpdGluZ1Bob25lLCByZWdpb246IHN0b3JlLnByb2ZpbGUhLmVkaXRpbmdQaG9uZVJlZ2lvbikpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZChcIlZlcmlmaWNhdGlvbiBDb2RlXCIsIHRleHQ6ICRzdG9yZS5wcm9maWxlIS52ZXJpZmljYXRpb25Db2RlLnNlbmRpbmcoXFwucHJvZmlsZS51cGRhdGVWZXJpZmljYXRpb25Db2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rZXlib2FyZFR5cGUoLm51bWJlclBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1HcmF5NSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5zZW5kKC5wcm9maWxlKC52ZXJpZnlQaG9uZUNoYW5nZUNvZGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHN0b3JlLmlzTG9hZGluZyA/IFwiVmVyaWZ5aW5nLi4uXCIgOiBcIlZlcmlmeSBDb2RlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvci5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRpc2FibGVkKHN0b3JlLmlzTG9hZGluZyB8fCBzdG9yZS5wcm9maWxlIS52ZXJpZmljYXRpb25Db2RlLmlzRW1wdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuc2VuZCgucHJvZmlsZSguY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnN1YmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLmJsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJUaXRsZURpc3BsYXlNb2RlKC5pbmxpbmUpXG4gICAgICAgICAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJQaG9uZSBOdW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJJdGVtcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYWRpbmc6IEJ1dHRvbihcIkNsb3NlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5zZW5kKC5wcm9maWxlKC5zZXRTaG93RWRpdFBob25lU2hlZXQoZmFsc2UpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlld01vZGVsLnN3aWZ0XG5pbXBvcnQgRm91bmRhdGlvblxuaW1wb3J0IFN3aWZ0VUlcbmltcG9ydCBDb21iaW5lXG5pbXBvcnQgVXNlck5vdGlmaWNhdGlvbnNcbmltcG9ydCBVSUtpdFxuXG4vLy8gVmlldyBtb2RlbCBmb3IgdGhlIHByb2ZpbGUgc2NyZWVuXG5jbGFzcyBQcm9maWxlVmlld01vZGVsOiBPYnNlcnZhYmxlT2JqZWN0IHtcbiAgICAvLyBNQVJLOiAtIFB1Ymxpc2hlZCBQcm9wZXJ0aWVzXG5cbiAgICAvLyBVc2VyIFByb2ZpbGUgUHJvcGVydGllc1xuICAgIEBQdWJsaXNoZWQgdmFyIG5hbWU6IFN0cmluZyA9IFwiU2FyYWggSm9obnNvblwiXG4gICAgQFB1Ymxpc2hlZCB2YXIgcGhvbmU6IFN0cmluZyA9IFwiKzEgKDU1NSkgOTg3LTY1NDNcIlxuICAgIEBQdWJsaXNoZWQgdmFyIHByb2ZpbGVEZXNjcmlwdGlvbjogU3RyaW5nID0gXCJJIGhhdmUgdHlwZSAxIGRpYWJldGVzLiBNeSBpbnN1bGluIGFuZCBzdXBwbGllcyBhcmUgaW4gdGhlIHJlZnJpZ2VyYXRvci4gRW1lcmdlbmN5IGNvbnRhY3RzOiBNb20gKDU1NS0xMTEtMjIyMiksIFJvb21tYXRlIEplbiAoNTU1LTMzMy00NDQ0KS4gQWxsZXJnaWMgdG8gcGVuaWNpbGxpbi4gTXkgZG9jdG9yIGlzIERyLiBNYXJ0aW5leiBhdCBDaXR5IE1lZGljYWwgQ2VudGVyICg1NTUtNzc3LTg4ODgpLlwiXG5cbiAgICAvLyBBdmF0YXIgUHJvcGVydGllc1xuICAgIEBQdWJsaXNoZWQgdmFyIGF2YXRhckltYWdlOiBVSUltYWdlPyA9IG5pbFxuLi4uXG5cbiAgICAvLyBGb2N1cyBTdGF0ZXMgKGZvciBTd2lmdFVJIEBGb2N1c1N0YXRlIGJpbmRpbmcpXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNOYW1lRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcbiAgICBAUHVibGlzaGVkIHZhciBpc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcblxuICAgIC8vIE1BUks6IC0gQ29tcHV0ZWQgUHJvcGVydGllc1xuXG4gICAgLy8vIFdoZXRoZXIgdGhlIHVzZXIgaXMgdXNpbmcgdGhlIGRlZmF1bHQgYXZhdGFyXG4gICAgdmFyIGlzVXNpbmdEZWZhdWx0QXZhdGFyOiBCb29sIHtcbiAgICAgICAgcmV0dXJuIGF2YXRhckltYWdlID09IG5pbFxuICAgIH1cblxuICAgIC8vIE1BUks6IC0gSW5pdGlhbGl6YXRpb25cblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIExvYWQgcGVyc2lzdGVkIGRhdGEgZnJvbSBVc2VyRGVmYXVsdHNcbiAgICAgICAgbG9hZFBlcnNpc3RlZERhdGEoKVxuICAgIH1cblxuICAgIC8vIE1BUks6IC0gTWV0aG9kc1xuXG4gICAgLy8vIFByZXBhcmUgdG8gZWRpdCB0aGUgZGVzY3JpcHRpb25cbiAgICBmdW5jIHByZXBhcmVFZGl0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIG5ld0Rlc2NyaXB0aW9uID0gcHJvZmlsZURlc2NyaXB0aW9uXG4gICAgICAgIHNob3dFZGl0RGVzY3JpcHRpb25TaGVldCA9IHRydWVcbiAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG5cbiAgICAgICAgLy8gRm9jdXMgdGhlIHRleHQgZWRpdG9yIHdoZW4gdGhlIHNoZWV0IGFwcGVhcnNcbiAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDAuMSkge1xuICAgICAgICAgICAgc2VsZi5pc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvLy8gU2hvdyBkZWxldGUgYXZhdGFyIGNvbmZpcm1hdGlvblxuICAgIGZ1bmMgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbkRpYWxvZygpIHtcbiAgICAgICAgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbiA9IHRydWVcbiAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgfVxuXG4gICAgLy8vIFNob3cgdGhlIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICAgICAgc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IHRydWVcbiAgICB9XG5cbiAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICAvLy8gLSBQYXJhbWV0ZXJzOlxuICAgIC8vLyAgIC0gbmV3UGhvbmU6IFRoZSBuZXcgcGhvbmUgbnVtYmVyXG4gICAgLy8vICAgLSByZWdpb246IFRoZSBwaG9uZSByZWdpb25cbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlZChuZXdQaG9uZTogU3RyaW5nLCByZWdpb246IFN0cmluZykge1xuICAgICAgICBzZWxmLnBob25lID0gbmV3UGhvbmVcbiAgICAgICAgc2F2ZVBob25lKClcbiAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAgfVxuXG4gICAgLy8vIFNob3cgc2lnbiBvdXQgY29uZmlybWF0aW9uXG4gICAgZnVuYyBjb25maXJtU2lnbk91dCgpIHtcbiAgICAgICAgc2hvd1NpZ25PdXRDb25maXJtYXRpb24gPSB0cnVlXG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgIH1cbi4uLlxuXG4gICAgLy8gTUFSSzogLSBQcml2YXRlIE1ldGhvZHNcblxuICAgIC8vLyBMb2FkIHBlcnNpc3RlZCBkYXRhIGZyb20gVXNlckRlZmF1bHRzXG4gICAgcHJpdmF0ZSBmdW5jIGxvYWRQZXJzaXN0ZWREYXRhKCkge1xuICAgICAgICAvLyBMb2FkIHVzZXIgbmFtZVxuICAgICAgICBpZiBsZXQgdXNlck5hbWUgPSBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc3RyaW5nKGZvcktleTogXCJ1c2VyTmFtZVwiKSB7XG4gICAgICAgICAgICBzZWxmLm5hbWUgPSB1c2VyTmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCB1c2VyIHBob25lXG4gICAgICAgIGlmIGxldCB1c2VyUGhvbmUgPSBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc3RyaW5nKGZvcktleTogXCJ1c2VyUGhvbmVcIikge1xuICAgICAgICAgICAgc2VsZi5waG9uZSA9IHVzZXJQaG9uZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBwcm9maWxlIGRlc2NyaXB0aW9uXG4gICAgICAgIGlmIGxldCBwcm9maWxlRGVzY3JpcHRpb24gPSBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc3RyaW5nKGZvcktleTogXCJ1c2VyUHJvZmlsZURlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgIHNlbGYucHJvZmlsZURlc2NyaXB0aW9uID0gcHJvZmlsZURlc2NyaXB0aW9uXG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2FkIGF2YXRhciBpbWFnZSBpZiBhdmFpbGFibGVcbiAgICAgICAgbG9hZEF2YXRhckltYWdlKClcbiAgICB9XG5cbiAgICAvLy8gU2F2ZSB0aGUgdXNlciBuYW1lIHRvIFVzZXJEZWZhdWx0c1xuICAgIHByaXZhdGUgZnVuYyBzYXZlTmFtZSgpIHtcbiAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnNldChuYW1lLCBmb3JLZXk6IFwidXNlck5hbWVcIilcbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0XG4uLi5cblxuICAgIC8vLyBJbml0aWFsaXplIHRoZSB2aWV3IG1vZGVsIHdpdGggZGVmYXVsdCB2YWx1ZXNcbiAgICBpbml0KCkge1xuICAgICAgICAvLyBNb2NrIGRhdGEgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgc2VsZi5jdXJyZW50UGhvbmUgPSBcIig5NTQpIDIzNC01Njc4XCJcbiAgICAgICAgc2VsZi5jdXJyZW50UGhvbmVSZWdpb24gPSBcIlVTXCJcbiAgICAgICAgc2VsZi5lZGl0aW5nUGhvbmVSZWdpb24gPSBcIlVTXCJcblxuICAgICAgICAvLyBTZXQgdXAgbW9jayBjYWxsYmFjayBmb3IgcGhvbmUgbnVtYmVyIGNoYW5nZVxuICAgICAgICBzZWxmLm9uUGhvbmVOdW1iZXJDaGFuZ2VkID0geyBuZXdQaG9uZSwgcmVnaW9uIGluXG4gICAgICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHVwZGF0ZSB0aGUgdXNlcidzIHBob25lIG51bWJlciBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgcHJpbnQgaXQgdG8gdGhlIGNvbnNvbGVcbiAgICAgICAgICAgIHByaW50KFwiUGhvbmUgbnVtYmVyIGNoYW5nZWQgdG8gXFwobmV3UGhvbmUpIChcXChyZWdpb24pKVwiKVxuXG4gICAgICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgYmUgY29ubmVjdGVkIHRvIHRoZSBQcm9maWxlVmlld01vZGVsJ3MgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkIG1ldGhvZFxuICAgICAgICAgICAgTm90aWZpY2F0aW9uQ2VudGVyLmRlZmF1bHQucG9zdChuYW1lOiBOU05vdGlmaWNhdGlvbi5OYW1lKFwiUGhvbmVOdW1iZXJDaGFuZ2VkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBuaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySW5mbzogW1wicGhvbmVcIjogbmV3UGhvbmUsIFwicmVnaW9uXCI6IHJlZ2lvbl0pXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIHRleHQgY2hhbmdlXG4gICAgZnVuYyBoYW5kbGVQaG9uZU51bWJlckNoYW5nZShuZXdWYWx1ZTogU3RyaW5nKSB7XG4gICAgICAgIC8vIENoZWNrIGZvciBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlclxuICAgICAgICBpZiBuZXdWYWx1ZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMDAwMDAwMDAwMFwiIHtcbiAgICAgICAgICAgIC8vIEFsbG93IHRoZSBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlciBhcyBpc1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3JtYXQgdGhlIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cblxuICAgICAgICBzd2l0Y2ggZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYTogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVUs6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICBmb3JtYXRBVVBob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0XG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGhlIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVLOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWE6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgZm9ybWF0OiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB5b3VyIG5ldyBwaG9uZSBudW1iZXIuIFdlJ2xsIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byBjb25maXJtLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGV0IGVycm9yTWVzc2FnZSA9IHZpZXdNb2RlbC5lcnJvck1lc3NhZ2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguY2FwdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogTGlmZVNpZ25hbC9MaWZlU2lnbmFsL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlRmVhdHVyZS5zd2lmdFxuLi4uXG5cbiAgICAvLy8gVGhlIHN0YXRlIG9mIHRoZSBwcm9maWxlIGZlYXR1cmVcbiAgICBAT2JzZXJ2YWJsZVN0YXRlXG4gICAgc3RydWN0IFN0YXRlOiBFcXVhdGFibGUsIFNlbmRhYmxlIHtcbiAgICAgICAgLy8vIFVzZXIgZGF0YSByZWZlcmVuY2UgZnJvbSBwYXJlbnQgZmVhdHVyZVxuICAgICAgICB2YXIgdXNlckRhdGE6IFVzZXJEYXRhID0gLmVtcHR5XG5cbiAgICAgICAgLy8vIENoaWxkIGZlYXR1cmUgc3RhdGVzXG4gICAgICAgIEBQcmVzZW50cyB2YXIgcXJDb2RlU2hhcmU6IFFSQ29kZVNoYXJlRmVhdHVyZS5TdGF0ZT9cblxuICAgICAgICAvLy8gUHJvZmlsZSBVSSBzdGF0ZSBmb3IgbWFuYWdpbmcgVUktc3BlY2lmaWMgc3RhdGVcbiAgICAgICAgdmFyIHNob3dFZGl0TmFtZVNoZWV0OiBCb29sID0gZmFsc2VcbiAgICAgICAgdmFyIGVkaXRpbmdOYW1lOiBTdHJpbmcgPSBcIlwiXG4gICAgICAgIHZhciBzaG93RWRpdERlc2NyaXB0aW9uU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgICAgICB2YXIgZWRpdGluZ0Rlc2NyaXB0aW9uOiBTdHJpbmcgPSBcIlwiXG4gICAgICAgIHZhciBzaG93RWRpdFBob25lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgICAgICB2YXIgZWRpdGluZ1Bob25lOiBTdHJpbmcgPSBcIlwiXG4gICAgICAgIHZhciBlZGl0aW5nUGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIlxuICAgICAgICB2YXIgc2hvd0VkaXRBdmF0YXJTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgICAgIHZhciBzaG93U2lnbk91dENvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXG4gICAgICAgIHZhciBzaG93RmlyZWJhc2VUZXN0OiBCb29sID0gZmFsc2Vcbi4uLlxuXG4gICAgLy8vIEFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIG9uIHRoZSBwcm9maWxlIGZlYXR1cmVcbiAgICBlbnVtIEFjdGlvbjogQmluZGFibGVBY3Rpb24sIEVxdWF0YWJsZSwgU2VuZGFibGUge1xuICAgICAgICAvLyBNQVJLOiAtIEJpbmRpbmcgQWN0aW9uXG5cbiAgICAgICAgLy8vIEJpbmRpbmcgYWN0aW9uIGZvciB0d28td2F5IGJpbmRpbmcgd2l0aCB0aGUgdmlld1xuICAgICAgICBjYXNlIGJpbmRpbmcoQmluZGluZ0FjdGlvbjxTdGF0ZT4pXG5cbiAgICAgICAgLy8gTUFSSzogLSBMaWZlY3ljbGUgQWN0aW9uc1xuXG4gICAgICAgIC8vLyBDYWxsZWQgd2hlbiB0aGUgdmlldyBhcHBlYXJzXG4gICAgICAgIGNhc2Ugb25BcHBlYXJcblxuICAgICAgICAvLyBNQVJLOiAtIFByb2ZpbGUgT3BlcmF0aW9uc1xuXG4gICAgICAgIC8vLyBVcGRhdGUgcHJvZmlsZSAoZGVsZWdhdGVkIHRvIHBhcmVudClcbiAgICAgICAgY2FzZSB1cGRhdGVQcm9maWxlXG5cbiAgICAgICAgLy8vIFNpZ24gb3V0XG4gICAgICAgIGNhc2Ugc2lnbk91dFxuICAgICAgICBjYXNlIHNpZ25PdXRTdWNjZWVkZWRcbiAgICAgICAgY2FzZSBzaWduT3V0RmFpbGVkKFVzZXJGYWNpbmdFcnJvcilcblxuICAgICAgICAvLyBNQVJLOiAtIFBob25lIE51bWJlciBDaGFuZ2UgQWN0aW9uc1xuXG4gICAgICAgIC8vLyBTdGFydCBwaG9uZSBudW1iZXIgY2hhbmdlIHByb2Nlc3NcbiAgICAgICAgY2FzZSBzdGFydFBob25lTnVtYmVyQ2hhbmdlXG5cbiAgICAgICAgLy8vIENhbmNlbCBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAgICAgIGNhc2UgY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2VcblxuICAgICAgICAvLyBQaG9uZSByZWdpb24gaXMgbm93IGhhbmRsZWQgYnkgYmluZGluZ1xuLi4uXG5cbiAgICAgICAgLy8vIFNldCB3aGV0aGVyIHRvIHNob3cgdGhlIGVkaXQgYXZhdGFyIHNoZWV0XG4gICAgICAgIGNhc2Ugc2V0U2hvd0VkaXRBdmF0YXJTaGVldChCb29sKVxuXG4gICAgICAgIC8vLyBTZXQgd2hldGhlciB0byBzaG93IHRoZSBzaWduIG91dCBjb25maXJtYXRpb25cbiAgICAgICAgY2FzZSBzZXRTaG93U2lnbk91dENvbmZpcm1hdGlvbihCb29sKVxuXG4gICAgICAgIC8vLyBTZXQgd2hldGhlciB0byBzaG93IHRoZSBGaXJlYmFzZSB0ZXN0XG4gICAgICAgIGNhc2Ugc2V0U2hvd0ZpcmViYXNlVGVzdChCb29sKVxuXG4gICAgICAgIC8vIE1BUks6IC0gUVIgQ29kZSBTaGFyZSBBY3Rpb25zXG5cbiAgICAgICAgLy8vIFNob3cgUVIgY29kZSBzaGFyZSBzaGVldFxuICAgICAgICBjYXNlIHNob3dRUkNvZGVTaGFyZVNoZWV0XG5cbiAgICAgICAgLy8gTUFSSzogLSBEZWxlZ2F0ZSBBY3Rpb25zXG5cbiAgICAgICAgLy8vIERlbGVnYXRlIGFjdGlvbnMgdG8gcGFyZW50IGZlYXR1cmVzXG4gICAgICAgIGNhc2UgZGVsZWdhdGUoRGVsZWdhdGVBY3Rpb24pXG5cbiAgICAgICAgZW51bSBEZWxlZ2F0ZUFjdGlvbjogRXF1YXRhYmxlLCBTZW5kYWJsZSB7XG4gICAgICAgICAgICAvLy8gVXNlciBzaWduZWQgb3V0XG4gICAgICAgICAgICBjYXNlIHVzZXJTaWduZWRPdXRcblxuICAgICAgICAgICAgLy8vIFVwZGF0ZSBwcm9maWxlXG4gICAgICAgICAgICBjYXNlIHVwZGF0ZVByb2ZpbGUobmFtZTogU3RyaW5nLCBlbWVyZ2VuY3lOb3RlOiBTdHJpbmcpXG5cbiAgICAgICAgICAgIC8vLyBVcGRhdGUgcGhvbmUgbnVtYmVyXG4gICAgICAgICAgICBjYXNlIHVwZGF0ZVBob25lTnVtYmVyKHBob25lOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKVxuXG4gICAgICAgICAgICAvLy8gUGhvbmUgbnVtYmVyIHVwZGF0ZSBmYWlsZWRcbiAgICAgICAgICAgIGNhc2UgcGhvbmVOdW1iZXJVcGRhdGVGYWlsZWQoVXNlckZhY2luZ0Vycm9yKVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvLy8gVGhlIGJvZHkgb2YgdGhlIHJlZHVjZXJcbiAgICB2YXIgYm9keTogc29tZSBSZWR1Y2VyT2Y8U2VsZj4ge1xuICAgICAgICBSZWR1Y2UgeyBzdGF0ZSwgYWN0aW9uIGluXG4gICAgICAgICAgICBzd2l0Y2ggYWN0aW9uIHtcbiAgICAgICAgICAgIC8vIE1BUks6IC0gTGlmZWN5Y2xlIEFjdGlvbnNcblxuICAgICAgICAgICAgY2FzZSAub25BcHBlYXI6XG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBVSSBzdGF0ZSB3aXRoIGN1cnJlbnQgdXNlciBkYXRhXG4gICAgICAgICAgICAgICAgcmV0dXJuIC5ub25lXG5cbiAgICAgICAgICAgIC8vIE1BUks6IC0gUHJvZmlsZSBPcGVyYXRpb25zXG5cbiAgICAgICAgICAgIGNhc2UgLnVwZGF0ZVByb2ZpbGU6XG4gICAgICAgICAgICAgICAgLy8gRGVsZWdhdGUgdG8gcGFyZW50IGZlYXR1cmVcbiAgICAgICAgICAgICAgICByZXR1cm4gLnNlbmQoLmRlbGVnYXRlKC51cGRhdGVQcm9maWxlKFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZS5lZGl0aW5nTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1lcmdlbmN5Tm90ZTogc3RhdGUuZWRpdGluZ0Rlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgKSkpXG5cbiAgICAgICAgICAgIGNhc2UgLnNpZ25PdXQ6XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHJldHVybiAucnVuIHsgW2ZpcmViYXNlQXV0aF0gc2VuZCBpblxuICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkgYXdhaXQgZmlyZWJhc2VBdXRoLnNpZ25PdXQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZCguc2lnbk91dFN1Y2MuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFVZU40cVlTNnVKQWdwRHMyWTF4c3BIIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0ODoyNy41NTRaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUncyBhIFBob25lRm9ybWF0dGVyIHV0aWxpdHkgdGhhdCdzIGJlaW5nIHVzZWQgaW4gdGhlIGNvZGU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYmEzNDY5ZTEtOTNlMy00MzcxLWIyNjQtNTJlYWYyZWJlNjhlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRXA2ZFc5WmlMTmd0R2dCQTZSTkRzcyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlld01vZGVsLnN3aWZ0XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdhdGhlcmVkLCBJJ2xsIG5vdyBjcmVhdGUgYSBkZXRhaWxlZCBwbGFuIGZvciBtaWdyYXRpbmcgdGhlIFBob25lTnVtYmVyQ2hhbmdlVmlldyBhbmQgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwgaW50byB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwgZmlsZXMuXG5cbiMjIERldGFpbGVkIE1pZ3JhdGlvbiBQbGFuXG5cbjEuICoqVXBkYXRlIFByb2ZpbGVWaWV3TW9kZWwuc3dpZnQqKjpcbiAgIC0gQWRkIHRoZSBuZWNlc3NhcnkgcHJvcGVydGllcyBmcm9tIFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsXG4gICAtIEFkZCB0aGUgcGhvbmUgbnVtYmVyIGZvcm1hdHRpbmcgbWV0aG9kc1xuICAgLSBBZGQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhbmRsaW5nIG1ldGhvZHNcblxuMi4gKipVcGRhdGUgUHJvZmlsZVZpZXcuc3dpZnQqKjpcbiAgIC0gQWRkIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXcgYXMgY29tcHV0ZWQgcHJvcGVydGllc1xuICAgLSBNaWdyYXRlIHRoZSBVSSBjb21wb25lbnRzIGZyb20gUGhvbmVOdW1iZXJDaGFuZ2VWaWV3XG4gICAtIEVuc3VyZSBwcm9wZXIgaW50ZWdyYXRpb24gd2l0aCB0aGUgZXhpc3RpbmcgUHJvZmlsZVZpZXdNb2RlbFxuXG5MZXQncyBzdGFydCB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcblxuIyMjIFN0ZXAgMTogVXBkYXRlIFByb2ZpbGVWaWV3TW9kZWwuc3dpZnRcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vQ29yZS9VdGlsaXRpZXMvUGhvbmVGb3JtYXR0ZXIuc3dpZnRcbmltcG9ydCBGb3VuZGF0aW9uXG5cbi8vLyBVdGlsaXR5IGZvciBmb3JtYXR0aW5nIHBob25lIG51bWJlcnNcbnN0cnVjdCBQaG9uZUZvcm1hdHRlciB7XG4gICAgLy8vIEZvcm1hdCBhIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgcmVnaW9uXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHBob25lTnVtYmVyOiBUaGUgcGhvbmUgbnVtYmVyIHRvIGZvcm1hdFxuICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcmVnaW9uIGNvZGUgKGUuZy4sIFwiVVNcIiwgXCJVS1wiKVxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBzdGF0aWMgZnVuYyBmb3JtYXRQaG9uZU51bWJlcihfIHBob25lTnVtYmVyOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICAvLyBSZW1vdmUgYW55IG5vbi1kaWdpdCBjaGFyYWN0ZXJzXG4gICAgICAgIGxldCBkaWdpdHMgPSBwaG9uZU51bWJlci5maWx0ZXIgeyAkMC5pc051bWJlciB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBlbXB0eSwgcmV0dXJuIGVtcHR5IHN0cmluZ1xuICAgICAgICBpZiBkaWdpdHMuaXNFbXB0eSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXQgYmFzZWQgb24gcmVnaW9uXG4gICAgICAgIHN3aXRjaCByZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFVTUGhvbmVOdW1iZXIoZGlnaXRzKVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRVS1Bob25lTnVtYmVyKGRpZ2l0cylcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0QVVQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VVNQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXJcbiAgICAvLy8gLSBQYXJhbWV0ZXIgZGlnaXRzOiBUaGUgZGlnaXRzIHRvIGZvcm1hdFxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBwcml2YXRlIHN0YXRpYyBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBkaWdpdHM6IFN0cmluZykgLT4gU3RyaW5nIHtcbiAgICAgICAgbGV0IGxpbWl0ZWREaWdpdHMgPSBTdHJpbmcoZGlnaXRzLnByZWZpeCgxMCkpXG4gICAgICAgIFxuICAgICAgICBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID09IDEwIHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWREaWdpdHMucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICByZXR1cm4gXCIrMSAoXFwoYXJlYUNvZGUpKSBcXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIisxIFxcKGxpbWl0ZWREaWdpdHMpXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVLIHBob25lIG51bWJlclxuICAgIC8vLyAtIFBhcmFtZXRlciBkaWdpdHM6IFRoZSBkaWdpdHMgdG8gZm9ybWF0XG4gICAgLy8vIC0gUmV0dXJuczogQSBmb3JtYXR0ZWQgcGhvbmUgbnVtYmVyIHN0cmluZ1xuICAgIHByaXZhdGUgc3RhdGljIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGRpZ2l0czogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICBsZXQgbGltaXRlZERpZ2l0cyA9IFN0cmluZyhkaWdpdHMucHJlZml4KDEwKSlcbiAgICAgICAgXG4gICAgICAgIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPT0gMTAge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZERpZ2l0cy5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoNylcbiAgICAgICAgICAgIHJldHVybiBcIis0NCBcXChhcmVhQ29kZSkgXFwocHJlZml4KSBcXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID4gMCB7XG4gICAgICAgICAgICByZXR1cm4gXCIrNDQgXFwobGltaXRlZERpZ2l0cylcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyXG4gICAgLy8vIC0gUGFyYW1ldGVyIGRpZ2l0czogVGhlIGRpZ2l0cyB0byBmb3JtYXRcbiAgICAvLy8gLSBSZXR1cm5zOiBBIGZvcm1hdHRlZCBwaG9uZSBudW1iZXIgc3RyaW5nXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZGlnaXRzOiBTdHJpbmcpIC0+IFN0cmluZyB7XG4gICAgICAgIGxldCBsaW1pdGVkRGlnaXRzID0gU3RyaW5nKGRpZ2l0cy5wcmVmaXgoMTApKVxuICAgICAgICBcbiAgICAgICAgaWYgbGltaXRlZERpZ2l0cy5jb3VudCA9PSAxMCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRGlnaXRzLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgcmV0dXJuIFwiKzYxIFxcKGFyZWFDb2RlKSBcXChwcmVmaXgpIFxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIis2MSBcXChsaW1pdGVkRGlnaXRzKVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbC5zd2lmdFxuLi4uXG5cbiAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciB0ZXh0IGNoYW5nZVxuICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UobmV3VmFsdWU6IFN0cmluZykge1xuICAgICAgICAvLyBDaGVjayBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJcbiAgICAgICAgaWYgbmV3VmFsdWUgPT0gXCIrMTEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjAwMDAwMDAwMDBcIiB7XG4gICAgICAgICAgICAvLyBBbGxvdyB0aGUgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXIgYXMgaXNcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXdWYWx1ZS5maWx0ZXIgeyAkMC5pc051bWJlciB9XG5cbiAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVLOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWE6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIERlZmF1bHQgZm9ybWF0OiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8vLyBGb3JtYXQgYSBVUy9DYW5hZGEgcGhvbmUgbnVtYmVyIChYWFgtWFhYLVhYWFgpXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA2IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMylcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBGb3JtYXQgYSBVSyBwaG9uZSBudW1iZXIgKFhYWFgtWFhYLVhYWClcbiAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcblxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDcge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNCkucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNylcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdFxuLi4uXG5cbiAgICAvLy8gRm9ybWF0IGEgVVMvQ2FuYWRhIHBob25lIG51bWJlciAoWFhYLVhYWC1YWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVU1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNiB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg2KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhIFVLIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVS1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0NvcmUvVXRpbGl0aWVzL0hhcHRpY0ZlZWRiYWNrLnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IFVJS2l0XG5cbi8vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgaGFwdGljIGZlZWRiYWNrXG5zdHJ1Y3QgSGFwdGljRmVlZGJhY2sge1xuICAgIC8vLyBUcmlnZ2VyIGEgc3RhbmRhcmQgaGFwdGljIGZlZWRiYWNrIChtZWRpdW0gaW1wYWN0KVxuICAgIHN0YXRpYyBmdW5jIHRyaWdnZXJIYXB0aWMoKSB7XG4gICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAubWVkaXVtKVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgbGlnaHQgaW1wYWN0IGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIGxpZ2h0SW1wYWN0KCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmxpZ2h0KVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgaGVhdnkgaW1wYWN0IGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIGhlYXZ5SW1wYWN0KCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmhlYXZ5KVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgc2VsZWN0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIHNlbGVjdGlvbkZlZWRiYWNrKCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlTZWxlY3Rpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgIGdlbmVyYXRvci5zZWxlY3Rpb25DaGFuZ2VkKClcbiAgICB9XG5cbiAgICAvLy8gVHJpZ2dlciBhIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICBzdGF0aWMgZnVuYyBub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yLkZlZWRiYWNrVHlwZSA9IC5zdWNjZXNzKSB7XG4gICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgZ2VuZXJhdG9yLm5vdGlmaWNhdGlvbk9jY3VycmVkKHR5cGUpXG4gICAgfVxufVxuXG4vLyBHbG9iYWwgZnVuY3Rpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgLSByZW5hbWVkIHRvIGF2b2lkIGNvbmZsaWN0c1xuZnVuYyBtb2NrVHJpZ2dlckhhcHRpYygpIHtcbiAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbn1cbi4uLlxuUGF0aDogTGlmZVNpZ25hbC9MaWZlU2lnbmFsL0NvcmUvSGFwdGljRmVlZGJhY2svSGFwdGljRmVlZGJhY2tDbGllbnQuc3dpZnRcbmltcG9ydCBVSUtpdFxuaW1wb3J0IENvbXBvc2FibGVBcmNoaXRlY3R1cmVcblxuLy8vIEEgY2xpZW50IGZvciBoYXB0aWMgZmVlZGJhY2tcbkBEZXBlbmRlbmN5Q2xpZW50XG5zdHJ1Y3QgSGFwdGljRmVlZGJhY2tDbGllbnQ6IFNlbmRhYmxlIHtcbiAgICAvLy8gVHJpZ2dlciBhIGxpZ2h0IGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgbGlnaHRJbXBhY3Q6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgbWVkaXVtIGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgbWVkaXVtSW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIGhlYXZ5IGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgaGVhdnlJbXBhY3Q6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgc2VsZWN0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBzZWxlY3Rpb25GZWVkYmFjazogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSBub3RpZmljYXRpb24gaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiBAU2VuZGFibGUgKF8gdHlwZTogVUlOb3RpZmljYXRpb25GZWVkYmFja0dlbmVyYXRvci5GZWVkYmFja1R5cGUpIC0+IFZvaWQgPSB7IF8gaW4gfVxuXG4gICAgLy8vIFRyaWdnZXIgYSBzdWNjZXNzIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgc3VjY2VzczogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSB3YXJuaW5nIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgd2FybmluZzogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYW4gZXJyb3Igbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBlcnJvcjogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxufVxuXG4vLyBNQVJLOiAtIExpdmUgSW1wbGVtZW50YXRpb25cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50IHtcbiAgICAvLy8gVGhlIGxpdmUgaW1wbGVtZW50YXRpb24gb2YgdGhlIGhhcHRpYyBjbGllbnRcbiAgICBzdGF0aWMgbGV0IGxpdmUgPSBIYXB0aWNDbGllbnQoXG4gICAgICAgIGxpZ2h0SW1wYWN0OiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAubGlnaHQpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBtZWRpdW1JbXBhY3Q6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IC5tZWRpdW0pXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBoZWF2eUltcGFjdDoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmhlYXZ5KVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5pbXBhY3RPY2N1cnJlZCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0aW9uRmVlZGJhY2s6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJU2VsZWN0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5zZWxlY3Rpb25DaGFuZ2VkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBub3RpZmljYXRpb25GZWVkYmFjazogeyB0eXBlIGluXG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQodHlwZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLnN1Y2Nlc3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlOb3RpZmljYXRpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLm5vdGlmaWNhdGlvbk9jY3VycmVkKC53YXJuaW5nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLmVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKVxufVxuXG4vLyBNQVJLOiAtIE1vY2sgSW1wbGVtZW50YXRpb25cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50IHtcbiAgICAvLy8gQSBtb2NrIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lcyBub3RoaW5nLCBmb3IgdGVzdGluZ1xuICAgIHN0YXRpYyBsZXQgbW9jayA9IFNlbGYoXG4gICAgICAgIGxpZ2h0SW1wYWN0OiB7fSxcbiAgICAgICAgbWVkaXVtSW1wYWN0OiB7fSxcbiAgICAgICAgaGVhdnlJbXBhY3Q6IHt9LFxuICAgICAgICBzZWxlY3Rpb25GZWVkYmFjazoge30sXG4gICAgICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiB7IF8gaW4gfSxcbiAgICAgICAgc3VjY2Vzczoge30sXG4gICAgICAgIHdhcm5pbmc6IHt9LFxuICAgICAgICBlcnJvcjoge31cbiAgICApXG59XG5cbi8vIE1BUks6IC0gRGVwZW5kZW5jeSBSZWdpc3RyYXRpb25cblxuZXh0ZW5zaW9uIERlcGVuZGVuY3lWYWx1ZXMge1xuICAgIC8vLyBUaGUgaGFwdGljIGNsaWVudCBkZXBlbmRlbmN5XG4gICAgdmFyIGhhcHRpYzogSGFwdGljQ2xpZW50IHtcbiAgICAgICAgZ2V0IHsgc2VsZltIYXB0aWNDbGllbnQuc2VsZl0gfVxuICAgICAgICBzZXQgeyBzZWxmW0hhcHRpY0NsaWVudC5zZWxmXSA9IG5ld1ZhbHVlIH1cbiAgICB9XG59XG5cbmV4dGVuc2lvbiBIYXB0aWNGZWVkYmFja0NsaWVudDogRGVwZW5kZW5jeUtleSB7XG4gICAgLy8vIFRoZSBsaXZlIHZhbHVlIG9mIHRoZSBoYXB0aWMgY2xpZW50XG4gICAgc3RhdGljIHZhciBsaXZlVmFsdWU6IEhhcHRpY0NsaWVudCB7XG4gICAgICAgIHJldHVybiAubGl2ZVxuICAgIH1cblxuICAgIC8vLyBUaGUgdGVzdCB2YWx1ZSBvZiB0aGUgaGFwdGljIGNsaWVudFxuICAgIHN0YXRpYyB2YXIgdGVzdFZhbHVlOiBIYXB0aWNDbGllbnQge1xuICAgICAgICByZXR1cm4gLm1vY2tcbiAgICB9XG59XG5cbi8vIE1BUks6IC0gR2xvYmFsIENvbnZlbmllbmNlIEZ1bmN0aW9uXG5cbi8vLyBHbG9iYWwgZnVuY3Rpb24gdG8gdHJpZ2dlciBhIHN0YW5kYXJkIGhhcHRpYyBmZWVkYmFja1xuZnVuYyB0cmlnZ2VySGFwdGljKCkge1xuICAgIEBEZXBlbmRlbmN5KFxcLmhhcHRpYykgdmFyIGhhcHRpY1xuICAgIGhhcHRpYy5tZWRpdW1JbXBhY3QoKVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0NvcmUvRXh0ZW5zaW9ucy9WaWV3cy9WaWV3K0V4dGVuc2lvbnMuc3dpZnRcbi4uLlxuXG4gICAgLy8vIEFkZCBoYXB0aWMgZmVlZGJhY2sgdG8gYSBidXR0b24gb3Igb3RoZXIgaW50ZXJhY3RpdmUgZWxlbWVudFxuICAgIC8vLyAtIFBhcmFtZXRlcnM6XG4gICAgLy8vICAgLSBzdHlsZTogVGhlIGhhcHRpYyBmZWVkYmFjayBzdHlsZSB0byB1c2UgKGRlZmF1bHQ6IC5tZWRpdW0pXG4gICAgLy8vIC0gUmV0dXJuczogQSB2aWV3IHdpdGggaGFwdGljIGZlZWRiYWNrIGFkZGVkXG4gICAgZnVuYyBoYXB0aWNGZWVkYmFjayhzdHlsZTogVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvci5GZWVkYmFja1N0eWxlID0gLm1lZGl1bSkgLT4gc29tZSBWaWV3IHtcbiAgICAgICAgc2VsZi5zaW11bHRhbmVvdXNHZXN0dXJlKFRhcEdlc3R1cmUoKS5vbkVuZGVkIHsgXyBpblxuICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IHN0eWxlKVxuICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLy8gQWRkIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2sgdG8gYSBidXR0b24gb3Igb3RoZXIgaW50ZXJhY3RpdmUgZWxlbWVudFxuICAgIC8vLyAtIFJldHVybnM6IEEgdmlldyB3aXRoIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2sgYWRkZWRcbiAgICBmdW5jIHNlbGVjdGlvbkhhcHRpY0ZlZWRiYWNrKCkgLT4gc29tZSBWaWV3IHtcbiAgICAgICAgc2VsZi5zaW11bHRhbmVvdXNHZXN0dXJlKFRhcEdlc3R1cmUoKS5vbkVuZGVkIHsgXyBpblxuICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJU2VsZWN0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgZ2VuZXJhdG9yLnNlbGVjdGlvbkNoYW5nZWQoKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vLyBBZGQgbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFjayB0byBhIGJ1dHRvbiBvciBvdGhlciBpbnRlcmFjdGl2ZSBlbGVtZW50XG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHR5cGU6IFRoZSBub3RpZmljYXRpb24gZmVlZGJhY2sgdHlwZSB0byB1c2UgKGRlZmF1bHQ6IC5zdWNjZXNzKVxuICAgIC8vLyAtIFJldHVybnM6IEEgdmlldyB3aXRoIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2sgYWRkZWRcbiAgICBmdW5jIG5vdGlmaWNhdGlvbkhhcHRpY0ZlZWRiYWNrKHR5cGU6IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IuRmVlZGJhY2tUeXBlID0gLnN1Y2Nlc3MpIC0+IHNvbWUgVmlldyB7XG4gICAgICAgIHNlbGYuc2ltdWx0YW5lb3VzR2VzdHVyZShUYXBHZXN0dXJlKCkub25FbmRlZCB7IF8gaW5cbiAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCh0eXBlKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuLy8vIEV4dGVuc2lvbnMgZm9yIEFycmF5XG5leHRlbnNpb24gQXJyYXkge1xuICAgIC8vLyBTYWZlIHN1YnNjcmlwdCB0aGF0IHJldHVybnMgbmlsIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gICAgc3Vic2NyaXB0KHNhZmUgaW5kZXg6IEludCkgLT4gRWxlbWVudD8ge1xuICAgICAgICByZXR1cm4gaW5kaWNlcy5jb250YWlucyhpbmRleCkgPyBzZWxmW2luZGV4XSA6IG5pbFxuICAgIH1cbn1cbi4uLlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Db3JlL05vdGlmaWNhdGlvbnMvTm90aWZpY2F0aW9uTWFuYWdlci5zd2lmdFxuLi4uXG5cbiAgICAvLy8gU2hvdyBhIGZlZWRiYWNrLW9ubHkgc2lsZW50IG5vdGlmaWNhdGlvbiB0aGF0IGFwcGVhcnMgYXMgYSB0b2FzdCBtZXNzYWdlIGJ1dCBpc24ndCB0cmFja2VkIGluIHRoZSBub3RpZmljYXRpb24gY2VudGVyXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHRpdGxlOiBUaGUgbm90aWZpY2F0aW9uIHRpdGxlXG4gICAgLy8vICAgLSBib2R5OiBUaGUgbm90aWZpY2F0aW9uIGJvZHlcbiAgICAvLy8gICAtIGRlbGF5OiBUaGUgZGVsYXkgYmVmb3JlIHNob3dpbmcgdGhlIG5vdGlmaWNhdGlvblxuICAgIC8vLyAgIC0gY29tcGxldGlvbjogQ29tcGxldGlvbiBoYW5kbGVyIHdpdGggYW4gb3B0aW9uYWwgZXJyb3JcbiAgICBmdW5jIHNob3dGZWVkYmFja05vdGlmaWNhdGlvbihcbiAgICAgICAgdGl0bGU6IFN0cmluZyxcbiAgICAgICAgYm9keTogU3RyaW5nLFxuICAgICAgICBkZWxheTogVGltZUludGVydmFsID0gMC4xLFxuICAgICAgICBjb21wbGV0aW9uOiAoKEVycm9yPykgLT4gVm9pZCk/ID0gbmlsXG4gICAgKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGF1dGhvcml6ZWRcbiAgICAgICAgaWYgIWlzQXV0aG9yaXplZCB7XG4gICAgICAgICAgICAvLyBSZXF1ZXN0IGF1dGhvcml6YXRpb24gaWYgbm90IGF1dGhvcml6ZWRcbiAgICAgICAgICAgIHJlcXVlc3RBdXRob3JpemF0aW9uIHsgZ3JhbnRlZCBpblxuICAgICAgICAgICAgICAgIGlmIGdyYW50ZWQge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjaGVkdWxlU2lsZW50Tm90aWZpY2F0aW9uKHRpdGxlOiB0aXRsZSwgYm9keTogYm9keSwgdHlwZTogLnBpbmdOb3RpZmljYXRpb24sIGRlbGF5OiBkZWxheSwgdHJhY2tJbkNlbnRlcjogZmFsc2UsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbi4uLlxuXG4gICAgICAgIC8vIEFkZCB0aGUgcmVxdWVzdCB0byB0aGUgbm90aWZpY2F0aW9uIGNlbnRlclxuICAgICAgICBVTlVzZXJOb3RpZmljYXRpb25DZW50ZXIuY3VycmVudCgpLmFkZChyZXF1ZXN0KSB7IGVycm9yIGluXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGhhcHRpYyBmZWVkYmFja1xuICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2soKVxuXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBjb21wbGV0aW9uIGhhbmRsZXJcbiAgICAgICAgICAgIGNvbXBsZXRpb24/KGVycm9yKVxuXG4gICAgICAgICAgICAvLyBQb3N0IGEgbm90aWZpY2F0aW9uIHRvIHVwZGF0ZSB0aGUgbm90aWZpY2F0aW9uIGNlbnRlciBpZiB0cmFja2luZyBpcyBlbmFibGVkXG4gICAgICAgICAgICBpZiB0cmFja0luQ2VudGVyIHtcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmaWNhdGlvbkNlbnRlci5wb3N0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBOU05vdGlmaWNhdGlvbi5OYW1lKFwiTmV3Tm90aWZpY2F0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG5pbCxcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm86IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvZHlcIjogYm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiB0eXBlLnJhd1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9DaGVja0luL0NoZWNrSW5WaWV3TW9kZWwuc3dpZnRcbi4uLlxuICAgICAgICBSdW5Mb29wLm1haW4uYWRkKHRhcFJlc2V0VGltZXIhLCBmb3JNb2RlOiAuY29tbW9uKVxuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBzaHJpbmsgdGltZXIgdG8gZ3JhZHVhbGx5IHJlZHVjZSB0aGUgcHJvZ3Jlc3MgYmFyIGlmIG5vdCB0YXBwZWQgYWdhaW5cbiAgICAgICAgc3RhcnRTaHJpbmtUaW1lcigpXG4gICAgfVxuXG4gICAgLy8vIFN0YXJ0IHRoZSBsb25nIHByZXNzIHRpbWVyXG4gICAgZnVuYyBzdGFydExvbmdQcmVzcygpIHtcbiAgICAgICAgLy8gSWYgYWxyZWFkeSBsb25nIHByZXNzaW5nLCBkb24ndCByZXN0YXJ0IHRoZSB0aW1lclxuICAgICAgICBndWFyZCAhaXNMb25nUHJlc3NpbmcgZWxzZSB7IHJldHVybiB9XG5cbiAgICAgICAgLy8gSW5pdGlhbCBoYXB0aWMgZmVlZGJhY2sgdG8gaW5kaWNhdGUgdGhlIGhvbGQgaGFzIHN0YXJ0ZWRcbiAgICAgICAgSGFwdGljRmVlZGJhY2subGlnaHRJbXBhY3QoKVxuXG4gICAgICAgIC8vIFJlc2V0IGFueSBleGlzdGluZyB0aW1lclxuICAgICAgICBsb25nUHJlc3NUaW1lcj8uaW52YWxpZGF0ZSgpXG4gICAgICAgIGxvbmdQcmVzc1RpbWVyID0gbmlsXG5cbiAgICAgICAgLy8gU3RhcnQgZnJlc2hcbiAgICAgICAgaXNMb25nUHJlc3NpbmcgPSB0cnVlXG4gICAgICAgIGxvbmdQcmVzc1Byb2dyZXNzID0gMC4wXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgdGltZXIgdGhhdCB1cGRhdGVzIHRoZSBwcm9ncmVzcyBldmVyeSAwLjA1IHNlY29uZHMgKHNtb290aGVyIHVwZGF0ZXMpXG4gICAgICAgIGxvbmdQcmVzc1RpbWVyID0gVGltZXIuc2NoZWR1bGVkVGltZXIod2l0aFRpbWVJbnRlcnZhbDogMC4wNSwgcmVwZWF0czogdHJ1ZSkgeyBbd2VhayBzZWxmXSBfIGluXG4gICAgICAgICAgICBndWFyZCBsZXQgc2VsZiA9IHNlbGYgZWxzZSB7IHJldHVybiB9XG5cbiAgICAgICAgICAgIGlmIHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgPCAxLjAge1xuICAgICAgICAgICAgICAgIHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgKz0gMC4wMTY3IC8vIEluY3JlYXNlIGJ5IH4xLjY3JSBlYWNoIHRpbWUgKHJlYWNoZXMgMTAwJSBpbiAzIHNlY29uZHMpXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgaGFwdGljIGZlZWRiYWNrIGF0IDMwJSwgNjAlLCA5MCUgcHJvZ3Jlc3MgcG9pbnRzXG4gICAgICAgICAgICAgICAgaWYgSW50KHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgKiAxMDApID09IDMwIHx8XG4gICAgICAgICAgICAgICAgICAgIEludChzZWxmLmxvbmcuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFKWjlHSHVpcVBCOVlQcUt1MXhGamNYIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0ODozNC42ODFaIiwicmVzcG9uc2VfdGV4dCI6IkJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBnYXRoZXJlZCwgSSdsbCBub3cgY3JlYXRlIGEgZGV0YWlsZWQgcGxhbiBmb3IgbWlncmF0aW5nIHRoZSBQaG9uZU51bWJlckNoYW5nZVZpZXcgYW5kIFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsIGludG8gdGhlIFByb2ZpbGVWaWV3IGFuZCBQcm9maWxlVmlld01vZGVsIGZpbGVzLlxuXG4jIyBEZXRhaWxlZCBNaWdyYXRpb24gUGxhblxuXG4xLiAqKlVwZGF0ZSBQcm9maWxlVmlld01vZGVsLnN3aWZ0Kio6XG4gICAtIEFkZCB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXMgZnJvbSBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbFxuICAgLSBBZGQgdGhlIHBob25lIG51bWJlciBmb3JtYXR0aW5nIG1ldGhvZHNcbiAgIC0gQWRkIHRoZSB2ZXJpZmljYXRpb24gY29kZSBoYW5kbGluZyBtZXRob2RzXG5cbjIuICoqVXBkYXRlIFByb2ZpbGVWaWV3LnN3aWZ0Kio6XG4gICAtIEFkZCB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3IGFzIGNvbXB1dGVkIHByb3BlcnRpZXNcbiAgIC0gTWlncmF0ZSB0aGUgVUkgY29tcG9uZW50cyBmcm9tIFBob25lTnVtYmVyQ2hhbmdlVmlld1xuICAgLSBFbnN1cmUgcHJvcGVyIGludGVncmF0aW9uIHdpdGggdGhlIGV4aXN0aW5nIFByb2ZpbGVWaWV3TW9kZWxcblxuTGV0J3Mgc3RhcnQgd2l0aCB0aGUgaW1wbGVtZW50YXRpb246XG5cbiMjIyBTdGVwIDE6IFVwZGF0ZSBQcm9maWxlVmlld01vZGVsLnN3aWZ0XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNGIyOTRhNTMtNWE4Zi00ZWYyLWJhZTAtYzQyZmQ1MWM2MDhjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNGtUWjZlRGJwbXp4RnYyRDg3NU5ZeSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwiQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXdNb2RlbC5zd2lmdFwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCJpbXBvcnQgRm91bmRhdGlvblxcbmltcG9ydCBTd2lmdFVJXFxuaW1wb3J0IENvbWJpbmVcXG5pbXBvcnQgVXNlck5vdGlmaWNhdGlvbnNcXG5pbXBvcnQgVUlLaXRcIiwgXCJuZXdfc3RyXCI6IFwiaW1wb3J0IEZvdW5kYXRpb25cXG5pbXBvcnQgU3dpZnRVSVxcbmltcG9ydCBDb21iaW5lXFxuaW1wb3J0IFVzZXJOb3RpZmljYXRpb25zXFxuaW1wb3J0IFVJS2l0XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDV9LCB7XCJvbGRfc3RyXCI6IFwiICAgIC8vIFNoZWV0IFByZXNlbnRhdGlvbiBTdGF0ZXNcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXREZXNjcmlwdGlvblNoZWV0OiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxcbiAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdEF2YXRhclNoZWV0OiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0ltYWdlUGlja2VyOiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIHNob3dQaG9uZU51bWJlckNoYW5nZVZpZXc6IEJvb2wgPSBmYWxzZVxcbiAgICBAUHVibGlzaGVkIHZhciBzaG93U2lnbk91dENvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcXG5cXG4gICAgLy8gRWRpdGluZyBTdGF0ZXNcXG4gICAgQFB1Ymxpc2hlZCB2YXIgbmV3RGVzY3JpcHRpb246IFN0cmluZyA9IFxcXCJcXFwiXFxuICAgIEBQdWJsaXNoZWQgdmFyIG5ld05hbWU6IFN0cmluZyA9IFxcXCJcXFwiXFxuICAgIEBQdWJsaXNoZWQgdmFyIGltYWdlUGlja2VyU291cmNlVHlwZTogVUlJbWFnZVBpY2tlckNvbnRyb2xsZXIuU291cmNlVHlwZSA9IC5waG90b0xpYnJhcnlcIiwgXCJuZXdfc3RyXCI6IFwiICAgIC8vIFNoZWV0IFByZXNlbnRhdGlvbiBTdGF0ZXNcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXREZXNjcmlwdGlvblNoZWV0OiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxcbiAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdEF2YXRhclNoZWV0OiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0ltYWdlUGlja2VyOiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIHNob3dQaG9uZU51bWJlckNoYW5nZVZpZXc6IEJvb2wgPSBmYWxzZVxcbiAgICBAUHVibGlzaGVkIHZhciBzaG93U2lnbk91dENvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcXG4gICAgXFxuICAgIC8vIFBob25lIE51bWJlciBDaGFuZ2UgUHJvcGVydGllc1xcbiAgICBAUHVibGlzaGVkIHZhciBlZGl0aW5nUGhvbmU6IFN0cmluZyA9IFxcXCJcXFwiXFxuICAgIEBQdWJsaXNoZWQgdmFyIGVkaXRpbmdQaG9uZVJlZ2lvbjogU3RyaW5nID0gXFxcIlVTXFxcIlxcbiAgICBAUHVibGlzaGVkIHZhciBpc0NvZGVTZW50OiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgdmVyaWZpY2F0aW9uQ29kZTogU3RyaW5nID0gXFxcIlxcXCJcXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIHBob25lRXJyb3JNZXNzYWdlOiBTdHJpbmc/ID0gbmlsXFxuICAgIFxcbiAgICAvLyBFZGl0aW5nIFN0YXRlc1xcbiAgICBAUHVibGlzaGVkIHZhciBuZXdEZXNjcmlwdGlvbjogU3RyaW5nID0gXFxcIlxcXCJcXG4gICAgQFB1Ymxpc2hlZCB2YXIgbmV3TmFtZTogU3RyaW5nID0gXFxcIlxcXCJcXG4gICAgQFB1Ymxpc2hlZCB2YXIgaW1hZ2VQaWNrZXJTb3VyY2VUeXBlOiBVSUltYWdlUGlja2VyQ29udHJvbGxlci5Tb3VyY2VUeXBlID0gLnBob3RvTGlicmFyeVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMzN9LCB7XCJvbGRfc3RyXCI6IFwiICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNOYW1lRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNEZXNjcmlwdGlvbkZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXCIsIFwibmV3X3N0clwiOiBcIiAgICAvLyBGb2N1cyBTdGF0ZXMgKGZvciBTd2lmdFVJIEBGb2N1c1N0YXRlIGJpbmRpbmcpXFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzTmFtZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMzcsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMzl9LCB7XCJvbGRfc3RyXCI6IFwiICAgIC8vLyBXaGV0aGVyIHRoZSB1c2VyIGlzIHVzaW5nIHRoZSBkZWZhdWx0IGF2YXRhclxcbiAgICB2YXIgaXNVc2luZ0RlZmF1bHRBdmF0YXI6IEJvb2wge1xcbiAgICAgICAgcmV0dXJuIGF2YXRhckltYWdlID09IG5pbFxcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcXG4gICAgdmFyIGlzVXNpbmdEZWZhdWx0QXZhdGFyOiBCb29sIHtcXG4gICAgICAgIHJldHVybiBhdmF0YXJJbWFnZSA9PSBuaWxcXG4gICAgfVxcbiAgICBcXG4gICAgLy8vIEF2YWlsYWJsZSBwaG9uZSByZWdpb25zXFxuICAgIGxldCByZWdpb25zID0gW1xcbiAgICAgICAgKFxcXCJVU1xcXCIsIFxcXCIrMVxcXCIpLFxcbiAgICAgICAgKFxcXCJDQVxcXCIsIFxcXCIrMVxcXCIpLFxcbiAgICAgICAgKFxcXCJVS1xcXCIsIFxcXCIrNDRcXFwiKSxcXG4gICAgICAgIChcXFwiQVVcXFwiLCBcXFwiKzYxXFxcIilcXG4gICAgXVxcbiAgICBcXG4gICAgLy8vIENvbXB1dGVkIHByb3BlcnR5IHRvIGNoZWNrIGlmIHRoZSBwaG9uZSBudW1iZXIgaXMgdmFsaWRcXG4gICAgdmFyIGlzUGhvbmVOdW1iZXJWYWxpZDogQm9vbCB7XFxuICAgICAgICAvLyBNYXRjaCBsb2dpbiBzY3JlZW4gdmFsaWRhdGlvblxcbiAgICAgICAgLy8gQWxsb3cgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJzXFxuICAgICAgICBpZiBlZGl0aW5nUGhvbmUgPT0gXFxcIjEyMzQ1Njc4OTBcXFwiIHx8IGVkaXRpbmdQaG9uZSA9PSBcXFwiMDAwMDAwMDAwMFxcXCIgfHwgZWRpdGluZ1Bob25lID09IFxcXCIrMTEyMzQ1Njc4OTBcXFwiIHtcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBTaW1wbGUgdmFsaWRhdGlvbjogYXQgbGVhc3QgMTAgZGlnaXRzXFxuICAgICAgICByZXR1cm4gZWRpdGluZ1Bob25lLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPj0gMTBcXG4gICAgfVxcbiAgICBcXG4gICAgLy8vIENvbXB1dGVkIHByb3BlcnR5IHRvIGNoZWNrIGlmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyB2YWxpZFxcbiAgICB2YXIgaXNWZXJpZmljYXRpb25Db2RlVmFsaWQ6IEJvb2wge1xcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBub24tZGlnaXQgY2hhcmFjdGVycyBhbmQgY2hlY2sgaWYgd2UgaGF2ZSA2IGRpZ2l0c1xcbiAgICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvbkNvZGUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfS5jb3VudCA9PSA2XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBHZXQgdGhlIHBob25lIG51bWJlciBwbGFjZWhvbGRlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXFxuICAgIHZhciBwaG9uZU51bWJlclBsYWNlaG9sZGVyOiBTdHJpbmcge1xcbiAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XFxuICAgICAgICBjYXNlIFxcXCJVU1xcXCIsIFxcXCJDQVxcXCI6XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJYWFgtWFhYLVhYWFhcXFwiIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYVxcbiAgICAgICAgY2FzZSBcXFwiVUtcXFwiOlxcbiAgICAgICAgICAgIHJldHVybiBcXFwiWFhYWC1YWFgtWFhYXFxcIiAvLyBGb3JtYXQgZm9yIFVLXFxuICAgICAgICBjYXNlIFxcXCJBVVxcXCI6XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJYWFhYLVhYWC1YWFhcXFwiIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhXFxuICAgICAgICBkZWZhdWx0OlxcbiAgICAgICAgICAgIHJldHVybiBcXFwiWFhYLVhYWC1YWFhYXFxcIiAvLyBEZWZhdWx0IGZvcm1hdFxcbiAgICAgICAgfVxcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA0MiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA0Nn0sIHtcIm9sZF9zdHJcIjogXCIgICAgLy8vIFNob3cgdGhlIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xcbiAgICBmdW5jIHNob3dQaG9uZU51bWJlckNoYW5nZSgpIHtcXG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxcbiAgICAgICAgc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IHRydWVcXG4gICAgfVxcblxcbiAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciBjaGFuZ2VcXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcXG4gICAgLy8vICAgLSBuZXdQaG9uZTogVGhlIG5ldyBwaG9uZSBudW1iZXJcXG4gICAgLy8vICAgLSByZWdpb246IFRoZSBwaG9uZSByZWdpb25cXG4gICAgZnVuYyBoYW5kbGVQaG9uZU51bWJlckNoYW5nZWQobmV3UGhvbmU6IFN0cmluZywgcmVnaW9uOiBTdHJpbmcpIHtcXG4gICAgICAgIHNlbGYucGhvbmUgPSBuZXdQaG9uZVxcbiAgICAgICAgc2F2ZVBob25lKClcXG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAvLy8gU2hvdyB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3XFxuICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xcbiAgICAgICAgLy8gUmVzZXQgcGhvbmUgbnVtYmVyIGNoYW5nZSBzdGF0ZVxcbiAgICAgICAgZWRpdGluZ1Bob25lID0gXFxcIlxcXCJcXG4gICAgICAgIGVkaXRpbmdQaG9uZVJlZ2lvbiA9IFxcXCJVU1xcXCJcXG4gICAgICAgIGlzQ29kZVNlbnQgPSBmYWxzZVxcbiAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSA9IFxcXCJcXFwiXFxuICAgICAgICBwaG9uZUVycm9yTWVzc2FnZSA9IG5pbFxcbiAgICAgICAgXFxuICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcXG4gICAgICAgIHNob3dQaG9uZU51bWJlckNoYW5nZVZpZXcgPSB0cnVlXFxuICAgICAgICBcXG4gICAgICAgIC8vIEZvY3VzIHRoZSBwaG9uZSBudW1iZXIgZmllbGQgd2hlbiB0aGUgdmlldyBhcHBlYXJzXFxuICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC4xKSB7XFxuICAgICAgICAgICAgc2VsZi5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkID0gdHJ1ZVxcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICAvLy8gQ2FuY2VsIHBob25lIG51bWJlciBjaGFuZ2VcXG4gICAgZnVuYyBjYW5jZWxQaG9uZU51bWJlckNoYW5nZSgpIHtcXG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxcbiAgICAgICAgc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IGZhbHNlXFxuICAgICAgICBpc0NvZGVTZW50ID0gZmFsc2VcXG4gICAgfVxcbiAgICBcXG4gICAgLy8vIFNlbmQgdmVyaWZpY2F0aW9uIGNvZGUgZm9yIHBob25lIG51bWJlciBjaGFuZ2VcXG4gICAgZnVuYyBzZW5kUGhvbmVDaGFuZ2VWZXJpZmljYXRpb25Db2RlKCkge1xcbiAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgdGhpcyB3b3VsZCBzZW5kIGEgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdGhlIHBob25lIG51bWJlclxcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxcbiAgICAgICAgXFxuICAgICAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5XFxuICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMS41KSB7IFt3ZWFrIHNlbGZdIGluXFxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxcbiAgICAgICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2VcXG4gICAgICAgICAgICBzZWxmLmlzQ29kZVNlbnQgPSB0cnVlXFxuICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gRm9jdXMgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGZpZWxkXFxuICAgICAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDAuNSkge1xcbiAgICAgICAgICAgICAgICBzZWxmLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IHRydWVcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBWZXJpZnkgdGhlIHBob25lIG51bWJlciBjaGFuZ2VcXG4gICAgZnVuYyB2ZXJpZnlQaG9uZUNoYW5nZSgpIHtcXG4gICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdmVyaWZ5IHRoZSBjb2RlIHdpdGggdGhlIHNlcnZlclxcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxcbiAgICAgICAgXFxuICAgICAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5XFxuICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMS41KSB7IFt3ZWFrIHNlbGZdIGluXFxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxcbiAgICAgICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2VcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxcbiAgICAgICAgICAgIGlmICFzZWxmLmVkaXRpbmdQaG9uZS5pc0VtcHR5ICYmIHNlbGYudmVyaWZpY2F0aW9uQ29kZS5jb3VudCA+PSA0IHtcXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFBob25lID0gUGhvbmVGb3JtYXR0ZXIuZm9ybWF0UGhvbmVOdW1iZXIoc2VsZi5lZGl0aW5nUGhvbmUsIHJlZ2lvbjogc2VsZi5lZGl0aW5nUGhvbmVSZWdpb24pXFxuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBmb3JtYXR0ZWRQaG9uZSwgcmVnaW9uOiBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3ID0gZmFsc2VcXG4gICAgICAgICAgICAgICAgc2VsZi5pc0NvZGVTZW50ID0gZmFsc2VcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIHRleHQgY2hhbmdlXFxuICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UobmV3VmFsdWU6IFN0cmluZykge1xcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXFxuICAgICAgICBpZiBuZXdWYWx1ZSA9PSBcXFwiKzExMjM0NTY3ODkwXFxcIiB8fCBuZXdWYWx1ZSA9PSBcXFwiMTIzNDU2Nzg5MFxcXCIgfHwgbmV3VmFsdWUgPT0gXFxcIjAwMDAwMDAwMDBcXFwiIHtcXG4gICAgICAgICAgICAvLyBBbGxvdyB0aGUgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXIgYXMgaXNcXG4gICAgICAgICAgICByZXR1cm5cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxcbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxcbiAgICAgICAgXFxuICAgICAgICBzd2l0Y2ggZWRpdGluZ1Bob25lUmVnaW9uIHtcXG4gICAgICAgIGNhc2UgXFxcIlVTXFxcIiwgXFxcIkNBXFxcIjpcXG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXFxuICAgICAgICBjYXNlIFxcXCJVS1xcXCI6XFxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXFxuICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcXG4gICAgICAgIGNhc2UgXFxcIkFVXFxcIjpcXG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXFxuICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcXG4gICAgICAgIGRlZmF1bHQ6XFxuICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBIYW5kbGUgdmVyaWZpY2F0aW9uIGNvZGUgdGV4dCBjaGFuZ2VcXG4gICAgZnVuYyBoYW5kbGVWZXJpZmljYXRpb25Db2RlQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcXG4gICAgICAgIC8vIEZvcm1hdCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgYXMgWFhYLVhYWFxcbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBMaW1pdCB0byA2IGRpZ2l0c1xcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoNikpXFxuICAgICAgICBcXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlblxcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XFxuICAgICAgICAgICAgbGV0IGZpcnN0UGFydCA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcXG4gICAgICAgICAgICBsZXQgc2Vjb25kUGFydCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMylcXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gXFxcIlxcXFwoZmlyc3RQYXJ0KS1cXFxcKHNlY29uZFBhcnQpXFxcIlxcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZCAhPSB2ZXJpZmljYXRpb25Db2RlIHtcXG4gICAgICAgICAgICAvLyBKdXN0IHVzZSB0aGUgZmlsdGVyZWQgZGlnaXRzIGlmIDMgb3IgZmV3ZXJcXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gbGltaXRlZEZpbHRlcmVkXFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBIYW5kbGUgcmVnaW9uIHNlbGVjdGlvbiBjaGFuZ2VcXG4gICAgZnVuYyBoYW5kbGVSZWdpb25DaGFuZ2UoKSB7XFxuICAgICAgICBIYXB0aWNGZWVkYmFjay5zZWxlY3Rpb25GZWVkYmFjaygpXFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIGNoYW5nZVxcbiAgICAvLy8gLSBQYXJhbWV0ZXJzOlxcbiAgICAvLy8gICAtIG5ld1Bob25lOiBUaGUgbmV3IHBob25lIG51bWJlclxcbiAgICAvLy8gICAtIHJlZ2lvbjogVGhlIHBob25lIHJlZ2lvblxcbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlZChuZXdQaG9uZTogU3RyaW5nLCByZWdpb246IFN0cmluZykge1xcbiAgICAgICAgc2VsZi5waG9uZSA9IG5ld1Bob25lXFxuICAgICAgICBzYXZlUGhvbmUoKVxcbiAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDE1MywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxNjd9LCB7XCJvbGRfc3RyXCI6IFwiICAgIC8vLyBSZW1vdmUgdGhlIGF2YXRhciBpbWFnZSBmcm9tIFVzZXJEZWZhdWx0c1xcbiAgICBwcml2YXRlIGZ1bmMgcmVtb3ZlQXZhdGFySW1hZ2UoKSB7XFxuICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQucmVtb3ZlT2JqZWN0KGZvcktleTogXFxcInVzZXJBdmF0YXJJbWFnZVxcXCIpXFxuICAgIH1cXG59XCIsIFwibmV3X3N0clwiOiBcIiAgICAvLy8gUmVtb3ZlIHRoZSBhdmF0YXIgaW1hZ2UgZnJvbSBVc2VyRGVmYXVsdHNcXG4gICAgcHJpdmF0ZSBmdW5jIHJlbW92ZUF2YXRhckltYWdlKCkge1xcbiAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFxcXCJ1c2VyQXZhdGFySW1hZ2VcXFwiKVxcbiAgICB9XFxuICAgIFxcbiAgICAvLy8gRm9ybWF0IGEgVVMvQ2FuYWRhIHBob25lIG51bWJlciAoWFhYLVhYWC1YWFhYKVxcbiAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VVNQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcXG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxcbiAgICAgICAgXFxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXFxuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA2IHtcXG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXFxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMykucHJlZml4KDMpXFxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDYpXFxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXFxcIlxcXFwoYXJlYUNvZGUpLVxcXFwocHJlZml4KS1cXFxcKGxpbmVOdW1iZXIpXFxcIlxcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFxcXCJcXFxcKGFyZWFDb2RlKS1cXFxcKHByZWZpeClcXFwiXFxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XFxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFxcXCJcXFwiXFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8vLyBGb3JtYXQgYSBVSyBwaG9uZSBudW1iZXIgKFhYWFgtWFhYLVhYWClcXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdFVLUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XFxuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcXG4gICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcXG4gICAgICAgIFxcbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XFxuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFxcXCJcXFxcKGFyZWFDb2RlKS1cXFxcKHByZWZpeCktXFxcXChsaW5lTnVtYmVyKVxcXCJcXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcXG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXFxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNClcXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcXFwiXFxcXChhcmVhQ29kZSktXFxcXChwcmVmaXgpXFxcIlxcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcXFwiXFxcIlxcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyIChYWFhYLVhYWC1YWFgpXFxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xcbiAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXFxuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXFxuICAgICAgICBcXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDcge1xcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNylcXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcXFwiXFxcXChhcmVhQ29kZSktXFxcXChwcmVmaXgpLVxcXFwobGluZU51bWJlcilcXFwiXFxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XFxuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpXFxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXFxcIlxcXFwoYXJlYUNvZGUpLVxcXFwocHJlZml4KVxcXCJcXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXFxcIlxcXCJcXG4gICAgICAgIH1cXG4gICAgfVxcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI1MSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyNTV9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSdsbCB1cGRhdGUgdGhlIFByb2ZpbGVWaWV3TW9kZWwuc3dpZnQgZmlsZSB0byBpbmNsdWRlIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZ1bmN0aW9uYWxpdHk6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQ6XG4gICAgIDFcdGltcG9ydCBGb3VuZGF0aW9uXG4gICAgIDJcdGltcG9ydCBTd2lmdFVJXG4gICAgIDNcdGltcG9ydCBDb21iaW5lXG4gICAgIDRcdGltcG9ydCBVc2VyTm90aWZpY2F0aW9uc1xuICAgICA1XHRpbXBvcnQgVUlLaXRcbiAgICAgNlx0XG4gICAgIDdcdC8vLyBWaWV3IG1vZGVsIGZvciB0aGUgcHJvZmlsZSBzY3JlZW5cbiAgICAgOFx0Y2xhc3MgUHJvZmlsZVZpZXdNb2RlbDogT2JzZXJ2YWJsZU9iamVjdCB7XG4gICAgIDlcdCAgICAvLyBNQVJLOiAtIFB1Ymxpc2hlZCBQcm9wZXJ0aWVzXG4gICAgMTBcdFxuICAgIDExXHQgICAgLy8gVXNlciBQcm9maWxlIFByb3BlcnRpZXNcbiAgICAxMlx0ICAgIEBQdWJsaXNoZWQgdmFyIG5hbWU6IFN0cmluZyA9IFwiU2FyYWggSm9obnNvblwiXG4gICAgMTNcdCAgICBAUHVibGlzaGVkIHZhciBwaG9uZTogU3RyaW5nID0gXCIrMSAoNTU1KSA5ODctNjU0M1wiXG4gICAgMTRcdCAgICBAUHVibGlzaGVkIHZhciBwcm9maWxlRGVzY3JpcHRpb246IFN0cmluZyA9IFwiSSBoYXZlIHR5cGUgMSBkaWFiZXRlcy4gTXkgaW5zdWxpbiBhbmQgc3VwcGxpZXMgYXJlIGluIHRoZSByZWZyaWdlcmF0b3IuIEVtZXJnZW5jeSBjb250YWN0czogTW9tICg1NTUtMTExLTIyMjIpLCBSb29tbWF0ZSBKZW4gKDU1NS0zMzMtNDQ0NCkuIEFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uIE15IGRvY3RvciBpcyBEci4gTWFydGluZXogYXQgQ2l0eSBNZWRpY2FsIENlbnRlciAoNTU1LTc3Ny04ODg4KS5cIlxuICAgIDE1XHRcbiAgICAxNlx0ICAgIC8vIEF2YXRhciBQcm9wZXJ0aWVzXG4gICAgMTdcdCAgICBAUHVibGlzaGVkIHZhciBhdmF0YXJJbWFnZTogVUlJbWFnZT8gPSBuaWxcbiAgICAxOFx0XG4gICAgMTlcdCAgICAvLyBTaGVldCBQcmVzZW50YXRpb24gU3RhdGVzXG4gICAgMjBcdCAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdERlc2NyaXB0aW9uU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIxXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIyXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXRBdmF0YXJTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgMjNcdCAgICBAUHVibGlzaGVkIHZhciBzaG93SW1hZ2VQaWNrZXI6IEJvb2wgPSBmYWxzZVxuICAgIDI0XHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXG4gICAgMjVcdCAgICBAUHVibGlzaGVkIHZhciBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBCb29sID0gZmFsc2VcbiAgICAyNlx0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dTaWduT3V0Q29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyN1x0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyOFx0XG4gICAgMjlcdCAgICAvLyBFZGl0aW5nIFN0YXRlc1xuICAgIDMwXHQgICAgQFB1Ymxpc2hlZCB2YXIgbmV3RGVzY3JpcHRpb246IFN0cmluZyA9IFwiXCJcbiAgICAzMVx0ICAgIEBQdWJsaXNoZWQgdmFyIG5ld05hbWU6IFN0cmluZyA9IFwiXCJcbiAgICAzMlx0ICAgIEBQdWJsaXNoZWQgdmFyIGltYWdlUGlja2VyU291cmNlVHlwZTogVUlJbWFnZVBpY2tlckNvbnRyb2xsZXIuU291cmNlVHlwZSA9IC5waG90b0xpYnJhcnlcbiAgICAzM1x0XG4gICAgMzRcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgMzVcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDM2XHRcbiAgICAzN1x0ICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcbiAgICAzOFx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzTmFtZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgMzlcdCAgICBAUHVibGlzaGVkIHZhciBpc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcbiAgICA0MFx0XG4gICAgNDFcdCAgICAvLyBNQVJLOiAtIENvbXB1dGVkIFByb3BlcnRpZXNcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcbiAgICA0NFx0ICAgIHZhciBpc1VzaW5nRGVmYXVsdEF2YXRhcjogQm9vbCB7XG4gICAgNDVcdCAgICAgICAgcmV0dXJuIGF2YXRhckltYWdlID09IG5pbFxuICAgIDQ2XHQgICAgfVxuICAgIDQ3XHRcbiAgICA0OFx0ICAgIC8vIE1BUks6IC0gSW5pdGlhbGl6YXRpb25cbiAgICA0OVx0XG4gICAgNTBcdCAgICBpbml0KCkge1xuICAgIDUxXHQgICAgICAgIC8vIExvYWQgcGVyc2lzdGVkIGRhdGEgZnJvbSBVc2VyRGVmYXVsdHNcbiAgICA1Mlx0ICAgICAgICBsb2FkUGVyc2lzdGVkRGF0YSgpXG4gICAgNTNcdCAgICB9XG4gICAgNTRcdFxuICAgIDU1XHQgICAgLy8gTUFSSzogLSBNZXRob2RzXG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8vIFByZXBhcmUgdG8gZWRpdCB0aGUgZGVzY3JpcHRpb25cbiAgICA1OFx0ICAgIGZ1bmMgcHJlcGFyZUVkaXREZXNjcmlwdGlvbigpIHtcbiAgICA1OVx0ICAgICAgICBuZXdEZXNjcmlwdGlvbiA9IHByb2ZpbGVEZXNjcmlwdGlvblxuICAgIDYwXHQgICAgICAgIHNob3dFZGl0RGVzY3JpcHRpb25TaGVldCA9IHRydWVcbiAgICA2MVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICA2Mlx0XG4gICAgNjNcdCAgICAgICAgLy8gRm9jdXMgdGhlIHRleHQgZWRpdG9yIHdoZW4gdGhlIHNoZWV0IGFwcGVhcnNcbiAgICA2NFx0ICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC4xKSB7XG4gICAgNjVcdCAgICAgICAgICAgIHNlbGYuaXNEZXNjcmlwdGlvbkZpZWxkRm9jdXNlZCA9IHRydWVcbiAgICA2Nlx0ICAgICAgICB9XG4gICAgNjdcdCAgICB9XG4gICAgNjhcdFxuICAgIDY5XHQgICAgLy8vIFNhdmUgdGhlIGVkaXRlZCBkZXNjcmlwdGlvblxuICAgIDcwXHQgICAgZnVuYyBzYXZlRWRpdGVkRGVzY3JpcHRpb24oKSB7XG4gICAgNzFcdCAgICAgICAgaWYgbmV3RGVzY3JpcHRpb24gIT0gcHJvZmlsZURlc2NyaXB0aW9uICYmXG4gICAgNzJcdCAgICAgICAgICAgIW5ld0Rlc2NyaXB0aW9uLnRyaW1taW5nQ2hhcmFjdGVycyhpbjogLndoaXRlc3BhY2VzQW5kTmV3bGluZXMpLmlzRW1wdHkge1xuICAgIDczXHQgICAgICAgICAgICBwcm9maWxlRGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvblxuICAgIDc0XHQgICAgICAgICAgICBzYXZlUHJvZmlsZURlc2NyaXB0aW9uKClcbiAgICA3NVx0ICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAgNzZcdCAgICAgICAgfVxuICAgIDc3XHQgICAgfVxuICAgIDc4XHRcbiAgICA3OVx0ICAgIC8vLyBDYW5jZWwgZWRpdGluZyBkZXNjcmlwdGlvblxuICAgIDgwXHQgICAgZnVuYyBjYW5jZWxFZGl0RGVzY3JpcHRpb24oKSB7XG4gICAgODFcdCAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgODJcdCAgICAgICAgc2hvd0VkaXREZXNjcmlwdGlvblNoZWV0ID0gZmFsc2VcbiAgICA4M1x0ICAgIH1cbiAgICA4NFx0XG4gICAgODVcdCAgICAvLy8gUHJlcGFyZSB0byBlZGl0IHRoZSBuYW1lXG4gICAgODZcdCAgICBmdW5jIHByZXBhcmVFZGl0TmFtZSgpIHtcbiAgICA4N1x0ICAgICAgICBuZXdOYW1lID0gbmFtZVxuICAgIDg4XHQgICAgICAgIHNob3dFZGl0TmFtZVNoZWV0ID0gdHJ1ZVxuICAgIDg5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgIDkwXHRcbiAgICA5MVx0ICAgICAgICAvLyBGb2N1cyB0aGUgbmFtZSBmaWVsZCB3aGVuIHRoZSBzaGVldCBhcHBlYXJzXG4gICAgOTJcdCAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDAuMSkge1xuICAgIDkzXHQgICAgICAgICAgICBzZWxmLmlzTmFtZUZpZWxkRm9jdXNlZCA9IHRydWVcbiAgICA5NFx0ICAgICAgICB9XG4gICAgOTVcdCAgICB9XG4gICAgOTZcdFxuICAgIDk3XHQgICAgLy8vIFNhdmUgdGhlIGVkaXRlZCBuYW1lXG4gICAgOThcdCAgICBmdW5jIHNhdmVFZGl0ZWROYW1lKCkge1xuICAgIDk5XHQgICAgICAgIGlmIG5ld05hbWUgIT0gbmFtZSAmJlxuICAgMTAwXHQgICAgICAgICAgICFuZXdOYW1lLnRyaW1taW5nQ2hhcmFjdGVycyhpbjogLndoaXRlc3BhY2VzQW5kTmV3bGluZXMpLmlzRW1wdHkge1xuICAgMTAxXHQgICAgICAgICAgICBuYW1lID0gbmV3TmFtZVxuICAgMTAyXHQgICAgICAgICAgICBzYXZlTmFtZSgpXG4gICAxMDNcdCAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuICAgMTA0XHQgICAgICAgIH1cbiAgIDEwNVx0ICAgIH1cbiAgIDEwNlx0XG4gICAxMDdcdCAgICAvLy8gQ2FuY2VsIGVkaXRpbmcgbmFtZVxuICAgMTA4XHQgICAgZnVuYyBjYW5jZWxFZGl0TmFtZSgpIHtcbiAgIDEwOVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDExMFx0ICAgICAgICBzaG93RWRpdE5hbWVTaGVldCA9IGZhbHNlXG4gICAxMTFcdCAgICB9XG4gICAxMTJcdFxuICAgMTEzXHQgICAgLy8vIFNob3cgdGhlIGF2YXRhciBlZGl0IHNoZWV0XG4gICAxMTRcdCAgICBmdW5jIHNob3dBdmF0YXJFZGl0b3IoKSB7XG4gICAxMTVcdCAgICAgICAgc2hvd0VkaXRBdmF0YXJTaGVldCA9IHRydWVcbiAgIDExNlx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDExN1x0ICAgIH1cbiAgIDExOFx0XG4gICAxMTlcdCAgICAvLy8gQ2xvc2UgdGhlIGF2YXRhciBlZGl0IHNoZWV0XG4gICAxMjBcdCAgICBmdW5jIGNsb3NlQXZhdGFyRWRpdG9yKCkge1xuICAgMTIxXHQgICAgICAgIHNob3dFZGl0QXZhdGFyU2hlZXQgPSBmYWxzZVxuICAgMTIyXHQgICAgfVxuICAgMTIzXHRcbiAgIDEyNFx0ICAgIC8vLyBTaG93IGltYWdlIHBpY2tlciB3aXRoIHNwZWNpZmllZCBzb3VyY2UgdHlwZVxuICAgMTI1XHQgICAgZnVuYyBzaG93SW1hZ2VQaWNrZXJXaXRoU291cmNlVHlwZShfIHNvdXJjZVR5cGU6IFVJSW1hZ2VQaWNrZXJDb250cm9sbGVyLlNvdXJjZVR5cGUpIHtcbiAgIDEyNlx0ICAgICAgICBpbWFnZVBpY2tlclNvdXJjZVR5cGUgPSBzb3VyY2VUeXBlXG4gICAxMjdcdCAgICAgICAgc2hvd0ltYWdlUGlja2VyID0gdHJ1ZVxuICAgMTI4XHQgICAgICAgIHNob3dFZGl0QXZhdGFyU2hlZXQgPSBmYWxzZVxuICAgMTI5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTMwXHQgICAgfVxuICAgMTMxXHRcbiAgIDEzMlx0ICAgIC8vLyBTZXQgdGhlIHVzZXIncyBhdmF0YXIgaW1hZ2VcbiAgIDEzM1x0ICAgIC8vLyAtIFBhcmFtZXRlciBpbWFnZTogVGhlIG5ldyBhdmF0YXIgaW1hZ2VcbiAgIDEzNFx0ICAgIGZ1bmMgc2V0QXZhdGFySW1hZ2UoXyBpbWFnZTogVUlJbWFnZSkge1xuICAgMTM1XHQgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBpbWFnZVxuICAgMTM2XHQgICAgICAgIHNhdmVBdmF0YXJJbWFnZShpbWFnZSlcbiAgIDEzN1x0ICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDEzOFx0ICAgIH1cbiAgIDEzOVx0XG4gICAxNDBcdCAgICAvLy8gRGVsZXRlIHRoZSB1c2VyJ3MgYXZhdGFyIGltYWdlXG4gICAxNDFcdCAgICBmdW5jIGRlbGV0ZUF2YXRhckltYWdlKCkge1xuICAgMTQyXHQgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBuaWxcbiAgIDE0M1x0ICAgICAgICByZW1vdmVBdmF0YXJJbWFnZSgpXG4gICAxNDRcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxNDVcdCAgICB9XG4gICAxNDZcdFxuICAgMTQ3XHQgICAgLy8vIFNob3cgZGVsZXRlIGF2YXRhciBjb25maXJtYXRpb25cbiAgIDE0OFx0ICAgIGZ1bmMgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbkRpYWxvZygpIHtcbiAgIDE0OVx0ICAgICAgICBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTUwXHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTUxXHQgICAgfVxuICAgMTUyXHRcbiAgIDE1M1x0ICAgIC8vLyBTaG93IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgIDE1NFx0ICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgMTU1XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTU2XHQgICAgICAgIHNob3dQaG9uZU51bWJlckNoYW5nZVZpZXcgPSB0cnVlXG4gICAxNTdcdCAgICB9XG4gICAxNThcdFxuICAgMTU5XHQgICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAxNjBcdCAgICAvLy8gLSBQYXJhbWV0ZXJzOlxuICAgMTYxXHQgICAgLy8vICAgLSBuZXdQaG9uZTogVGhlIG5ldyBwaG9uZSBudW1iZXJcbiAgIDE2Mlx0ICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcGhvbmUgcmVnaW9uXG4gICAxNjNcdCAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlZChuZXdQaG9uZTogU3RyaW5nLCByZWdpb246IFN0cmluZykge1xuICAgMTY0XHQgICAgICAgIHNlbGYucGhvbmUgPSBuZXdQaG9uZVxuICAgMTY1XHQgICAgICAgIHNhdmVQaG9uZSgpXG4gICAxNjZcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxNjdcdCAgICB9XG4gICAxNjhcdFxuICAgMTY5XHQgICAgLy8vIFNob3cgc2lnbiBvdXQgY29uZmlybWF0aW9uXG4gICAxNzBcdCAgICBmdW5jIGNvbmZpcm1TaWduT3V0KCkge1xuICAgMTcxXHQgICAgICAgIHNob3dTaWduT3V0Q29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTcyXHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTczXHQgICAgfVxuICAgMTc0XHRcbiAgIDE3NVx0ICAgIC8vLyBTaWduIG91dCB0aGUgdXNlclxuICAgMTc2XHQgICAgZnVuYyBzaWduT3V0KCkge1xuICAgMTc3XHQgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgc2lnbiBvdXQgdGhlIHVzZXIgZnJvbSB0aGUgc2VydmVyXG4gICAxNzhcdCAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCByZXNldCB0aGUgdXNlciBkYXRhXG4gICAxNzlcdCAgICAgICAgcmVzZXRVc2VyRGF0YSgpXG4gICAxODBcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxODFcdCAgICB9XG4gICAxODJcdFxuICAgMTgzXHQgICAgLy8vIFJlc2V0IHVzZXIgZGF0YSB3aGVuIHNpZ25pbmcgb3V0XG4gICAxODRcdCAgICBmdW5jIHJlc2V0VXNlckRhdGEoKSB7XG4gICAxODVcdCAgICAgICAgLy8gQ2xlYXIgYW55IHVzZXItc3BlY2lmaWMgZGF0YSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMTg2XHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJOYW1lXCIpXG4gICAxODdcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlclBob25lXCIpXG4gICAxODhcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlclByb2ZpbGVEZXNjcmlwdGlvblwiKVxuICAgMTg5XHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJBdmF0YXJJbWFnZVwiKVxuICAgMTkwXHRcbiAgIDE5MVx0ICAgICAgICAvLyBSZXNldCBpbi1tZW1vcnkgc3RhdGVcbiAgIDE5Mlx0ICAgICAgICBuYW1lID0gXCJTYXJhaCBKb2huc29uXCJcbiAgIDE5M1x0ICAgICAgICBwaG9uZSA9IFwiKzEgKDU1NSkgOTg3LTY1NDNcIlxuICAgMTk0XHQgICAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbiA9IFwiSSBoYXZlIHR5cGUgMSBkaWFiZXRlcy4gTXkgaW5zdWxpbiBhbmQgc3VwcGxpZXMgYXJlIGluIHRoZSByZWZyaWdlcmF0b3IuIEVtZXJnZW5jeSBjb250YWN0czogTW9tICg1NTUtMTExLTIyMjIpLCBSb29tbWF0ZSBKZW4gKDU1NS0zMzMtNDQ0NCkuIEFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uIE15IGRvY3RvciBpcyBEci4gTWFydGluZXogYXQgQ2l0eSBNZWRpY2FsIENlbnRlciAoNTU1LTc3Ny04ODg4KS5cIlxuICAgMTk1XHQgICAgICAgIGF2YXRhckltYWdlID0gbmlsXG4gICAxOTZcdCAgICB9XG4gICAxOTdcdFxuICAgMTk4XHQgICAgLy8gTUFSSzogLSBQcml2YXRlIE1ldGhvZHNcbiAgIDE5OVx0XG4gICAyMDBcdCAgICAvLy8gTG9hZCBwZXJzaXN0ZWQgZGF0YSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMjAxXHQgICAgcHJpdmF0ZSBmdW5jIGxvYWRQZXJzaXN0ZWREYXRhKCkge1xuICAgMjAyXHQgICAgICAgIC8vIExvYWQgdXNlciBuYW1lXG4gICAyMDNcdCAgICAgICAgaWYgbGV0IHVzZXJOYW1lID0gVXNlckRlZmF1bHRzLnN0YW5kYXJkLnN0cmluZyhmb3JLZXk6IFwidXNlck5hbWVcIikge1xuICAgMjA0XHQgICAgICAgICAgICBzZWxmLm5hbWUgPSB1c2VyTmFtZVxuICAgMjA1XHQgICAgICAgIH1cbiAgIDIwNlx0XG4gICAyMDdcdCAgICAgICAgLy8gTG9hZCB1c2VyIHBob25lXG4gICAyMDhcdCAgICAgICAgaWYgbGV0IHVzZXJQaG9uZSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zdHJpbmcoZm9yS2V5OiBcInVzZXJQaG9uZVwiKSB7XG4gICAyMDlcdCAgICAgICAgICAgIHNlbGYucGhvbmUgPSB1c2VyUGhvbmVcbiAgIDIxMFx0ICAgICAgICB9XG4gICAyMTFcdFxuICAgMjEyXHQgICAgICAgIC8vIExvYWQgcHJvZmlsZSBkZXNjcmlwdGlvblxuICAgMjEzXHQgICAgICAgIGlmIGxldCBwcm9maWxlRGVzY3JpcHRpb24gPSBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc3RyaW5nKGZvcktleTogXCJ1c2VyUHJvZmlsZURlc2NyaXB0aW9uXCIpIHtcbiAgIDIxNFx0ICAgICAgICAgICAgc2VsZi5wcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb25cbiAgIDIxNVx0ICAgICAgICB9XG4gICAyMTZcdFxuICAgMjE3XHQgICAgICAgIC8vIExvYWQgYXZhdGFyIGltYWdlIGlmIGF2YWlsYWJsZVxuICAgMjE4XHQgICAgICAgIGxvYWRBdmF0YXJJbWFnZSgpXG4gICAyMTlcdCAgICB9XG4gICAyMjBcdFxuICAgMjIxXHQgICAgLy8vIFNhdmUgdGhlIHVzZXIgbmFtZSB0byBVc2VyRGVmYXVsdHNcbiAgIDIyMlx0ICAgIHByaXZhdGUgZnVuYyBzYXZlTmFtZSgpIHtcbiAgIDIyM1x0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KG5hbWUsIGZvcktleTogXCJ1c2VyTmFtZVwiKVxuICAgMjI0XHQgICAgfVxuICAgMjI1XHRcbiAgIDIyNlx0ICAgIC8vLyBTYXZlIHRoZSB1c2VyIHBob25lIHRvIFVzZXJEZWZhdWx0c1xuICAgMjI3XHQgICAgcHJpdmF0ZSBmdW5jIHNhdmVQaG9uZSgpIHtcbiAgIDIyOFx0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KHBob25lLCBmb3JLZXk6IFwidXNlclBob25lXCIpXG4gICAyMjlcdCAgICB9XG4gICAyMzBcdFxuICAgMjMxXHQgICAgLy8vIFNhdmUgdGhlIHByb2ZpbGUgZGVzY3JpcHRpb24gdG8gVXNlckRlZmF1bHRzXG4gICAyMzJcdCAgICBwcml2YXRlIGZ1bmMgc2F2ZVByb2ZpbGVEZXNjcmlwdGlvbigpIHtcbiAgIDIzM1x0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KHByb2ZpbGVEZXNjcmlwdGlvbiwgZm9yS2V5OiBcInVzZXJQcm9maWxlRGVzY3JpcHRpb25cIilcbiAgIDIzNFx0ICAgIH1cbiAgIDIzNVx0XG4gICAyMzZcdCAgICAvLy8gU2F2ZSB0aGUgYXZhdGFyIGltYWdlIHRvIFVzZXJEZWZhdWx0c1xuICAgMjM3XHQgICAgLy8vIC0gUGFyYW1ldGVyIGltYWdlOiBUaGUgaW1hZ2UgdG8gc2F2ZVxuICAgMjM4XHQgICAgcHJpdmF0ZSBmdW5jIHNhdmVBdmF0YXJJbWFnZShfIGltYWdlOiBVSUltYWdlKSB7XG4gICAyMzlcdCAgICAgICAgaWYgbGV0IGltYWdlRGF0YSA9IGltYWdlLmpwZWdEYXRhKGNvbXByZXNzaW9uUXVhbGl0eTogMC44KSB7XG4gICAyNDBcdCAgICAgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zZXQoaW1hZ2VEYXRhLCBmb3JLZXk6IFwidXNlckF2YXRhckltYWdlXCIpXG4gICAyNDFcdCAgICAgICAgfVxuICAgMjQyXHQgICAgfVxuICAgMjQzXHRcbiAgIDI0NFx0ICAgIC8vLyBMb2FkIHRoZSBhdmF0YXIgaW1hZ2UgZnJvbSBVc2VyRGVmYXVsdHNcbiAgIDI0NVx0ICAgIHByaXZhdGUgZnVuYyBsb2FkQXZhdGFySW1hZ2UoKSB7XG4gICAyNDZcdCAgICAgICAgaWYgbGV0IGltYWdlRGF0YSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5kYXRhKGZvcktleTogXCJ1c2VyQXZhdGFySW1hZ2VcIikge1xuICAgMjQ3XHQgICAgICAgICAgICBzZWxmLmF2YXRhckltYWdlID0gVUlJbWFnZShkYXRhOiBpbWFnZURhdGEpXG4gICAyNDhcdCAgICAgICAgfVxuICAgMjQ5XHQgICAgfVxuICAgMjUwXHRcbiAgIDI1MVx0ICAgIC8vLyBSZW1vdmUgdGhlIGF2YXRhciBpbWFnZSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMjUyXHQgICAgcHJpdmF0ZSBmdW5jIHJlbW92ZUF2YXRhckltYWdlKCkge1xuICAgMjUzXHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJBdmF0YXJJbWFnZVwiKVxuICAgMjU0XHQgICAgfVxuICAgMjU1XHR9XG4gICAyNTZcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjU2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFFcDZkVzlaaUxOZ3RHZ0JBNlJORHNzIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0ODo0MS40MzNaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJJ2xsIHVwZGF0ZSB0aGUgUHJvZmlsZVZpZXdNb2RlbC5zd2lmdCBmaWxlIHRvIGluY2x1ZGUgdGhlIHBob25lIG51bWJlciBjaGFuZ2UgZnVuY3Rpb25hbGl0eTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlNzA0YzYzOS0wNWE5LTQzNmYtOTk0Zi0xMWJiZDA3MWYzYjMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFZVHFSajhGM1RZSkdMM0JMb2dGTDl5IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGNoZWNrIHRoZSBQcm9maWxlVmlldy5zd2lmdCBmaWxlIHRvIHVuZGVyc3RhbmQgaXRzIHN0cnVjdHVyZSBiZWZvcmUgYWRkaW5nIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXc6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAxXHRpbXBvcnQgRm91bmRhdGlvblxuICAgICAyXHRpbXBvcnQgU3dpZnRVSVxuICAgICAzXHRpbXBvcnQgQ29tYmluZVxuICAgICA0XHRpbXBvcnQgVXNlck5vdGlmaWNhdGlvbnNcbiAgICAgNVx0aW1wb3J0IFVJS2l0XG4gICAgIDZcdFxuICAgICA3XHQvLy8gVmlldyBtb2RlbCBmb3IgdGhlIHByb2ZpbGUgc2NyZWVuXG4gICAgIDhcdGNsYXNzIFByb2ZpbGVWaWV3TW9kZWw6IE9ic2VydmFibGVPYmplY3Qge1xuICAgICA5XHQgICAgLy8gTUFSSzogLSBQdWJsaXNoZWQgUHJvcGVydGllc1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE1XHRcbiAgICAxNlx0ICAgIC8vIEF2YXRhciBQcm9wZXJ0aWVzXG4gICAgMTdcdCAgICBAUHVibGlzaGVkIHZhciBhdmF0YXJJbWFnZTogVUlJbWFnZT8gPSBuaWxcbiAgICAxOFx0XG4gICAgMTlcdCAgICAvLyBTaGVldCBQcmVzZW50YXRpb24gU3RhdGVzXG4gICAgMjBcdCAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdERlc2NyaXB0aW9uU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIxXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIyXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXRBdmF0YXJTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgMjNcdCAgICBAUHVibGlzaGVkIHZhciBzaG93SW1hZ2VQaWNrZXI6IEJvb2wgPSBmYWxzZVxuICAgIDI0XHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXG4gICAgMjVcdCAgICBAUHVibGlzaGVkIHZhciBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBCb29sID0gZmFsc2VcbiAgICAyNlx0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dTaWduT3V0Q29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyN1x0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyOFx0XG4gICAgMjlcdCAgICAvLyBQaG9uZSBOdW1iZXIgQ2hhbmdlIFByb3BlcnRpZXNcbiAgICAzMFx0ICAgIEBQdWJsaXNoZWQgdmFyIGVkaXRpbmdQaG9uZTogU3RyaW5nID0gXCJcIlxuICAgIDMxXHQgICAgQFB1Ymxpc2hlZCB2YXIgZWRpdGluZ1Bob25lUmVnaW9uOiBTdHJpbmcgPSBcIlVTXCJcbiAgICAzMlx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzQ29kZVNlbnQ6IEJvb2wgPSBmYWxzZVxuICAgIDMzXHQgICAgQFB1Ymxpc2hlZCB2YXIgdmVyaWZpY2F0aW9uQ29kZTogU3RyaW5nID0gXCJcIlxuICAgIDM0XHQgICAgQFB1Ymxpc2hlZCB2YXIgaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgMzVcdCAgICBAUHVibGlzaGVkIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuICAgIDM2XHQgICAgQFB1Ymxpc2hlZCB2YXIgcGhvbmVFcnJvck1lc3NhZ2U6IFN0cmluZz8gPSBuaWxcbiAgICAzN1x0XG4gICAgMzhcdCAgICAvLyBFZGl0aW5nIFN0YXRlc1xuICAgIDM5XHQgICAgQFB1Ymxpc2hlZCB2YXIgbmV3RGVzY3JpcHRpb246IFN0cmluZyA9IFwiXCJcbiAgICA0MFx0ICAgIEBQdWJsaXNoZWQgdmFyIG5ld05hbWU6IFN0cmluZyA9IFwiXCJcbiAgICA0MVx0ICAgIEBQdWJsaXNoZWQgdmFyIGltYWdlUGlja2VyU291cmNlVHlwZTogVUlJbWFnZVBpY2tlckNvbnRyb2xsZXIuU291cmNlVHlwZSA9IC5waG90b0xpYnJhcnlcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgNDRcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDQ1XHRcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMl06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgNDRcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDQ1XHRcbiAgICA0Nlx0ICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcbiAgICA0N1x0ICAgIEBQdWJsaXNoZWQgdmFyIGlzTmFtZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgNDhcdCAgICBAUHVibGlzaGVkIHZhciBpc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcbiAgICA0OVx0XG4gICAgNTBcdCAgICAvLyBNQVJLOiAtIENvbXB1dGVkIFByb3BlcnRpZXNcbiAgICA1MVx0XG4gICAgNTJcdCAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbM106XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0OFx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuICAgIDQ5XHRcbiAgICA1MFx0ICAgIC8vIE1BUks6IC0gQ29tcHV0ZWQgUHJvcGVydGllc1xuICAgIDUxXHRcbiAgICA1Mlx0ICAgIC8vLyBXaGV0aGVyIHRoZSB1c2VyIGlzIHVzaW5nIHRoZSBkZWZhdWx0IGF2YXRhclxuICAgIDUzXHQgICAgdmFyIGlzVXNpbmdEZWZhdWx0QXZhdGFyOiBCb29sIHtcbiAgICA1NFx0ICAgICAgICByZXR1cm4gYXZhdGFySW1hZ2UgPT0gbmlsXG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8vIEF2YWlsYWJsZSBwaG9uZSByZWdpb25zXG4gICAgNThcdCAgICBsZXQgcmVnaW9ucyA9IFtcbiAgICA1OVx0ICAgICAgICAoXCJVU1wiLCBcIisxXCIpLFxuICAgIDYwXHQgICAgICAgIChcIkNBXCIsIFwiKzFcIiksXG4gICAgNjFcdCAgICAgICAgKFwiVUtcIiwgXCIrNDRcIiksXG4gICAgNjJcdCAgICAgICAgKFwiQVVcIiwgXCIrNjFcIilcbiAgICA2M1x0ICAgIF1cbiAgICA2NFx0XG4gICAgNjVcdCAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHBob25lIG51bWJlciBpcyB2YWxpZFxuICAgIDY2XHQgICAgdmFyIGlzUGhvbmVOdW1iZXJWYWxpZDogQm9vbCB7XG4gICAgNjdcdCAgICAgICAgLy8gTWF0Y2ggbG9naW4gc2NyZWVuIHZhbGlkYXRpb25cbiAgICA2OFx0ICAgICAgICAvLyBBbGxvdyBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlcnNcbiAgICA2OVx0ICAgICAgICBpZiBlZGl0aW5nUGhvbmUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgZWRpdGluZ1Bob25lID09IFwiMDAwMDAwMDAwMFwiIHx8IGVkaXRpbmdQaG9uZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHtcbiAgICA3MFx0ICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICA3MVx0ICAgICAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgIC8vIFNpbXBsZSB2YWxpZGF0aW9uOiBhdCBsZWFzdCAxMCBkaWdpdHNcbiAgICA3NFx0ICAgICAgICByZXR1cm4gZWRpdGluZ1Bob25lLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPj0gMTBcbiAgICA3NVx0ICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIHZhbGlkXG4gICAgNzhcdCAgICB2YXIgaXNWZXJpZmljYXRpb25Db2RlVmFsaWQ6IEJvb2wge1xuICAgIDc5XHQgICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICA4MFx0ICAgICAgICByZXR1cm4gdmVyaWZpY2F0aW9uQ29kZS5maWx0ZXIgeyAkMC5pc051bWJlciB9LmNvdW50ID09IDZcbiAgICA4MVx0ICAgIH1cbiAgICA4Mlx0XG4gICAgODNcdCAgICAvLy8gR2V0IHRoZSBwaG9uZSBudW1iZXIgcGxhY2Vob2xkZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgIDg0XHQgICAgdmFyIHBob25lTnVtYmVyUGxhY2Vob2xkZXI6IFN0cmluZyB7XG4gICAgODVcdCAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgODZcdCAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICA4N1x0ICAgICAgICAgICAgcmV0dXJuIFwiWFhYLVhYWC1YWFhYXCIgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhXG4gICAgODhcdCAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgODlcdCAgICAgICAgICAgIHJldHVybiBcIlhYWFgtWFhYLVhYWFwiIC8vIEZvcm1hdCBmb3IgVUtcbiAgICA5MFx0ICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICA5MVx0ICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICA5Mlx0ICAgICAgICBkZWZhdWx0OlxuICAgIDkzXHQgICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBEZWZhdWx0IGZvcm1hdFxuICAgIDk0XHQgICAgICAgIH1cbiAgICA5NVx0ICAgIH1cbiAgICA5Nlx0XG4gICAgOTdcdCAgICAvLyBNQVJLOiAtIEluaXRpYWxpemF0aW9uXG4gICAgOThcdFxuICAgIDk5XHQgICAgaW5pdCgpIHtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbNF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE5OFx0ICAgICAgICBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTk5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMjAwXHQgICAgfVxuICAgMjAxXHRcbiAgIDIwMlx0ICAgIC8vLyBTaG93IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgIDIwM1x0ICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgMjA0XHQgICAgICAgIC8vIFJlc2V0IHBob25lIG51bWJlciBjaGFuZ2Ugc3RhdGVcbiAgIDIwNVx0ICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICAyMDZcdCAgICAgICAgZWRpdGluZ1Bob25lUmVnaW9uID0gXCJVU1wiXG4gICAyMDdcdCAgICAgICAgaXNDb2RlU2VudCA9IGZhbHNlXG4gICAyMDhcdCAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSA9IFwiXCJcbiAgIDIwOVx0ICAgICAgICBwaG9uZUVycm9yTWVzc2FnZSA9IG5pbFxuICAgMjEwXHRcbiAgIDIxMVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDIxMlx0ICAgICAgICBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3ID0gdHJ1ZVxuICAgMjEzXHRcbiAgIDIxNFx0ICAgICAgICAvLyBGb2N1cyB0aGUgcGhvbmUgbnVtYmVyIGZpZWxkIHdoZW4gdGhlIHZpZXcgYXBwZWFyc1xuICAgMjE1XHQgICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAwLjEpIHtcbiAgIDIxNlx0ICAgICAgICAgICAgc2VsZi5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkID0gdHJ1ZVxuICAgMjE3XHQgICAgICAgIH1cbiAgIDIxOFx0ICAgIH1cbiAgIDIxOVx0XG4gICAyMjBcdCAgICAvLy8gQ2FuY2VsIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDIyMVx0ICAgIGZ1bmMgY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKSB7XG4gICAyMjJcdCAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAyMjNcdCAgICAgICAgc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IGZhbHNlXG4gICAyMjRcdCAgICAgICAgaXNDb2RlU2VudCA9IGZhbHNlXG4gICAyMjVcdCAgICB9XG4gICAyMjZcdFxuICAgMjI3XHQgICAgLy8vIFNlbmQgdmVyaWZpY2F0aW9uIGNvZGUgZm9yIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDIyOFx0ICAgIGZ1bmMgc2VuZFBob25lQ2hhbmdlVmVyaWZpY2F0aW9uQ29kZSgpIHtcbiAgIDIyOVx0ICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byB0aGUgcGhvbmUgbnVtYmVyXG4gICAyMzBcdCAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5XG4gICAyMzNcdCAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgMjM0XHQgICAgICAgICAgICBndWFyZCBsZXQgc2VsZiA9IHNlbGYgZWxzZSB7IHJldHVybiB9XG4gICAyMzVcdCAgICAgICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2VcbiAgIDIzNlx0ICAgICAgICAgICAgc2VsZi5pc0NvZGVTZW50ID0gdHJ1ZVxuICAgMjM3XHQgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDIzOFx0XG4gICAyMzlcdCAgICAgICAgICAgIC8vIEZvY3VzIHRoZSB2ZXJpZmljYXRpb24gY29kZSBmaWVsZFxuICAgMjQwXHQgICAgICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC41KSB7XG4gICAyNDFcdCAgICAgICAgICAgICAgICBzZWxmLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IHRydWVcbiAgIDI0Mlx0ICAgICAgICAgICAgfVxuICAgMjQzXHQgICAgICAgIH1cbiAgIDI0NFx0ICAgIH1cbiAgIDI0NVx0XG4gICAyNDZcdCAgICAvLy8gVmVyaWZ5IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAyNDdcdCAgICBmdW5jIHZlcmlmeVBob25lQ2hhbmdlKCkge1xuICAgMjQ4XHQgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdmVyaWZ5IHRoZSBjb2RlIHdpdGggdGhlIHNlcnZlclxuICAgMjQ5XHQgICAgICAgIGlzTG9hZGluZyA9IHRydWVcbiAgIDI1MFx0XG4gICAyNTFcdCAgICAgICAgLy8gU2ltdWxhdGUgbmV0d29yayBkZWxheVxuICAgMjUyXHQgICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAxLjUpIHsgW3dlYWsgc2VsZl0gaW5cbiAgIDI1M1x0ICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgMjU0XHQgICAgICAgICAgICBzZWxmLmlzTG9hZGluZyA9IGZhbHNlXG4gICAyNTVcdFxuICAgMjU2XHQgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxuICAgMjU3XHQgICAgICAgICAgICBpZiAhc2VsZi5lZGl0aW5nUGhvbmUuaXNFbXB0eSAmJiBzZWxmLnZlcmlmaWNhdGlvbkNvZGUuY291bnQgPj0gNCB7XG4gICAyNThcdCAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkUGhvbmUgPSBQaG9uZUZvcm1hdHRlci5mb3JtYXRQaG9uZU51bWJlcihzZWxmLmVkaXRpbmdQaG9uZSwgcmVnaW9uOiBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgIDI1OVx0ICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBmb3JtYXR0ZWRQaG9uZSwgcmVnaW9uOiBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgIDI2MFx0ICAgICAgICAgICAgICAgIHNlbGYuc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IGZhbHNlXG4gICAyNjFcdCAgICAgICAgICAgICAgICBzZWxmLmlzQ29kZVNlbnQgPSBmYWxzZVxuICAgMjYyXHQgICAgICAgICAgICB9XG4gICAyNjNcdCAgICAgICAgfVxuICAgMjY0XHQgICAgfVxuICAgMjY1XHRcbiAgIDI2Nlx0ICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIHRleHQgY2hhbmdlXG4gICAyNjdcdCAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgIDI2OFx0ICAgICAgICAvLyBDaGVjayBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJcbiAgIDI2OVx0ICAgICAgICBpZiBuZXdWYWx1ZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMDAwMDAwMDAwMFwiIHtcbiAgIDI3MFx0ICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAyNzFcdCAgICAgICAgICAgIHJldHVyblxuICAgMjcyXHQgICAgICAgIH1cbiAgIDI3M1x0XG4gICAyNzRcdCAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgMjc1XHQgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAyNzhcdCAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgIDI3OVx0ICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgIDI4MFx0ICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgIDI4MVx0ICAgICAgICBjYXNlIFwiVUtcIjpcbiAgIDI4Mlx0ICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAyODNcdCAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAyODRcdCAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAyODVcdCAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgIDI4Nlx0ICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgIDI4N1x0ICAgICAgICBkZWZhdWx0OlxuICAgMjg4XHQgICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAyODlcdCAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAyOTBcdCAgICAgICAgfVxuICAgMjkxXHQgICAgfVxuICAgMjkyXHRcbiAgIDI5M1x0ICAgIC8vLyBIYW5kbGUgdmVyaWZpY2F0aW9uIGNvZGUgdGV4dCBjaGFuZ2VcbiAgIDI5NFx0ICAgIGZ1bmMgaGFuZGxlVmVyaWZpY2F0aW9uQ29kZUNoYW5nZShuZXdWYWx1ZTogU3RyaW5nKSB7XG4gICAyOTVcdCAgICAgICAgLy8gRm9ybWF0IHRoZSB2ZXJpZmljYXRpb24gY29kZSBhcyBYWFgtWFhYXG4gICAyOTZcdCAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuICAgMjk3XHRcbiAgIDI5OFx0ICAgICAgICAvLyBMaW1pdCB0byA2IGRpZ2l0c1xuICAgMjk5XHQgICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDYpKVxuICAgMzAwXHRcbiAgIDMwMVx0ICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5cbiAgIDMwMlx0ICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAzIHtcbiAgIDMwM1x0ICAgICAgICAgICAgbGV0IGZpcnN0UGFydCA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgIDMwNFx0ICAgICAgICAgICAgbGV0IHNlY29uZFBhcnQgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpXG4gICAzMDVcdCAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUgPSBcIlxcKGZpcnN0UGFydCktXFwoc2Vjb25kUGFydClcIlxuICAgMzA2XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQgIT0gdmVyaWZpY2F0aW9uQ29kZSB7XG4gICAzMDdcdCAgICAgICAgICAgIC8vIEp1c3QgdXNlIHRoZSBmaWx0ZXJlZCBkaWdpdHMgaWYgMyBvciBmZXdlclxuICAgMzA4XHQgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gbGltaXRlZEZpbHRlcmVkXG4gICAzMDlcdCAgICAgICAgfVxuICAgMzEwXHQgICAgfVxuICAgMzExXHRcbiAgIDMxMlx0ICAgIC8vLyBIYW5kbGUgcmVnaW9uIHNlbGVjdGlvbiBjaGFuZ2VcbiAgIDMxM1x0ICAgIGZ1bmMgaGFuZGxlUmVnaW9uQ2hhbmdlKCkge1xuICAgMzE0XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnNlbGVjdGlvbkZlZWRiYWNrKClcbiAgIDMxNVx0ICAgIH1cbiAgIDMxNlx0XG4gICAzMTdcdCAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDMxOFx0ICAgIC8vLyAtIFBhcmFtZXRlcnM6XG4gICAzMTlcdCAgICAvLy8gICAtIG5ld1Bob25lOiBUaGUgbmV3IHBob25lIG51bWJlclxuICAgMzIwXHQgICAgLy8vICAgLSByZWdpb246IFRoZSBwaG9uZSByZWdpb25cbiAgIDMyMVx0ICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSB7XG4gICAzMjJcdCAgICAgICAgc2VsZi5waG9uZSA9IG5ld1Bob25lXG4gICAzMjNcdCAgICAgICAgc2F2ZVBob25lKClcbiAgIDMyNFx0ICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDMyNVx0ICAgIH1cbiAgIDMyNlx0XG4gICAzMjdcdCAgICAvLy8gU2hvdyBzaWduIG91dCBjb25maXJtYXRpb25cbiAgIDMyOFx0ICAgIGZ1bmMgY29uZmlybVNpZ25PdXQoKSB7XG4gICAzMjlcdCAgICAgICAgc2hvd1NpZ25PdXRDb25maXJtYXRpb24gPSB0cnVlXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzVdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA0MDVcdCAgICAgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBVSUltYWdlKGRhdGE6IGltYWdlRGF0YSlcbiAgIDQwNlx0ICAgICAgICB9XG4gICA0MDdcdCAgICB9XG4gICA0MDhcdFxuICAgNDA5XHQgICAgLy8vIFJlbW92ZSB0aGUgYXZhdGFyIGltYWdlIGZyb20gVXNlckRlZmF1bHRzXG4gICA0MTBcdCAgICBwcml2YXRlIGZ1bmMgcmVtb3ZlQXZhdGFySW1hZ2UoKSB7XG4gICA0MTFcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlckF2YXRhckltYWdlXCIpXG4gICA0MTJcdCAgICB9XG4gICA0MTNcdFxuICAgNDE0XHQgICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXIgKFhYWC1YWFgtWFhYWClcbiAgIDQxNVx0ICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVU1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgNDE2XHQgICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgNDE3XHQgICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcbiAgIDQxOFx0XG4gICA0MTlcdCAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgNDIwXHQgICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDYge1xuICAgNDIxXHQgICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICA0MjJcdCAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpLnByZWZpeCgzKVxuICAgNDIzXHQgICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNilcbiAgIDQyNFx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICA0MjVcdCAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgNDI2XHQgICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICA0MjdcdCAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpXG4gICA0MjhcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgNDI5XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcbiAgIDQzMFx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICA0MzFcdCAgICAgICAgfSBlbHNlIHtcbiAgIDQzMlx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcIlxuICAgNDMzXHQgICAgICAgIH1cbiAgIDQzNFx0ICAgIH1cbiAgIDQzNVx0XG4gICA0MzZcdCAgICAvLy8gRm9ybWF0IGEgVUsgcGhvbmUgbnVtYmVyIChYWFhYLVhYWC1YWFgpXG4gICA0MzdcdCAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgIDQzOFx0ICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgIDQzOVx0ICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG4gICA0NDBcdFxuICAgNDQxXHQgICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgIDQ0Mlx0ICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA3IHtcbiAgIDQ0M1x0ICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgNDQ0XHQgICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgIDQ0NVx0ICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDcpXG4gICA0NDZcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgNDQ3XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgIDQ0OFx0ICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgNDQ5XHQgICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgNDUwXHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgIDQ1MVx0ICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICA0NTJcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgNDUzXHQgICAgICAgIH0gZWxzZSB7XG4gICA0NTRcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgIDQ1NVx0ICAgICAgICB9XG4gICA0NTZcdCAgICB9XG4gICA0NTdcdFxuICAgNDU4XHQgICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgNDU5XHQgICAgcHJpdmF0ZSBmdW5jIGZvcm1hdEFVUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICA0NjBcdCAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICA0NjFcdCAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuICAgNDYyXHRcbiAgIDQ2M1x0ICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICA0NjRcdCAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICA0NjVcdCAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgIDQ2Nlx0ICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNCkucHJlZml4KDMpXG4gICA0NjdcdCAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgNDY4XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgIDQ2OVx0ICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICA0NzBcdCAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgIDQ3MVx0ICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNClcbiAgIDQ3Mlx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KVwiXG4gICA0NzNcdCAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgNDc0XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgIDQ3NVx0ICAgICAgICB9IGVsc2Uge1xuICAgNDc2XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICA0NzdcdCAgICAgICAgfVxuICAgNDc4XHQgICAgfVxuICAgNDc5XHR9XG4gICA0ODBcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE0a1RaNmVEYnBtenhGdjJEODc1Tll5In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo0OTozOC4wOTlaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyBjaGVjayB0aGUgUHJvZmlsZVZpZXcuc3dpZnQgZmlsZSB0byB1bmRlcnN0YW5kIGl0cyBzdHJ1Y3R1cmUgYmVmb3JlIGFkZGluZyB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImVkMzIxMmQyLWQ5NDMtNGNkOC1hMThiLTZkOGQxNTk5Nzg5ZSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUdHcHlUcjQ5U2Q2S3NlYkpSOVNmeHYiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIkFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0XCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcImltcG9ydCBTd2lmdFVJXFxuaW1wb3J0IEZvdW5kYXRpb25cXG5pbXBvcnQgUGhvdG9zVUlcXG5pbXBvcnQgQ29tYmluZVxcbmltcG9ydCBVSUtpdFwiLCBcIm5ld19zdHJcIjogXCJpbXBvcnQgU3dpZnRVSVxcbmltcG9ydCBGb3VuZGF0aW9uXFxuaW1wb3J0IFBob3Rvc1VJXFxuaW1wb3J0IENvbWJpbmVcXG5pbXBvcnQgVUlLaXRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNX0sIHtcIm9sZF9zdHJcIjogXCIgICAgLy8gRm9jdXMgc3RhdGUgZm9yIHRoZSB0ZXh0IGVkaXRvclxcbiAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciB0ZXh0RWRpdG9yRm9jdXNlZDogQm9vbFxcblxcbiAgICAvLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIG5hbWUgZmllbGRcXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgbmFtZUZpZWxkRm9jdXNlZDogQm9vbFwiLCBcIm5ld19zdHJcIjogXCIgICAgLy8gRm9jdXMgc3RhdGVzXFxuICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHRleHRFZGl0b3JGb2N1c2VkOiBCb29sXFxuICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIG5hbWVGaWVsZEZvY3VzZWQ6IEJvb2xcXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQ6IEJvb2xcXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTIsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTZ9LCB7XCJvbGRfc3RyXCI6IFwiICAgIC8vIFBob25lIE51bWJlciBDaGFuZ2UgVmlld1xcbiAgICBwcml2YXRlIHZhciBwaG9uZU51bWJlckNoYW5nZVZpZXc6IHNvbWUgVmlldyB7XFxuICAgICAgICBQaG9uZU51bWJlckNoYW5nZVZpZXcoKVxcbiAgICAgICAgICAgIC5vblJlY2VpdmUoTm90aWZpY2F0aW9uQ2VudGVyLmRlZmF1bHQucHVibGlzaGVyKGZvcjogTlNOb3RpZmljYXRpb24uTmFtZShcXFwiUGhvbmVOdW1iZXJDaGFuZ2VkXFxcIikpKSB7IG5vdGlmaWNhdGlvbiBpblxcbiAgICAgICAgICAgICAgICBpZiBsZXQgdXNlckluZm8gPSBub3RpZmljYXRpb24udXNlckluZm8sXFxuICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IHVzZXJJbmZvW1xcXCJwaG9uZVxcXCJdIGFzPyBTdHJpbmcsXFxuICAgICAgICAgICAgICAgICAgIGxldCByZWdpb24gPSB1c2VySW5mb1tcXFwicmVnaW9uXFxcIl0gYXM/IFN0cmluZyB7XFxuICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBwaG9uZSwgcmVnaW9uOiByZWdpb24pXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIC8vIFBob25lIE51bWJlciBDaGFuZ2UgVmlld1xcbiAgICBwcml2YXRlIHZhciBwaG9uZU51bWJlckNoYW5nZVZpZXc6IHNvbWUgVmlldyB7XFxuICAgICAgICBOYXZpZ2F0aW9uU3RhY2sge1xcbiAgICAgICAgICAgIFNjcm9sbFZpZXcge1xcbiAgICAgICAgICAgICAgICBpZiAhdmlld01vZGVsLmlzQ29kZVNlbnQge1xcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbCBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcXG4gICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiAxNikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXFxcIkN1cnJlbnQgUGhvbmUgTnVtYmVyXFxcIilcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5waG9uZS5pc0VtcHR5ID8gXFxcIig5NTQpIDIzNC01Njc4XFxcIiA6IHZpZXdNb2RlbC5waG9uZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSwgYWxpZ25tZW50OiAubGVhZGluZylcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcXFwiTmV3IFBob25lIE51bWJlclxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnaW9uIHBpY2tlclxcbiAgICAgICAgICAgICAgICAgICAgICAgIEhTdGFjayB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXFxcIlJlZ2lvblxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcigpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXIoXFxcIlJlZ2lvblxcXCIsIHNlbGVjdGlvbjogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvckVhY2godmlld01vZGVsLnJlZ2lvbnMsIGlkOiBcXFxcLjApIHsgcmVnaW9uIGluXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcXFwiXFxcXChyZWdpb24uMCkgKFxcXFwocmVnaW9uLjEpKVxcXCIpLnRhZyhyZWdpb24uMClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlja2VyU3R5bGUoTWVudVBpY2tlclN0eWxlKCkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbikgeyBfLCBfIGluXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlUmVnaW9uQ2hhbmdlKClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQodmlld01vZGVsLnBob25lTnVtYmVyUGxhY2Vob2xkZXIsIHRleHQ6ICR2aWV3TW9kZWwuZWRpdGluZ1Bob25lKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm11bHRpbGluZVRleHRBbGlnbm1lbnQoLmxlYWRpbmcpIC8vIExlZnQgYWxpZ24gdGhlIHRleHRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJHBob25lTnVtYmVyRmllbGRGb2N1c2VkKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpIHsgXywgbmV3VmFsdWUgaW5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5oYW5kbGVQaG9uZU51bWJlckNoYW5nZShuZXdWYWx1ZTogbmV3VmFsdWUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFxcXCJFbnRlciB5b3VyIG5ldyBwaG9uZSBudW1iZXIuIFdlJ2xsIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byBjb25maXJtLlxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxldCBlcnJvck1lc3NhZ2UgPSB2aWV3TW9kZWwucGhvbmVFcnJvck1lc3NhZ2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KGVycm9yTWVzc2FnZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zZW5kUGhvbmVDaGFuZ2VWZXJpZmljYXRpb25Db2RlKClcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQodmlld01vZGVsLmlzTG9hZGluZyA/IFxcXCJTZW5kaW5nLi4uXFxcIiA6IFxcXCJTZW5kIFZlcmlmaWNhdGlvbiBDb2RlXFxcIilcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICF2aWV3TW9kZWwuaXNQaG9uZU51bWJlclZhbGlkID8gQ29sb3IuZ3JheSA6IENvbG9yLmJsdWUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzUGhvbmVOdW1iZXJWYWxpZClcXG4gICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAxNilcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxcbiAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXRpb24gY29kZSB2aWV3XFxuICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFxcXCJWZXJpZmljYXRpb24gQ29kZVxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcXFwiRW50ZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gXFxcXChQaG9uZUZvcm1hdHRlci5mb3JtYXRQaG9uZU51bWJlcih2aWV3TW9kZWwuZWRpdGluZ1Bob25lLCByZWdpb246IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pKVxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoXFxcIlhYWC1YWFhcXFwiLCB0ZXh0OiAkdmlld01vZGVsLnZlcmlmaWNhdGlvbkNvZGUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rZXlib2FyZFR5cGUoLm51bWJlclBhZClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLnZlcmlmaWNhdGlvbkNvZGUpIHsgXywgbmV3VmFsdWUgaW5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5oYW5kbGVWZXJpZmljYXRpb25Db2RlQ2hhbmdlKG5ld1ZhbHVlOiBuZXdWYWx1ZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC52ZXJpZnlQaG9uZUNoYW5nZSgpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5pc0xvYWRpbmcgPyBcXFwiVmVyaWZ5aW5nLi4uXFxcIiA6IFxcXCJWZXJpZnkgQ29kZVxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkID8gQ29sb3IuZ3JheSA6IENvbG9yLmJsdWUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDE2KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmNhbmNlbFBob25lTnVtYmVyQ2hhbmdlKClcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXFxcIkNhbmNlbFxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5ibHVlKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcXG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBTcGFjZXIobWluTGVuZ3RoOiAwKVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcXG4gICAgICAgICAgICAubmF2aWdhdGlvblRpdGxlKFxcXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXFxcIilcXG4gICAgICAgICAgICAudG9vbGJhciB7XFxuICAgICAgICAgICAgICAgIFRvb2xiYXJJdGVtKHBsYWNlbWVudDogLm5hdmlnYXRpb25CYXJMZWFkaW5nKSB7XFxuICAgICAgICAgICAgICAgICAgICBCdXR0b24oXFxcIkNhbmNlbFxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxcbiAgICAgICAgICAgIC5vbkFwcGVhciB7XFxuICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGZvY3VzIHN0YXRlcyB0byB0aGUgdmlldyBtb2RlbCdzIGZvY3VzIHN0YXRlc1xcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlckZpZWxkRm9jdXNlZCA9IHZpZXdNb2RlbC5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkXFxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQgPSB2aWV3TW9kZWwuaXNWZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC5vbkNoYW5nZShvZjogcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cXG4gICAgICAgICAgICAgICAgdmlld01vZGVsLmlzUGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXFxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2ZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXFxuICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5pc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5pc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cXG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAzNDgsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMzU4fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHVwZGF0ZSB0aGUgUHJvZmlsZVZpZXcuc3dpZnQgZmlsZSB0byByZXBsYWNlIHRoZSBQaG9uZU51bWJlckNoYW5nZVZpZXcgd2l0aCBjb21wdXRlZCBwcm9wZXJ0aWVzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlldy5zd2lmdDpcbiAgICAgMVx0aW1wb3J0IFN3aWZ0VUlcbiAgICAgMlx0aW1wb3J0IEZvdW5kYXRpb25cbiAgICAgM1x0aW1wb3J0IFBob3Rvc1VJXG4gICAgIDRcdGltcG9ydCBDb21iaW5lXG4gICAgIDVcdGltcG9ydCBVSUtpdFxuICAgICA2XHRcbiAgICAgN1x0Ly8gTUFSSzogLSBNYWluIFByb2ZpbGUgVmlld1xuICAgICA4XHRzdHJ1Y3QgUHJvZmlsZVZpZXc6IFZpZXcge1xuICAgICA5XHQgICAgQFN0YXRlT2JqZWN0IHByaXZhdGUgdmFyIHZpZXdNb2RlbCA9IFByb2ZpbGVWaWV3TW9kZWwoKVxuICAgIDEwXHQgICAgQEVudmlyb25tZW50KFxcLnByZXNlbnRhdGlvbk1vZGUpIHByaXZhdGUgdmFyIHByZXNlbnRhdGlvbk1vZGVcbiAgICAxMVx0XG4gICAgMTJcdCAgICAvLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIHRleHQgZWRpdG9yXG4gICAgMTNcdCAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciB0ZXh0RWRpdG9yRm9jdXNlZDogQm9vbFxuICAgIDE0XHRcbiAgICAxNVx0ICAgIC8vIEZvY3VzIHN0YXRlIGZvciB0aGUgbmFtZSBmaWVsZFxuICAgIDE2XHQgICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgbmFtZUZpZWxkRm9jdXNlZDogQm9vbFxuICAgIDE3XHRcbiAgICAxOFx0ICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgIDE5XHQgICAgICAgIFNjcm9sbFZpZXcge1xuICAgIDIwXHQgICAgICAgICAgICBWU3RhY2sge1xuICAgIDIxXHQgICAgICAgICAgICAgICAgLy8gUHJvZmlsZSBIZWFkZXJcbiAgICAyMlx0ICAgICAgICAgICAgICAgIFZTdGFjayhzcGFjaW5nOiAxNikge1xuICAgIDIzXHQgICAgICAgICAgICAgICAgICAgIENvbW1vbkF2YXRhclZpZXcoXG4gICAgMjRcdCAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHZpZXdNb2RlbC5uYW1lLFxuICAgIDI1XHQgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTogdmlld01vZGVsLmF2YXRhckltYWdlLFxuICAgIDI2XHQgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiA4MCxcbiAgICAyN1x0ICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBDb2xvci5ibHVlLm9wYWNpdHkoMC4xKSxcbiAgICAyOFx0ICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAuYmx1ZSxcbiAgICAyOVx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsXG4gICAgMzBcdCAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAuYmx1ZVxuICAgIDMxXHQgICAgICAgICAgICAgICAgICAgIClcbiAgICAzMlx0ICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5uYW1lKVxuICAgIDMzXHQgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgMzRcdCAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwucGhvbmUuaXNFbXB0eSA/IFwiKDk1NCkgMjM0LTU2NzhcIiA6IHZpZXdNb2RlbC5waG9uZSlcbiAgICAzNVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnN1YmhlYWRsaW5lKVxuICAgIDM2XHQgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAgMzdcdCAgICAgICAgICAgICAgICB9XG4gICAgMzhcdCAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyMClcbiAgICAzOVx0XG4gICAgNDBcdCAgICAgICAgICAgICAgICAvLyBEZXNjcmlwdGlvbiBTZXR0aW5nIENhcmRcbiAgICA0MVx0ICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICA0Mlx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwucHJlcGFyZUVkaXREZXNjcmlwdGlvbigpXG4gICAgNDNcdCAgICAgICAgICAgICAgICB9KSB7XG4gICAgNDRcdCAgICAgICAgICAgICAgICAgICAgSFN0YWNrKGFsaWdubWVudDogLnRvcCkge1xuICAgIDQ1XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5wcm9maWxlRGVzY3JpcHRpb24uaXNFbXB0eSA/IFwiVGhpcyBpcyBzaW1wbHkgYSBub3RlIGZvciBjb250YWN0cy5cIiA6IHZpZXdNb2RlbC5wcm9maWxlRGVzY3JpcHRpb24pXG4gICAgNDZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICA0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAgNDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlsaW5lVGV4dEFsaWdubWVudCgubGVhZGluZylcbiAgICA0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKClcbiAgICA1MFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAgNTFcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICA1Mlx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICA1M1x0ICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgIDU1XHQgICAgICAgICAgICAgICAgfVxuICAgIDU2XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgNTdcdCAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuICAgIDU4XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmJvdHRvbSwgOClcbiAgICA1OVx0XG4gICAgNjBcdCAgICAgICAgICAgICAgICAvLyBHcm91cGVkIFVwZGF0ZSBDYXJkc1xuICAgIDYxXHQgICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDApIHtcbiAgICA2Mlx0ICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgNjNcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaG93QXZhdGFyRWRpdG9yKClcbiAgICA2NFx0ICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICAgNjVcdCAgICAgICAgICAgICAgICAgICAgICAgIEhTdGFjayB7XG4gICAgNjZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVXBkYXRlIEF2YXRhclwiKVxuICAgIDY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgIDY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAgNjlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgIDcwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1hZ2Uoc3lzdGVtTmFtZTogXCJjaGV2cm9uLnJpZ2h0XCIpXG4gICAgNzFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgIDcyXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgNzNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgNzRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgIDc1XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA3Nlx0ICAgICAgICAgICAgICAgICAgICBEaXZpZGVyKCkucGFkZGluZygubGVhZGluZylcbiAgICA3N1x0ICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgNzhcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5wcmVwYXJlRWRpdE5hbWUoKVxuICAgIDc5XHQgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICA4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgICA4MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJVcGRhdGUgTmFtZVwiKVxuICAgIDgyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgIDgzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAgODRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgIDg1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1hZ2Uoc3lzdGVtTmFtZTogXCJjaGV2cm9uLnJpZ2h0XCIpXG4gICAgODZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgIDg3XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgODhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgODlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgIDkwXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA5MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA5Mlx0ICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgIDkzXHQgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgICA5NFx0ICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgIDk1XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmJvdHRvbSwgOClcbiAgICA5Nlx0XG4gICAgOTdcdCAgICAgICAgICAgICAgICAvLyBQaG9uZSBOdW1iZXIgU2V0dGluZyBDYXJkXG4gICAgOThcdCAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgOTlcdCAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNob3dQaG9uZU51bWJlckNoYW5nZSgpXG4gICAxMDBcdCAgICAgICAgICAgICAgICB9KSB7XG4gICAxMDFcdCAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgIDEwMlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkNoYW5nZSBQaG9uZSBOdW1iZXJcIilcbiAgIDEwM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgMTA0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgIDEwNVx0ICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKClcbiAgIDEwNlx0ICAgICAgICAgICAgICAgICAgICAgICAgSW1hZ2Uoc3lzdGVtTmFtZTogXCJjaGV2cm9uLnJpZ2h0XCIpXG4gICAxMDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAxMDhcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTA5XHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAxMTBcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAxMTFcdCAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAxMTJcdCAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDExM1x0ICAgICAgICAgICAgICAgIH1cbiAgIDExNFx0ICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMTE1XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmJvdHRvbSwgOClcbiAgIDExNlx0XG4gICAxMTdcdCAgICAgICAgICAgICAgICAvLyBTaWduIE91dCBTZXR0aW5nIENhcmRcbiAgIDExOFx0ICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgIDExOVx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY29uZmlybVNpZ25PdXQoKVxuICAgMTIwXHQgICAgICAgICAgICAgICAgfSkge1xuICAgMTIxXHQgICAgICAgICAgICAgICAgICAgIFRleHQoXCJTaWduIE91dFwiKVxuICAgMTIyXHQgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDEyM1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgMTI0XHQgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgIDEyNVx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgIDEyNlx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAxMjdcdCAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMTI4XHQgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgMTI5XHQgICAgICAgICAgICAgICAgfVxuICAgMTMwXHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAxMzFcdFxuICAgMTMyXHQgICAgICAgICAgICAgICAgU3BhY2VyKClcbiAgIDEzM1x0ICAgICAgICAgICAgfVxuICAgMTM0XHQgICAgICAgIH1cbiAgIDEzNVx0ICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDEzNlx0ICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldykge1xuICAgMTM3XHQgICAgICAgICAgICBwaG9uZU51bWJlckNoYW5nZVZpZXdcbiAgIDEzOFx0ICAgICAgICB9XG4gICAxMzlcdCAgICAgICAgLmFsZXJ0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dDaGVja0luQ29uZmlybWF0aW9uKSB7XG4gICAxNDBcdCAgICAgICAgICAgIEFsZXJ0KFxuICAgMTQxXHQgICAgICAgICAgICAgICAgdGl0bGU6IFRleHQoXCJDb25maXJtIENoZWNrLWluXCIpLFxuICAgMTQyXHQgICAgICAgICAgICAgICAgbWVzc2FnZTogVGV4dChcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjaGVjayBpbiBub3c/IFRoaXMgd2lsbCByZXNldCB5b3VyIHRpbWVyLlwiKSxcbiAgIDE0M1x0ICAgICAgICAgICAgICAgIHByaW1hcnlCdXR0b246IC5kZWZhdWx0KFRleHQoXCJDaGVjayBJblwiKSkge1xuICAgMTQ0XHQgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd291bGQgYmUgaGFuZGxlZCBieSB0aGUgdmlldyBtb2RlbCBpbiBhIHJlYWwgaW1wbGVtZW50YXRpb25cbiAgIDE0NVx0ICAgICAgICAgICAgICAgIH0sXG4gICAxNDZcdCAgICAgICAgICAgICAgICBzZWNvbmRhcnlCdXR0b246IC5jYW5jZWwoKVxuICAgMTQ3XHQgICAgICAgICAgICApXG4gICAxNDhcdCAgICAgICAgfVxuICAgMTQ5XHQgICAgICAgIC5hbGVydChcIlNpZ24gT3V0XCIsIGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dTaWduT3V0Q29uZmlybWF0aW9uKSB7XG4gICAxNTBcdCAgICAgICAgICAgIEJ1dHRvbihcIkNhbmNlbFwiLCByb2xlOiAuY2FuY2VsKSB7XG4gICAxNTFcdCAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAxNTJcdCAgICAgICAgICAgIH1cbiAgIDE1M1x0ICAgICAgICAgICAgQnV0dG9uKFwiU2lnbiBPdXRcIiwgcm9sZTogLmRlc3RydWN0aXZlKSB7XG4gICAxNTRcdCAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2lnbk91dCgpXG4gICAxNTVcdCAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIHRvIHNpZ24taW4gc2NyZWVuIHdvdWxkIGJlIGhhbmRsZWQgYnkgYSBjb29yZGluYXRvciBvciBwYXJlbnQgdmlld1xuICAgMTU2XHQgICAgICAgICAgICB9XG4gICAxNTdcdCAgICAgICAgfSBtZXNzYWdlOiB7XG4gICAxNThcdCAgICAgICAgICAgIFRleHQoXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2lnbiBvdXQ/XCIpXG4gICAxNTlcdCAgICAgICAgfVxuICAgMTYwXHQgICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93RWRpdERlc2NyaXB0aW9uU2hlZXQpIHtcbiAgIDE2MVx0ICAgICAgICAgICAgZW1lcmdlbmN5Tm90ZVNoZWV0Vmlld1xuICAgMTYyXHQgICAgICAgIH1cbiAgIDE2M1x0ICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0VkaXROYW1lU2hlZXQpIHtcbiAgIDE2NFx0ICAgICAgICAgICAgbmFtZUVkaXRTaGVldFZpZXdcbiAgIDE2NVx0ICAgICAgICB9XG4gICAxNjZcdCAgICAgICAgLnNoZWV0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dFZGl0QXZhdGFyU2hlZXQpIHtcbiAgIDE2N1x0ICAgICAgICAgICAgYXZhdGFyRWRpdFNoZWV0Vmlld1xuICAgMTY4XHQgICAgICAgIH1cbiAgIDE2OVx0ICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0ltYWdlUGlja2VyKSB7XG4gICAxNzBcdCAgICAgICAgICAgIEltYWdlUGlja2VyKHNvdXJjZVR5cGU6IHZpZXdNb2RlbC5pbWFnZVBpY2tlclNvdXJjZVR5cGUsIHNlbGVjdGVkSW1hZ2U6IHsgaW1hZ2UgaW5cbiAgIDE3MVx0ICAgICAgICAgICAgICAgIGlmIGxldCBpbWFnZSA9IGltYWdlIHtcbiAgIDE3Mlx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2V0QXZhdGFySW1hZ2UoaW1hZ2UpXG4gICAxNzNcdCAgICAgICAgICAgICAgICB9XG4gICAxNzRcdCAgICAgICAgICAgIH0pXG4gICAxNzVcdCAgICAgICAgfVxuICAgMTc2XHQgICAgICAgIC5hbGVydChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uKSB7XG4gICAxNzdcdCAgICAgICAgICAgIEFsZXJ0KFxuICAgMTc4XHQgICAgICAgICAgICAgICAgdGl0bGU6IFRleHQoXCJEZWxldGUgQXZhdGFyXCIpLFxuICAgMTc5XHQgICAgICAgICAgICAgICAgbWVzc2FnZTogVGV4dChcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgeW91ciBhdmF0YXIgcGhvdG8/XCIpLFxuICAgMTgwXHQgICAgICAgICAgICAgICAgcHJpbWFyeUJ1dHRvbjogLmRlc3RydWN0aXZlKFRleHQoXCJEZWxldGVcIikpIHtcbiAgIDE4MVx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuZGVsZXRlQXZhdGFySW1hZ2UoKVxuICAgMTgyXHQgICAgICAgICAgICAgICAgfSxcbiAgIDE4M1x0ICAgICAgICAgICAgICAgIHNlY29uZGFyeUJ1dHRvbjogLmNhbmNlbCgpXG4gICAxODRcdCAgICAgICAgICAgIClcbiAgIDE4NVx0ICAgICAgICB9XG4gICAxODZcdCAgICB9XG4gICAxODdcdFxuICAgMTg4XHQgICAgLy8gTUFSSzogLSBQcml2YXRlIENvbXB1dGVkIFByb3BlcnRpZXNcbiAgIDE4OVx0XG4gICAxOTBcdCAgICAvLyBFbWVyZ2VuY3kgTm90ZSBTaGVldCBWaWV3XG4gICAxOTFcdCAgICBwcml2YXRlIHZhciBlbWVyZ2VuY3lOb3RlU2hlZXRWaWV3OiBzb21lIFZpZXcge1xuICAgMTkyXHQgICAgICAgIHZhciB2aWV3OiBzb21lIFZpZXcge1xuICAgMTkzXHQgICAgICAgICAgICBOYXZpZ2F0aW9uU3RhY2sge1xuICAgMTk0XHQgICAgICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAxOTVcdCAgICAgICAgICAgICAgICAgICAgVlN0YWNrKGFsaWdubWVudDogLmxlYWRpbmcsIHNwYWNpbmc6IDgpIHtcbiAgIDE5Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEVkaXRvcih0ZXh0OiAkdmlld01vZGVsLm5ld0Rlc2NyaXB0aW9uKVxuICAgMTk3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAxOThcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMTk5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1pbkhlaWdodDogMjQwKSAvLyBEb3VibGVkIHRoZSBoZWlnaHRcbiAgIDIwMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgNClcbiAgIDIwMVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjcm9sbENvbnRlbnRCYWNrZ3JvdW5kKC5oaWRkZW4pXG4gICAyMDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDIwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAyMDVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkdGV4dEVkaXRvckZvY3VzZWQpXG4gICAyMDZcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJUaGlzIG5vdGUgaXMgdmlzaWJsZSB0byB5b3VyIGNvbnRhY3RzIHdoZW4gdGhleSB2aWV3IHlvdXIgcHJvZmlsZS5cIilcbiAgIDIwN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgMjA5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAyMTBcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMjExXHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMjEyXHQgICAgICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAyMTNcdCAgICAgICAgICAgICAgICB9XG4gICAyMTRcdCAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgIDIxNVx0ICAgICAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJFbWVyZ2VuY3kgTm90ZVwiKVxuICAgMjE2XHQgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJJdGVtcyhcbiAgIDIxN1x0ICAgICAgICAgICAgICAgICAgICBsZWFkaW5nOiBCdXR0b24oXCJDYW5jZWxcIikge1xuICAgMjE4XHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsRWRpdERlc2NyaXB0aW9uKClcbiAgIDIxOVx0ICAgICAgICAgICAgICAgICAgICB9LFxuICAgMjIwXHQgICAgICAgICAgICAgICAgICAgIHRyYWlsaW5nOiBCdXR0b24oXCJTYXZlXCIpIHtcbiAgIDIyMVx0ICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNhdmVFZGl0ZWREZXNjcmlwdGlvbigpXG4gICAyMjJcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaG93RWRpdERlc2NyaXB0aW9uU2hlZXQgPSBmYWxzZVxuICAgMjIzXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDIyNFx0ICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLm5ld0Rlc2NyaXB0aW9uLnRyaW1taW5nQ2hhcmFjdGVycyhpbjogLndoaXRlc3BhY2VzQW5kTmV3bGluZXMpLmlzRW1wdHkgfHxcbiAgIDIyNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLm5ld0Rlc2NyaXB0aW9uID09IHZpZXdNb2RlbC5wcm9maWxlRGVzY3JpcHRpb24pXG4gICAyMjZcdCAgICAgICAgICAgICAgICApXG4gICAyMjdcdCAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDIyOFx0ICAgICAgICAgICAgICAgIC5vbkFwcGVhciB7XG4gICAyMjlcdCAgICAgICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgZm9jdXMgc3RhdGUgdG8gdGhlIHZpZXcgbW9kZWwncyBmb2N1cyBzdGF0ZVxuICAgMjMwXHQgICAgICAgICAgICAgICAgICAgIHRleHRFZGl0b3JGb2N1c2VkID0gdmlld01vZGVsLmlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWRcbiAgIDIzMVx0ICAgICAgICAgICAgICAgIH1cbiAgIDIzMlx0ICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdGV4dEVkaXRvckZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cbiAgIDIzM1x0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaXNEZXNjcmlwdGlvbkZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICAyMzRcdCAgICAgICAgICAgICAgICB9XG4gICAyMzVcdCAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5pc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICAyMzZcdCAgICAgICAgICAgICAgICAgICAgdGV4dEVkaXRvckZvY3VzZWQgPSBuZXdWYWx1ZVxuICAgMjM3XHQgICAgICAgICAgICAgICAgfVxuICAgMjM4XHQgICAgICAgICAgICB9XG4gICAyMzlcdCAgICAgICAgICAgIC5wcmVzZW50YXRpb25EZXRlbnRzKFsubGFyZ2VdKVxuICAgMjQwXHQgICAgICAgIH1cbiAgIDI0MVx0ICAgICAgICByZXR1cm4gdmlld1xuICAgMjQyXHQgICAgfVxuICAgMjQzXHRcbiAgIDI0NFx0ICAgIC8vIE5hbWUgRWRpdCBTaGVldCBWaWV3XG4gICAyNDVcdCAgICBwcml2YXRlIHZhciBuYW1lRWRpdFNoZWV0Vmlldzogc29tZSBWaWV3IHtcbiAgIDI0Nlx0ICAgICAgICB2YXIgdmlldzogc29tZSBWaWV3IHtcbiAgIDI0N1x0ICAgICAgICAgICAgTmF2aWdhdGlvblN0YWNrIHtcbiAgIDI0OFx0ICAgICAgICAgICAgICAgIFNjcm9sbFZpZXcge1xuICAgMjQ5XHQgICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiA4KSB7XG4gICAyNTBcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZChcIk5hbWVcIiwgdGV4dDogJHZpZXdNb2RlbC5uZXdOYW1lKVxuICAgMjUxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAyNTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgMjUzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAyNTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDI1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAyNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMjU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJG5hbWVGaWVsZEZvY3VzZWQpXG4gICAyNThcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJQZW9wbGUgd2lsbCBzZWUgdGhpcyBuYW1lIGlmIHlvdSBpbnRlcmFjdCB3aXRoIHRoZW0gYW5kIHRoZXkgZG9uJ3QgaGF2ZSB5b3Ugc2F2ZWQgYXMgYSBjb250YWN0LlwiKVxuICAgMjU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAyNjBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAyNjFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDI2Mlx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAyNjNcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAyNjRcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICAyNjVcdCAgICAgICAgICAgICAgICAgICAgU3BhY2VyKG1pbkxlbmd0aDogMClcbiAgIDI2Nlx0ICAgICAgICAgICAgICAgIH1cbiAgIDI2N1x0ICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMjY4XHQgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJUaXRsZURpc3BsYXlNb2RlKC5pbmxpbmUpXG4gICAyNjlcdCAgICAgICAgICAgICAgICAubmF2aWdhdGlvblRpdGxlKFwiTmFtZVwiKVxuICAgMjcwXHQgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJJdGVtcyhcbiAgIDI3MVx0ICAgICAgICAgICAgICAgICAgICBsZWFkaW5nOiBCdXR0b24oXCJDYW5jZWxcIikge1xuICAgMjcyXHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsRWRpdE5hbWUoKVxuICAgMjczXHQgICAgICAgICAgICAgICAgICAgIH0sXG4gICAyNzRcdCAgICAgICAgICAgICAgICAgICAgdHJhaWxpbmc6IEJ1dHRvbihcIlNhdmVcIikge1xuICAgMjc1XHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2F2ZUVkaXRlZE5hbWUoKVxuICAgMjc2XHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2hvd0VkaXROYW1lU2hlZXQgPSBmYWxzZVxuICAgMjc3XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDI3OFx0ICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLm5ld05hbWUudHJpbW1pbmdDaGFyYWN0ZXJzKGluOiAud2hpdGVzcGFjZXNBbmROZXdsaW5lcykuaXNFbXB0eSB8fFxuICAgMjc5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwubmV3TmFtZSA9PSB2aWV3TW9kZWwubmFtZSlcbiAgIDI4MFx0ICAgICAgICAgICAgICAgIClcbiAgIDI4MVx0ICAgICAgICAgICAgICAgIC5vbkFwcGVhciB7XG4gICAyODJcdCAgICAgICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgZm9jdXMgc3RhdGUgdG8gdGhlIHZpZXcgbW9kZWwncyBmb2N1cyBzdGF0ZVxuICAgMjgzXHQgICAgICAgICAgICAgICAgICAgIG5hbWVGaWVsZEZvY3VzZWQgPSB2aWV3TW9kZWwuaXNOYW1lRmllbGRGb2N1c2VkXG4gICAyODRcdCAgICAgICAgICAgICAgICB9XG4gICAyODVcdCAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IG5hbWVGaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cbiAgIDI4Nlx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaXNOYW1lRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcbiAgIDI4N1x0ICAgICAgICAgICAgICAgIH1cbiAgIDI4OFx0ICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLmlzTmFtZUZpZWxkRm9jdXNlZCkgeyBuZXdWYWx1ZSBpblxuICAgMjg5XHQgICAgICAgICAgICAgICAgICAgIG5hbWVGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxuICAgMjkwXHQgICAgICAgICAgICAgICAgfVxuICAgMjkxXHQgICAgICAgICAgICB9XG4gICAyOTJcdCAgICAgICAgfVxuICAgMjkzXHQgICAgICAgIHJldHVybiB2aWV3XG4gICAyOTRcdCAgICB9XG4gICAyOTVcdFxuICAgMjk2XHQgICAgLy8gQXZhdGFyIEVkaXQgU2hlZXQgVmlld1xuICAgMjk3XHQgICAgcHJpdmF0ZSB2YXIgYXZhdGFyRWRpdFNoZWV0Vmlldzogc29tZSBWaWV3IHtcbiAgIDI5OFx0ICAgICAgICB2YXIgdmlldzogc29tZSBWaWV3IHtcbiAgIDI5OVx0XG4gICAzMDBcdCAgICAgICAgICAgIFZTdGFjayhzcGFjaW5nOiAyMCkge1xuICAgMzAxXHQgICAgICAgICAgICAgICAgVGV4dChcIkF2YXRhclwiKVxuICAgMzAyXHQgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZS5ib2xkKCkpXG4gICAzMDNcdCAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgIDMwNFx0ICAgICAgICAgICAgICAgIFZTdGFjayhzcGFjaW5nOiAwKSB7XG4gICAzMDVcdCAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgMzA2XHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2hvd0ltYWdlUGlja2VyV2l0aFNvdXJjZVR5cGUoLnBob3RvTGlicmFyeSlcbiAgIDMwN1x0ICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICAzMDhcdCAgICAgICAgICAgICAgICAgICAgICAgIEhTdGFjayB7XG4gICAzMDlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ2hvb3NlIHBob3RvXCIpXG4gICAzMTBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgIDMxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcigpXG4gICAzMTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbWFnZShzeXN0ZW1OYW1lOiBcInBob3RvXCIpXG4gICAzMTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgIDMxNFx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMzE1XHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICAzMTZcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMzE3XHQgICAgICAgICAgICAgICAgfVxuICAgMzE4XHQgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAzMTlcdCAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgMzIwXHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAzMjFcdCAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAzMjJcdCAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNob3dEZWxldGVBdmF0YXJDb25maXJtYXRpb25EaWFsb2coKVxuICAgMzIzXHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jbG9zZUF2YXRhckVkaXRvcigpXG4gICAzMjRcdCAgICAgICAgICAgICAgICB9KSB7XG4gICAzMjVcdCAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgIDMyNlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkRlbGV0ZSBhdmF0YXIgcGhvdG9cIilcbiAgIDMyN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnJlZClcbiAgIDMyOFx0ICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKClcbiAgIDMyOVx0ICAgICAgICAgICAgICAgICAgICAgICAgSW1hZ2Uoc3lzdGVtTmFtZTogXCJ0cmFzaFwiKVxuICAgMzMwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgMzMxXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDMzMlx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICAzMzNcdCAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAzMzRcdCAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDMzNVx0ICAgICAgICAgICAgICAgIH1cbiAgIDMzNlx0ICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMzM3XHQgICAgICAgICAgICAgICAgLmRpc2FibGVkKHZpZXdNb2RlbC5pc1VzaW5nRGVmYXVsdEF2YXRhcilcbiAgIDMzOFx0ICAgICAgICAgICAgICAgIC5vcGFjaXR5KHZpZXdNb2RlbC5pc1VzaW5nRGVmYXVsdEF2YXRhciA/IDAuNSA6IDEuMClcbiAgIDMzOVx0ICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAzNDBcdCAgICAgICAgICAgIH1cbiAgIDM0MVx0ICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICAzNDJcdCAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMzQzXHQgICAgICAgICAgICAucHJlc2VudGF0aW9uRGV0ZW50cyhbLm1lZGl1bV0pXG4gICAzNDRcdCAgICAgICAgfVxuICAgMzQ1XHQgICAgICAgIHJldHVybiB2aWV3XG4gICAzNDZcdCAgICB9XG4gICAzNDdcdFxuICAgMzQ4XHQgICAgLy8gUGhvbmUgTnVtYmVyIENoYW5nZSBWaWV3XG4gICAzNDlcdCAgICBwcml2YXRlIHZhciBwaG9uZU51bWJlckNoYW5nZVZpZXc6IHNvbWUgVmlldyB7XG4gICAzNTBcdCAgICAgICAgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3KClcbiAgIDM1MVx0ICAgICAgICAgICAgLm9uUmVjZWl2ZShOb3RpZmljYXRpb25DZW50ZXIuZGVmYXVsdC5wdWJsaXNoZXIoZm9yOiBOU05vdGlmaWNhdGlvbi5OYW1lKFwiUGhvbmVOdW1iZXJDaGFuZ2VkXCIpKSkgeyBub3RpZmljYXRpb24gaW5cbiAgIDM1Mlx0ICAgICAgICAgICAgICAgIGlmIGxldCB1c2VySW5mbyA9IG5vdGlmaWNhdGlvbi51c2VySW5mbyxcbiAgIDM1M1x0ICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IHVzZXJJbmZvW1wicGhvbmVcIl0gYXM/IFN0cmluZyxcbiAgIDM1NFx0ICAgICAgICAgICAgICAgICAgIGxldCByZWdpb24gPSB1c2VySW5mb1tcInJlZ2lvblwiXSBhcz8gU3RyaW5nIHtcbiAgIDM1NVx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBwaG9uZSwgcmVnaW9uOiByZWdpb24pXG4gICAzNTZcdCAgICAgICAgICAgICAgICB9XG4gICAzNTdcdCAgICAgICAgICAgIH1cbiAgIDM1OFx0ICAgIH1cbiAgIDM1OVx0fVxuICAgMzYwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDM2MFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxWVRxUmo4RjNUWUpHTDNCTG9nRkw5eSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy90b2prdXYvRG9jdW1lbnRzL0dpdEh1Yi9MaWZlU2lnbmFsIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy90b2prdXYvRG9jdW1lbnRzL0dpdEh1Yi9MaWZlU2lnbmFsIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjY3LCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy90b2prdXYvRG9jdW1lbnRzL0dpdEh1Yi9MaWZlU2lnbmFsIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMThUMDg6NDk6NDIuNTY5WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBQcm9maWxlVmlldy5zd2lmdCBmaWxlIHRvIHJlcGxhY2UgdGhlIFBob25lTnVtYmVyQ2hhbmdlVmlldyB3aXRoIGNvbXB1dGVkIHByb3BlcnRpZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZmU0OWViNjQtYzEwYi00ZGYyLWI3MmUtYmQ0NTAwNzlkZGQzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRXFwRHJNY3RaRXB3NllEellQaTkxbSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBpbXBvcnRzIG9yIGRlcGVuZGVuY2llcyBpbiBQaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnQgdGhhdCB3ZSBuZWVkIHRvIGFkZCB0byBQcm9maWxlVmlldy5zd2lmdC5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgdmVyaWZ5IHRoYXQgd2UndmUgc3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIGFsbCB0aGUgbmVjZXNzYXJ5IGNvZGUgZnJvbSB0aGUgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3IGFuZCBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbCB0byB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwuIExldCdzIGFsc28gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBpbXBvcnRzIG9yIG90aGVyIGRlcGVuZGVuY2llcyB3ZSBuZWVkIHRvIGFkZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnQuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAxXHRpbXBvcnQgU3dpZnRVSVxuICAgICAyXHRpbXBvcnQgRm91bmRhdGlvblxuICAgICAzXHRpbXBvcnQgUGhvdG9zVUlcbiAgICAgNFx0aW1wb3J0IENvbWJpbmVcbiAgICAgNVx0aW1wb3J0IFVJS2l0XG4gICAgIDZcdFxuICAgICA3XHQvLyBNQVJLOiAtIE1haW4gUHJvZmlsZSBWaWV3XG4gICAgIDhcdHN0cnVjdCBQcm9maWxlVmlldzogVmlldyB7XG4gICAgIDlcdCAgICBAU3RhdGVPYmplY3QgcHJpdmF0ZSB2YXIgdmlld01vZGVsID0gUHJvZmlsZVZpZXdNb2RlbCgpXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDhcdHN0cnVjdCBQcm9maWxlVmlldzogVmlldyB7XG4gICAgIDlcdCAgICBAU3RhdGVPYmplY3QgcHJpdmF0ZSB2YXIgdmlld01vZGVsID0gUHJvZmlsZVZpZXdNb2RlbCgpXG4gICAgMTBcdCAgICBARW52aXJvbm1lbnQoXFwucHJlc2VudGF0aW9uTW9kZSkgcHJpdmF0ZSB2YXIgcHJlc2VudGF0aW9uTW9kZVxuICAgIDExXHRcbiAgICAxMlx0ICAgIC8vIEZvY3VzIHN0YXRlc1xuICAgIDEzXHQgICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdGV4dEVkaXRvckZvY3VzZWQ6IEJvb2xcbiAgICAxNFx0ICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIG5hbWVGaWVsZEZvY3VzZWQ6IEJvb2xcbiAgICAxNVx0ICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHBob25lTnVtYmVyRmllbGRGb2N1c2VkOiBCb29sXG4gICAgMTZcdCAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciB2ZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkOiBCb29sXG4gICAgMTdcdFxuICAgIDE4XHQgICAgdmFyIGJvZHk6IHNvbWUgVmlldyB7XG4gICAgMTlcdCAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgMjBcdCAgICAgICAgICAgIFZTdGFjayB7XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzJdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAzNDRcdCAgICAgICAgfVxuICAgMzQ1XHQgICAgICAgIHJldHVybiB2aWV3XG4gICAzNDZcdCAgICB9XG4gICAzNDdcdFxuICAgMzQ4XHQgICAgLy8gUGhvbmUgTnVtYmVyIENoYW5nZSBWaWV3XG4gICAzNDlcdCAgICBwcml2YXRlIHZhciBwaG9uZU51bWJlckNoYW5nZVZpZXc6IHNvbWUgVmlldyB7XG4gICAzNTBcdCAgICAgICAgTmF2aWdhdGlvblN0YWNrIHtcbiAgIDM1MVx0ICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAzNTJcdCAgICAgICAgICAgICAgICBpZiAhdmlld01vZGVsLmlzQ29kZVNlbnQge1xuICAgMzUzXHQgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWwgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3XG4gICAzNTRcdCAgICAgICAgICAgICAgICAgICAgVlN0YWNrKGFsaWdubWVudDogLmxlYWRpbmcsIHNwYWNpbmc6IDE2KSB7XG4gICAzNTVcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDdXJyZW50IFBob25lIE51bWJlclwiKVxuICAgMzU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgMzU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAzNThcdFxuICAgMzU5XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5waG9uZS5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogdmlld01vZGVsLnBob25lKVxuICAgMzYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAzNjFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgMzYyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAzNjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSwgYWxpZ25tZW50OiAubGVhZGluZylcbiAgIDM2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMzY1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDM2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAzNjdcdFxuICAgMzY4XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiTmV3IFBob25lIE51bWJlclwiKVxuICAgMzY5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgMzcwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAzNzFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuICAgMzcyXHRcbiAgIDM3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnaW9uIHBpY2tlclxuICAgMzc0XHQgICAgICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgMzc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlJlZ2lvblwiKVxuICAgMzc2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgMzc3XHRcbiAgIDM3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcigpXG4gICAzNzlcdFxuICAgMzgwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyKFwiUmVnaW9uXCIsIHNlbGVjdGlvbjogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pIHtcbiAgIDM4MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JFYWNoKHZpZXdNb2RlbC5yZWdpb25zLCBpZDogXFwuMCkgeyByZWdpb24gaW5cbiAgIDM4Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlxcKHJlZ2lvbi4wKSAoXFwocmVnaW9uLjEpKVwiKS50YWcocmVnaW9uLjApXG4gICAzODNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMzg0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMzg1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBpY2tlclN0eWxlKE1lbnVQaWNrZXJTdHlsZSgpKVxuICAgMzg2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7IF8sIF8gaW5cbiAgIDM4N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlUmVnaW9uQ2hhbmdlKClcbiAgIDM4OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDM4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMzkwXHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDM5MVx0XG4gICAzOTJcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZCh2aWV3TW9kZWwucGhvbmVOdW1iZXJQbGFjZWhvbGRlciwgdGV4dDogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpXG4gICAzOTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcbiAgIDM5NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgMzk1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgIDM5Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMzk3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAzOThcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgMzk5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgIDQwMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tdWx0aWxpbmVUZXh0QWxpZ25tZW50KC5sZWFkaW5nKSAvLyBMZWZ0IGFsaWduIHRoZSB0ZXh0XG4gICA0MDFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQpXG4gICA0MDJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpIHsgXywgbmV3VmFsdWUgaW5cbiAgIDQwM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UobmV3VmFsdWU6IG5ld1ZhbHVlKVxuICAgNDA0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgNDA1XHRcbiAgIDQwNlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHlvdXIgbmV3IHBob25lIG51bWJlci4gV2UnbGwgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIGNvbmZpcm0uXCIpXG4gICA0MDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguY2FwdGlvbilcbiAgIDQwOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgIDQwOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgNDEwXHRcbiAgIDQxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGV0IGVycm9yTWVzc2FnZSA9IHZpZXdNb2RlbC5waG9uZUVycm9yTWVzc2FnZSB7XG4gICA0MTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KGVycm9yTWVzc2FnZSlcbiAgIDQxM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguY2FwdGlvbilcbiAgIDQxNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICA0MTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICA0MTZcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQxN1x0XG4gICA0MThcdCAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgIDQxOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgNDIwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNlbmRQaG9uZUNoYW5nZVZlcmlmaWNhdGlvbkNvZGUoKVxuICAgNDIxXHQgICAgICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICA0MjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5pc0xvYWRpbmcgPyBcIlNlbmRpbmcuLi5cIiA6IFwiU2VuZCBWZXJpZmljYXRpb24gQ29kZVwiKVxuICAgNDIzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgIDQyNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcbiAgIDQyNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgIDQyNlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICA0MjdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzUGhvbmVOdW1iZXJWYWxpZCA/IENvbG9yLmdyYXkgOiBDb2xvci5ibHVlKVxuICAgNDI4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTApXG4gICA0MjlcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQzMFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmRpc2FibGVkKHZpZXdNb2RlbC5pc0xvYWRpbmcgfHwgIXZpZXdNb2RlbC5pc1Bob25lTnVtYmVyVmFsaWQpXG4gICA0MzFcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDE2KVxuICAgNDMyXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQzM1x0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDQzNFx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgIDQzNVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0MzZcdCAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2F0aW9uIGNvZGUgdmlld1xuICAgNDM3XHQgICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiAxNikge1xuICAgNDM4XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVmVyaWZpY2F0aW9uIENvZGVcIilcbiAgIDQzOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgIDQ0MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgNDQxXHRcbiAgIDQ0Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIFxcKFBob25lRm9ybWF0dGVyLmZvcm1hdFBob25lTnVtYmVyKHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUsIHJlZ2lvbjogdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbikpXCIpXG4gICA0NDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDQ0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgNDQ1XHRcbiAgIDQ0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEZpZWxkKFwiWFhYLVhYWFwiLCB0ZXh0OiAkdmlld01vZGVsLnZlcmlmaWNhdGlvbkNvZGUpXG4gICA0NDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5udW1iZXJQYWQpXG4gICA0NDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDQ0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICA0NTBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDQ1MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgNDUyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDQ1M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICA0NTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZClcbiAgIDQ1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLnZlcmlmaWNhdGlvbkNvZGUpIHsgXywgbmV3VmFsdWUgaW5cbiAgIDQ1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaGFuZGxlVmVyaWZpY2F0aW9uQ29kZUNoYW5nZShuZXdWYWx1ZTogbmV3VmFsdWUpXG4gICA0NTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICA0NThcdFxuICAgNDU5XHQgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICA0NjBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDQ2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC52ZXJpZnlQaG9uZUNoYW5nZSgpXG4gICA0NjJcdCAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgIDQ2M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQodmlld01vZGVsLmlzTG9hZGluZyA/IFwiVmVyaWZ5aW5nLi4uXCIgOiBcIlZlcmlmeSBDb2RlXCIpXG4gICA0NjRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgNDY1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgNDY2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxuICAgNDY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgIDQ2OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICF2aWV3TW9kZWwuaXNWZXJpZmljYXRpb25Db2RlVmFsaWQgPyBDb2xvci5ncmF5IDogQ29sb3IuYmx1ZSlcbiAgIDQ2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgNDcwXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICA0NzFcdCAgICAgICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICF2aWV3TW9kZWwuaXNWZXJpZmljYXRpb25Db2RlVmFsaWQpXG4gICA0NzJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDE2KVxuICAgNDczXHRcbiAgIDQ3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgNDc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmNhbmNlbFBob25lTnVtYmVyQ2hhbmdlKClcbiAgIDQ3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgNDc3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkNhbmNlbFwiKVxuICAgNDc4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5zdWJoZWFkbGluZSlcbiAgIDQ3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5ibHVlKVxuICAgNDgwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxuICAgNDgxXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICA0ODJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXG4gICA0ODNcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgNDg0XHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgNDg1XHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgNDg2XHQgICAgICAgICAgICAgICAgfVxuICAgNDg3XHRcbiAgIDQ4OFx0ICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICA0ODlcdCAgICAgICAgICAgIH1cbiAgIDQ5MFx0ICAgICAgICAgICAgLm5hdmlnYXRpb25CYXJUaXRsZURpc3BsYXlNb2RlKC5pbmxpbmUpXG4gICA0OTFcdCAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXCIpXG4gICA0OTJcdCAgICAgICAgICAgIC50b29sYmFyIHtcbiAgIDQ5M1x0ICAgICAgICAgICAgICAgIFRvb2xiYXJJdGVtKHBsYWNlbWVudDogLm5hdmlnYXRpb25CYXJMZWFkaW5nKSB7XG4gICA0OTRcdCAgICAgICAgICAgICAgICAgICAgQnV0dG9uKFwiQ2FuY2VsXCIpIHtcbiAgIDQ5NVx0ICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICA0OTZcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jYW5jZWxQaG9uZU51bWJlckNoYW5nZSgpXG4gICA0OTdcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgNDk4XHQgICAgICAgICAgICAgICAgfVxuICAgNDk5XHQgICAgICAgICAgICB9XG4gICA1MDBcdCAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgNTAxXHQgICAgICAgICAgICAub25BcHBlYXIge1xuICAgNTAyXHQgICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgZm9jdXMgc3RhdGVzIHRvIHRoZSB2aWV3IG1vZGVsJ3MgZm9jdXMgc3RhdGVzXG4gICA1MDNcdCAgICAgICAgICAgICAgICBwaG9uZU51bWJlckZpZWxkRm9jdXNlZCA9IHZpZXdNb2RlbC5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkXG4gICA1MDRcdCAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkID0gdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZFxuICAgNTA1XHQgICAgICAgICAgICB9XG4gICA1MDZcdCAgICAgICAgICAgIC5vbkNoYW5nZShvZjogcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cbiAgIDUwN1x0ICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcbiAgIDUwOFx0ICAgICAgICAgICAgfVxuICAgNTA5XHQgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICA1MTBcdCAgICAgICAgICAgICAgICBwaG9uZU51bWJlckZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICA1MTFcdCAgICAgICAgICAgIH1cbiAgIDUxMlx0ICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2ZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICA1MTNcdCAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaXNWZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcbiAgIDUxNFx0ICAgICAgICAgICAgfVxuICAgNTE1XHQgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5pc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cbiAgIDUxNlx0ICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxuICAgNTE3XHQgICAgICAgICAgICB9XG4gICA1MThcdCAgICAgICAgfVxuICAgNTE5XHQgICAgfVxuICAgNTIwXHR9XG4gICA1MjFcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFHR3B5VHI0OVNkNktzZWJKUjlTZnh2In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwiLCJmb2xkZXJSb290IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjcsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3Rvamt1di9Eb2N1bWVudHMvR2l0SHViL0xpZmVTaWduYWwifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xOFQwODo1MDoxNy41MTdaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyB2ZXJpZnkgdGhhdCB3ZSd2ZSBzdWNjZXNzZnVsbHkgbWlncmF0ZWQgYWxsIHRoZSBuZWNlc3NhcnkgY29kZSBmcm9tIHRoZSBQaG9uZU51bWJlckNoYW5nZVZpZXcgYW5kIFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsIHRvIHRoZSBQcm9maWxlVmlldyBhbmQgUHJvZmlsZVZpZXdNb2RlbC4gTGV0J3MgYWxzbyBjaGVjayBpZiB0aGVyZSBhcmUgYW55IGltcG9ydHMgb3Igb3RoZXIgZGVwZW5kZW5jaWVzIHdlIG5lZWQgdG8gYWRkOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjdjNWM4OThhLTkxNzQtNDUwYi05NjBjLTlkZWU2ODMwMTdlMCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkFsbCB0aGUgbmVjZXNzYXJ5IGltcG9ydHMgYW5kIGRlcGVuZGVuY2llcyBhcmUgYWxyZWFkeSBpbmNsdWRlZCBpbiB0aGUgUHJvZmlsZVZpZXcuc3dpZnQgZmlsZS4gVGhlIG1pZ3JhdGlvbiBpcyBjb21wbGV0ZSwgYW5kIHdlJ3ZlIHN1Y2Nlc3NmdWxseSBtb3ZlZCB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSBmdW5jdGlvbmFsaXR5IGZyb20gdGhlIHNlcGFyYXRlIFBob25lTnVtYmVyQ2hhbmdlVmlldyBhbmQgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwgZmlsZXMgaW50byB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwgZmlsZXMgYXMgY29tcHV0ZWQgcHJvcGVydGllcy5cblxuTGV0J3Mgc3VtbWFyaXplIHdoYXQgd2UndmUgZG9uZTpcblxuIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbjEuICoqUHJvZmlsZVZpZXdNb2RlbC5zd2lmdCoqOlxuICAgLSBBZGRlZCBwaG9uZSBudW1iZXIgY2hhbmdlIHByb3BlcnRpZXMgKGVkaXRpbmdQaG9uZSwgZWRpdGluZ1Bob25lUmVnaW9uLCBpc0NvZGVTZW50LCB2ZXJpZmljYXRpb25Db2RlLCBldGMuKVxuICAgLSBBZGRlZCBjb21wdXRlZCBwcm9wZXJ0aWVzIGZvciBwaG9uZSBudW1iZXIgdmFsaWRhdGlvbiBhbmQgZm9ybWF0dGluZ1xuICAgLSBBZGRlZCBtZXRob2RzIGZvciBoYW5kbGluZyBwaG9uZSBudW1iZXIgY2hhbmdlLCB2ZXJpZmljYXRpb24gY29kZSwgYW5kIHJlZ2lvbiBzZWxlY3Rpb25cbiAgIC0gQWRkZWQgcGhvbmUgbnVtYmVyIGZvcm1hdHRpbmcgbWV0aG9kcyBmb3IgZGlmZmVyZW50IHJlZ2lvbnNcblxuMi4gKipQcm9maWxlVmlldy5zd2lmdCoqOlxuICAgLSBBZGRlZCBmb2N1cyBzdGF0ZXMgZm9yIHBob25lIG51bWJlciBhbmQgdmVyaWZpY2F0aW9uIGNvZGUgZmllbGRzXG4gICAtIFJlcGxhY2VkIHRoZSBQaG9uZU51bWJlckNoYW5nZVZpZXcgd2l0aCBhIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgY29udGFpbnMgYWxsIHRoZSBVSSBjb21wb25lbnRzXG4gICAtIEltcGxlbWVudGVkIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZsb3cgd2l0aCBwcm9wZXIgdmFsaWRhdGlvbiBhbmQgZmVlZGJhY2tcblxuIyMgVmVyaWZpY2F0aW9uXG5cblRoZSBtaWdyYXRpb24gaXMgbm93IGNvbXBsZXRlLiBUaGUgcGhvbmUgbnVtYmVyIGNoYW5nZSBmdW5jdGlvbmFsaXR5IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBtb3ZlZCBmcm9tIHRoZSBzZXBhcmF0ZSBmaWxlcyBpbnRvIHRoZSBQcm9maWxlVmlldyBhbmQgUHJvZmlsZVZpZXdNb2RlbCBmaWxlcy4gVGhlIGZ1bmN0aW9uYWxpdHkgc2hvdWxkIHdvcmsgdGhlIHNhbWUgYXMgYmVmb3JlLCBidXQgbm93IGl0J3MgaW50ZWdyYXRlZCBkaXJlY3RseSBpbnRvIHRoZSBwcm9maWxlIHZpZXcgYW5kIHZpZXcgbW9kZWwuXG5cbkhlcmUncyB3aGF0IHdlJ3ZlIGFjY29tcGxpc2hlZDpcblxuMS4gTWlncmF0ZWQgYWxsIHN0YXRlIGZyb20gUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwgdG8gUHJvZmlsZVZpZXdNb2RlbFxuMi4gTWlncmF0ZWQgYWxsIFVJIGNvbXBvbmVudHMgZnJvbSBQaG9uZU51bWJlckNoYW5nZVZpZXcgdG8gUHJvZmlsZVZpZXcgYXMgY29tcHV0ZWQgcHJvcGVydGllc1xuMy4gRW5zdXJlZCBhbGwgZnVuY3Rpb25hbGl0eSBpcyBwcmVzZXJ2ZWQsIGluY2x1ZGluZzpcbiAgIC0gUGhvbmUgbnVtYmVyIHZhbGlkYXRpb24gYW5kIGZvcm1hdHRpbmdcbiAgIC0gVmVyaWZpY2F0aW9uIGNvZGUgaGFuZGxpbmdcbiAgIC0gUmVnaW9uIHNlbGVjdGlvblxuICAgLSBFcnJvciBoYW5kbGluZ1xuICAgLSBGb2N1cyBtYW5hZ2VtZW50XG4gICAtIEhhcHRpYyBmZWVkYmFja1xuXG5UaGUgY29kZSBpcyBub3cgbW9yZSBtYWludGFpbmFibGUgYW5kIGZvbGxvd3MgdGhlIE1WVk0gcGF0dGVybiBtb3JlIGNsb3NlbHksIHdpdGggYWxsIHByb2ZpbGUtcmVsYXRlZCBmdW5jdGlvbmFsaXR5IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFByb2ZpbGVWaWV3IGFuZCBQcm9maWxlVmlld01vZGVsIGZpbGVzLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IEZvdW5kYXRpb25cblxuLy8vIEEgdmlldyBmb3IgY2hhbmdpbmcgdGhlIHVzZXIncyBwaG9uZSBudW1iZXJcbnN0cnVjdCBQaG9uZU51bWJlckNoYW5nZVZpZXc6IFZpZXcge1xuICAgIC8vLyBUaGUgdmlldyBtb2RlbFxuICAgIEBTdGF0ZU9iamVjdCBwcml2YXRlIHZhciB2aWV3TW9kZWw6IFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsXG5cbiAgICAvLy8gRGlzbWlzcyBhY3Rpb25cbiAgICBARW52aXJvbm1lbnQoXFwuZGlzbWlzcykgcHJpdmF0ZSB2YXIgZGlzbWlzc1xuXG4gICAgLy8vIEZvY3VzIHN0YXRlIGZvciB0aGUgcGhvbmUgbnVtYmVyIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQ6IEJvb2xcblxuICAgIC8vLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbFxuXG4gICAgLy8vIEluaXRpYWxpemUgd2l0aCBhIHZpZXcgbW9kZWxcbiAgICBpbml0KGN1cnJlbnRQaG9uZTogU3RyaW5nLCBjdXJyZW50UGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIiwgb25QaG9uZU51bWJlckNoYW5nZWQ6ICgoU3RyaW5nLCBTdHJpbmcpIC0+IFZvaWQpPyA9IG5pbCkge1xuICAgICAgICBsZXQgdmlld01vZGVsID0gUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwoXG4gICAgICAgICAgICBjdXJyZW50UGhvbmU6IGN1cnJlbnRQaG9uZSxcbiAgICAgICAgICAgIGN1cnJlbnRQaG9uZVJlZ2lvbjogY3VycmVudFBob25lUmVnaW9uLFxuICAgICAgICAgICAgb25QaG9uZU51bWJlckNoYW5nZWQ6IG9uUGhvbmVOdW1iZXJDaGFuZ2VkLFxuICAgICAgICAgICAgb25EaXNtaXNzOiBuaWxcbiAgICAgICAgKVxuICAgICAgICBfdmlld01vZGVsID0gU3RhdGVPYmplY3Qod3JhcHBlZFZhbHVlOiB2aWV3TW9kZWwpXG4gICAgfVxuXG4gICAgdmFyIGJvZHk6IHNvbWUgVmlldyB7XG4gICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3lzdGVtIGdyb3VwZWQgYmFja2dyb3VuZCBmb3IgdGhlIG1haW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpXG4gICAgICAgICAgICAgICAgICAgIC5lZGdlc0lnbm9yaW5nU2FmZUFyZWEoLmFsbClcbiAgICAgICAgICAgICAgICAgICAgLmZyYW1lKGhlaWdodDogMCkgLy8gWmVybyBoZWlnaHQgdG8gbm90IHRha2UgdXAgc3BhY2VcbiAgICAgICAgICAgICAgICBpZiAhdmlld01vZGVsLmlzQ29kZVNlbnQge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDdXJyZW50IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwuY3VycmVudFBob25lLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiB2aWV3TW9kZWwuY3VycmVudFBob25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHksIGFsaWdubWVudDogLmxlYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiTmV3IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpb24gcGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJSZWdpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyKFwiUmVnaW9uXCIsIHNlbGVjdGlvbjogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yRWFjaCh2aWV3TW9kZWwucmVnaW9ucywgaWQ6IFxcLjApIHsgcmVnaW9uIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiXFwocmVnaW9uLjApIChcXChyZWdpb24uMSkpXCIpLnRhZyhyZWdpb24uMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlja2VyU3R5bGUoTWVudVBpY2tlclN0eWxlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7IF8sIF8gaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2suc2VsZWN0aW9uRmVlZGJhY2soKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoZ2V0UGhvbmVOdW1iZXJQbGFjZWhvbGRlcigpLCB0ZXh0OiAkdmlld01vZGVsLmVkaXRpbmdQaG9uZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlsaW5lVGV4dEFsaWdubWVudCgubGVhZGluZykgLy8gTGVmdCBhbGlnbiB0aGUgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1c2VkKCRwaG9uZU51bWJlckZpZWxkRm9jdXNlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpIHsgbmV3VmFsdWUgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYTogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVUs6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRBVVBob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHlvdXIgbmV3IHBob25lIG51bWJlci4gV2UnbGwgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIGNvbmZpcm0uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsZXQgZXJyb3JNZXNzYWdlID0gdmlld01vZGVsLmVycm9yTWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwudmVyaWZ5UGhvbmVDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJWZXJpZnkgQ29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICFpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZCA/IENvbG9yLmdyYXkgOiBDb2xvci5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpc2FibGVkKHZpZXdNb2RlbC5pc0xvYWRpbmcgfHwgIWlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMTYpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXCIpXG4gICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgIC50b29sYmFyIHtcbiAgICAgICAgICAgICAgICBUb29sYmFySXRlbShwbGFjZW1lbnQ6IC5uYXZpZ2F0aW9uQmFyTGVhZGluZykge1xuICAgICAgICAgICAgICAgICAgICBCdXR0b24oXCJDYW5jZWxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgIC8vLyBDb21wdXRlZCBwcm9wZXJ0eSB0byBjaGVjayBpZiB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgdmFsaWRcbiAgICBwcml2YXRlIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZDogQm9vbCB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICAgICAgcmV0dXJuIHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPT0gNlxuICAgIH1cblxuICAgIC8vLyBHZXQgdGhlIHBob25lIG51bWJlciBwbGFjZWhvbGRlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgcHJpdmF0ZSBmdW5jIGdldFBob25lTnVtYmVyUGxhY2Vob2xkZXIoKSAtPiBTdHJpbmcge1xuICAgICAgICBzd2l0Y2ggdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGFcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFhYLVhYWC1YWFhcIiAvLyBGb3JtYXQgZm9yIFVLXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWC1YWFgtWFhYWFwiIC8vIERlZmF1bHQgZm9ybWF0XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0XG4uLi5cblxuICAgIC8vLyBWZXJpZnkgdGhlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICBmdW5jIHZlcmlmeVBob25lQ2hhbmdlKCkge1xuICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHZlcmlmeSB0aGUgY29kZSB3aXRoIHRoZSBzZXJ2ZXJcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgZGVsYXlcbiAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgICAgICAgICAgc2VsZi5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgaWYgIXNlbGYuZWRpdGluZ1Bob25lLmlzRW1wdHkgJiYgc2VsZi52ZXJpZmljYXRpb25Db2RlLmNvdW50ID49IDQge1xuICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRQaG9uZSA9IFBob25lRm9ybWF0dGVyLmZvcm1hdFBob25lTnVtYmVyKHNlbGYuZWRpdGluZ1Bob25lLCByZWdpb246IHNlbGYuZWRpdGluZ1Bob25lUmVnaW9uKVxuICAgICAgICAgICAgICAgIHNlbGYub25QaG9uZU51bWJlckNoYW5nZWQ/KGZvcm1hdHRlZFBob25lLCBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgICAgICAgICAgICAgICBzZWxmLm9uRGlzbWlzcz8oKVxuICAgICAgICAgICAgICAgIGlmIGxldCBkaXNtaXNzID0gc2VsZi5kaXNtaXNzQWN0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgdGV4dCBjaGFuZ2VcbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgIHN3aXRjaCBlZGl0aW5nUGhvbmVSZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJVS1wiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICBmb3JtYXRVS1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdEFVUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBMaWZlU2lnbmFsL0xpZmVTaWduYWwvRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0XG4uLi5cblxuICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgICAgICBpZiBzdG9yZS5wcm9maWxlID09IG5pbCB8fCAoc3RvcmUudXNlckRhdGEubmFtZS5pc0VtcHR5ICYmIHN0b3JlLmlzTG9hZGluZykge1xuICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHZpZXcgd2hlbiB1c2VyIGRhdGEgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAgICAgUHJvZ3Jlc3NWaWV3KFwiTG9hZGluZyBwcm9maWxlLi4uXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICBWU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm9maWxlIEhlYWRlclxuICAgICAgICAgICAgICAgICAgICBWU3RhY2soc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENpcmNsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbGwoQ29sb3IoVUlDb2xvci5zeXN0ZW1CYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUod2lkdGg6IDgwLCBoZWlnaHQ6IDgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vdmVybGF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFN0cmluZyhzdG9yZS51c2VyRGF0YS5uYW1lLnByZWZpeCgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnRpdGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3ZlcmxheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2lyY2xlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHJva2UoQ29sb3IuYmx1ZSwgbGluZVdpZHRoOiAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoc3RvcmUudXNlckRhdGEubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHN0b3JlLnVzZXJEYXRhLnBob25lTnVtYmVyLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiBzdG9yZS51c2VyRGF0YS5waG9uZU51bWJlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IExpZmVTaWduYWwvTGlmZVNpZ25hbC9Db3JlL0hhcHRpY0ZlZWRiYWNrL0hhcHRpY0ZlZWRiYWNrQ2xpZW50LnN3aWZ0XG5pbXBvcnQgVUlLaXRcbmltcG9ydCBDb21wb3NhYmxlQXJjaGl0ZWN0dXJlXG5cbi8vLyBBIGNsaWVudCBmb3IgaGFwdGljIGZlZWRiYWNrXG5ARGVwZW5kZW5jeUNsaWVudFxuc3RydWN0IEhhcHRpY0ZlZWRiYWNrQ2xpZW50OiBTZW5kYWJsZSB7XG4gICAgLy8vIFRyaWdnZXIgYSBsaWdodCBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIGxpZ2h0SW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIG1lZGl1bSBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIG1lZGl1bUltcGFjdDogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSBoZWF2eSBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIGhlYXZ5SW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgc2VsZWN0aW9uRmVlZGJhY2s6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBub3RpZmljYXRpb25GZWVkYmFjazogQFNlbmRhYmxlIChfIHR5cGU6IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IuRmVlZGJhY2tUeXBlKSAtPiBWb2lkID0geyBfIGluIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgc3VjY2VzcyBub3RpZmljYXRpb24gaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIHN1Y2Nlc3M6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cbi4uLlxuXG5leHRlbnNpb24gSGFwdGljRmVlZGJhY2tDbGllbnQge1xuICAgIC8vLyBUaGUgbGl2ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgaGFwdGljIGNsaWVudFxuICAgIHN0YXRpYyBsZXQgbGl2ZSA9IEhhcHRpY0NsaWVudChcbiAgICAgICAgbGlnaHRJbXBhY3Q6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IC5saWdodClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG1lZGl1bUltcGFjdDoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLm1lZGl1bSlcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhlYXZ5SW1wYWN0OiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAuaGVhdnkpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3Rpb25GZWVkYmFjazoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlTZWxlY3Rpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLnNlbGVjdGlvbkNoYW5nZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiB7IHR5cGUgaW5cbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCh0eXBlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCguc3VjY2VzcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB3YXJuaW5nOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLndhcm5pbmcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCguZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApXG59XG5cbi8vIE1BUks6IC0gTW9jayBJbXBsZW1lbnRhdGlvblxuXG5leHRlbnNpb24gSGFwdGljRmVlZGJhY2tDbGllbnQge1xuICAgIC8vLyBBIG1vY2sgaW1wbGVtZW50YXRpb24gdGhhdCBkb2VzIG5vdGhpbmcsIGZvciB0ZXN0aW5nXG4gICAgc3RhdGljIGxldCBtb2NrID0gU2VsZihcbiAgICAgICAgbGlnaHRJbXBhY3Q6IHt9LFxuICAgICAgICBtZWRpdW1JbXBhY3Q6IHt9LFxuICAgICAgICBoZWF2eUltcGFjdDoge30sXG4gICAgICAgIHNlbGVjdGlvbkZlZWRiYWNrOiB7fSxcbiAgICAgICAgbm90aWZpY2F0aW9uRmVlZGJhY2s6IHsgXyBpbiB9LFxuICAgICAgICBzdWNjZXNzOiB7fSxcbiAgICAgICAgd2FybmluZzoge30sXG4gICAgICAgIGVycm9yOiB7fVxuICAgIClcbn1cblxuLy8gTUFSSzogLSBEZXBlbmRlbmN5IFJlZ2lzdHJhdGlvblxuXG5leHRlbnNpb24gRGVwZW5kZW5jeVZhbHVlcyB7XG4gICAgLy8vIFRoZSBoYXB0aWMgY2xpZW50IGRlcGVuZGVuY3lcbiAgICB2YXIgaGFwdGljOiBIYXB0aWNDbGllbnQge1xuICAgICAgICBnZXQgeyBzZWxmW0hhcHRpY0NsaWVudC5zZWxmXSB9XG4gICAgICAgIHNldCB7IHNlbGZbSGFwdGljQ2xpZW50LnNlbGZdID0gbmV3VmFsdWUgfVxuICAgIH1cbn1cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50OiBEZXBlbmRlbmN5S2V5IHtcbiAgICAvLy8gVGhlIGxpdmUgdmFsdWUgb2YgdGhlIGhhcHRpYyBjbGllbnRcbiAgICBzdGF0aWMgdmFyIGxpdmVWYWx1ZTogSGFwdGljQ2xpZW50IHtcbiAgICAgICAgcmV0dXJuIC5saXZlXG4gICAgfVxuXG4gICAgLy8vIFRoZSB0ZXN0IHZhbHVlIG9mIHRoZSBoYXB0aWMgY2xpZW50XG4gICAgc3RhdGljIHZhciB0ZXN0VmFsdWU6IEhhcHRpY0NsaWVudCB7XG4gICAgICAgIHJldHVybiAubW9ja1xuICAgIH1cbn1cblxuLy8gTUFSSzogLSBHbG9iYWwgQ29udmVuaWVuY2UgRnVuY3Rpb25cblxuLy8vIEdsb2JhbCBmdW5jdGlvbiB0byB0cmlnZ2VyIGEgc3RhbmRhcmQgaGFwdGljIGZlZWRiYWNrXG5mdW5jIHRyaWdnZXJIYXB0aWMoKSB7XG4gICAgQERlcGVuZGVuY3koXFwuaGFwdGljKSB2YXIgaGFwdGljXG4gICAgaGFwdGljLm1lZGl1bUltcGFjdCgpXG59XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vQ29yZS9VdGlsaXRpZXMvUGhvbmVGb3JtYXR0ZXIuc3dpZnRcbmltcG9ydCBGb3VuZGF0aW9uXG5cbi8vLyBVdGlsaXR5IGZvciBmb3JtYXR0aW5nIHBob25lIG51bWJlcnNcbnN0cnVjdCBQaG9uZUZvcm1hdHRlciB7XG4gICAgLy8vIEZvcm1hdCBhIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgcmVnaW9uXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHBob25lTnVtYmVyOiBUaGUgcGhvbmUgbnVtYmVyIHRvIGZvcm1hdFxuICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcmVnaW9uIGNvZGUgKGUuZy4sIFwiVVNcIiwgXCJVS1wiKVxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBzdGF0aWMgZnVuYyBmb3JtYXRQaG9uZU51bWJlcihfIHBob25lTnVtYmVyOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICAvLyBSZW1vdmUgYW55IG5vbi1kaWdpdCBjaGFyYWN0ZXJzXG4gICAgICAgIGxldCBkaWdpdHMgPSBwaG9uZU51bWJlci5maWx0ZXIgeyAkMC5pc051bWJlciB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBlbXB0eSwgcmV0dXJuIGVtcHR5IHN0cmluZ1xuICAgICAgICBpZiBkaWdpdHMuaXNFbXB0eSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXQgYmFzZWQgb24gcmVnaW9uXG4gICAgICAgIHN3aXRjaCByZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFVTUGhvbmVOdW1iZXIoZGlnaXRzKVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRVS1Bob25lTnVtYmVyKGRpZ2l0cylcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0QVVQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VVNQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXJcbiAgICAvLy8gLSBQYXJhbWV0ZXIgZGlnaXRzOiBUaGUgZGlnaXRzIHRvIGZvcm1hdFxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBwcml2YXRlIHN0YXRpYyBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBkaWdpdHM6IFN0cmluZykgLT4gU3RyaW5nIHtcbiAgICAgICAgbGV0IGxpbWl0ZWREaWdpdHMgPSBTdHJpbmcoZGlnaXRzLnByZWZpeCgxMCkpXG4gICAgICAgIFxuICAgICAgICBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID09IDEwIHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWREaWdpdHMucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICByZXR1cm4gXCIrMSAoXFwoYXJlYUNvZGUpKSBcXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIisxIFxcKGxpbWl0ZWREaWdpdHMpXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4uLi5cbiAgICBcbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyXG4gICAgLy8vIC0gUGFyYW1ldGVyIGRpZ2l0czogVGhlIGRpZ2l0cyB0byBmb3JtYXRcbiAgICAvLy8gLSBSZXR1cm5zOiBBIGZvcm1hdHRlZCBwaG9uZSBudW1iZXIgc3RyaW5nXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZGlnaXRzOiBTdHJpbmcpIC0+IFN0cmluZyB7XG4gICAgICAgIGxldCBsaW1pdGVkRGlnaXRzID0gU3RyaW5nKGRpZ2l0cy5wcmVmaXgoMTApKVxuICAgICAgICBcbiAgICAgICAgaWYgbGltaXRlZERpZ2l0cy5jb3VudCA9PSAxMCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRGlnaXRzLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgcmV0dXJuIFwiKzYxIFxcKGFyZWFDb2RlKSBcXChwcmVmaXgpIFxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIis2MSBcXChsaW1pdGVkRGlnaXRzKVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlldy5zd2lmdFxuLi4uXG5cbiAgICB2YXIgYm9keTogc29tZSBWaWV3IHtcbiAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgICAgICAgICBWU3RhY2sge1xuICAgICAgICAgICAgICAgIC8vIFByb2ZpbGUgSGVhZGVyXG4gICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIENvbW1vbkF2YXRhclZpZXcoXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2aWV3TW9kZWwubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB2aWV3TW9kZWwuYXZhdGFySW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiA4MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQ29sb3IuYmx1ZS5vcGFjaXR5KDAuMSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IC5ibHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogLmJsdWVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5waG9uZS5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogdmlld01vZGVsLnBob25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnN1YmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgIH1cbi4uLlxuICAgICAgICAuYWxlcnQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0NoZWNrSW5Db25maXJtYXRpb24pIHtcbiAgICAgICAgICAgIEFsZXJ0KFxuICAgICAgICAgICAgICAgIHRpdGxlOiBUZXh0KFwiQ29uZmlybSBDaGVjay1pblwiKSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBUZXh0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNoZWNrIGluIG5vdz8gVGhpcyB3aWxsIHJlc2V0IHlvdXIgdGltZXIuXCIpLFxuICAgICAgICAgICAgICAgIHByaW1hcnlCdXR0b246IC5kZWZhdWx0KFRleHQoXCJDaGVjayBJblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHZpZXcgbW9kZWwgaW4gYSByZWFsIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZWNvbmRhcnlCdXR0b246IC5jYW5jZWwoKVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIC5hbGVydChcIlNpZ24gT3V0XCIsIGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dTaWduT3V0Q29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICBCdXR0b24oXCJDYW5jZWxcIiwgcm9sZTogLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEJ1dHRvbihcIlNpZ24gT3V0XCIsIHJvbGU6IC5kZXN0cnVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaWduT3V0KClcbiAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIHRvIHNpZ24taW4gc2NyZWVuIHdvdWxkIGJlIGhhbmRsZWQgYnkgYSBjb29yZGluYXRvciBvciBwYXJlbnQgdmlld1xuICAgICAgICAgICAgfVxuICAgICAgICB9IG1lc3NhZ2U6IHtcbiAgICAgICAgICAgIFRleHQoXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2lnbiBvdXQ/XCIpXG4gICAgICAgIH1cbiAgICAgICAgLnNoZWV0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dFZGl0RGVzY3JpcHRpb25TaGVldCkge1xuICAgICAgICAgICAgZW1lcmdlbmN5Tm90ZVNoZWV0Vmlld1xuICAgICAgICB9XG4gICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93RWRpdE5hbWVTaGVldCkge1xuICAgICAgICAgICAgbmFtZUVkaXRTaGVldFZpZXdcbiAgICAgICAgfVxuICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0VkaXRBdmF0YXJTaGVldCkge1xuICAgICAgICAgICAgYXZhdGFyRWRpdFNoZWV0Vmlld1xuICAgICAgICB9XG4gICAgICAgIC5zaGVldChpc1ByZS4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUVxcERyTWN0WkVwdzZZRHpZUGk5MW0ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvdG9qa3V2L0RvY3VtZW50cy9HaXRIdWIvTGlmZVNpZ25hbCIsImZvbGRlclJvb3QiOiIvVXNlcnMvdG9qa3V2L0RvY3VtZW50cy9HaXRIdWIvTGlmZVNpZ25hbCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NywiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvdG9qa3V2L0RvY3VtZW50cy9HaXRIdWIvTGlmZVNpZ25hbCJ9fX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTE4VDA4OjUwOjI1LjI0MFoiLCJyZXNwb25zZV90ZXh0IjoiQWxsIHRoZSBuZWNlc3NhcnkgaW1wb3J0cyBhbmQgZGVwZW5kZW5jaWVzIGFyZSBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBQcm9maWxlVmlldy5zd2lmdCBmaWxlLiBUaGUgbWlncmF0aW9uIGlzIGNvbXBsZXRlLCBhbmQgd2UndmUgc3VjY2Vzc2Z1bGx5IG1vdmVkIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgZnJvbSB0aGUgc2VwYXJhdGUgUGhvbmVOdW1iZXJDaGFuZ2VWaWV3IGFuZCBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbCBmaWxlcyBpbnRvIHRoZSBQcm9maWxlVmlldyBhbmQgUHJvZmlsZVZpZXdNb2RlbCBmaWxlcyBhcyBjb21wdXRlZCBwcm9wZXJ0aWVzLlxuXG5MZXQncyBzdW1tYXJpemUgd2hhdCB3ZSd2ZSBkb25lOlxuXG4jIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuMS4gKipQcm9maWxlVmlld01vZGVsLnN3aWZ0Kio6XG4gICAtIEFkZGVkIHBob25lIG51bWJlciBjaGFuZ2UgcHJvcGVydGllcyAoZWRpdGluZ1Bob25lLCBlZGl0aW5nUGhvbmVSZWdpb24sIGlzQ29kZVNlbnQsIHZlcmlmaWNhdGlvbkNvZGUsIGV0Yy4pXG4gICAtIEFkZGVkIGNvbXB1dGVkIHByb3BlcnRpZXMgZm9yIHBob25lIG51bWJlciB2YWxpZGF0aW9uIGFuZCBmb3JtYXR0aW5nXG4gICAtIEFkZGVkIG1ldGhvZHMgZm9yIGhhbmRsaW5nIHBob25lIG51bWJlciBjaGFuZ2UsIHZlcmlmaWNhdGlvbiBjb2RlLCBhbmQgcmVnaW9uIHNlbGVjdGlvblxuICAgLSBBZGRlZCBwaG9uZSBudW1iZXIgZm9ybWF0dGluZyBtZXRob2RzIGZvciBkaWZmZXJlbnQgcmVnaW9uc1xuXG4yLiAqKlByb2ZpbGVWaWV3LnN3aWZ0Kio6XG4gICAtIEFkZGVkIGZvY3VzIHN0YXRlcyBmb3IgcGhvbmUgbnVtYmVyIGFuZCB2ZXJpZmljYXRpb24gY29kZSBmaWVsZHNcbiAgIC0gUmVwbGFjZWQgdGhlIFBob25lTnVtYmVyQ2hhbmdlVmlldyB3aXRoIGEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCBjb250YWlucyBhbGwgdGhlIFVJIGNvbXBvbmVudHNcbiAgIC0gSW1wbGVtZW50ZWQgdGhlIHBob25lIG51bWJlciBjaGFuZ2UgZmxvdyB3aXRoIHByb3BlciB2YWxpZGF0aW9uIGFuZCBmZWVkYmFja1xuXG4jIyBWZXJpZmljYXRpb25cblxuVGhlIG1pZ3JhdGlvbiBpcyBub3cgY29tcGxldGUuIFRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IG1vdmVkIGZyb20gdGhlIHNlcGFyYXRlIGZpbGVzIGludG8gdGhlIFByb2ZpbGVWaWV3IGFuZCBQcm9maWxlVmlld01vZGVsIGZpbGVzLiBUaGUgZnVuY3Rpb25hbGl0eSBzaG91bGQgd29yayB0aGUgc2FtZSBhcyBiZWZvcmUsIGJ1dCBub3cgaXQncyBpbnRlZ3JhdGVkIGRpcmVjdGx5IGludG8gdGhlIHByb2ZpbGUgdmlldyBhbmQgdmlldyBtb2RlbC5cblxuSGVyZSdzIHdoYXQgd2UndmUgYWNjb21wbGlzaGVkOlxuXG4xLiBNaWdyYXRlZCBhbGwgc3RhdGUgZnJvbSBQaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbCB0byBQcm9maWxlVmlld01vZGVsXG4yLiBNaWdyYXRlZCBhbGwgVUkgY29tcG9uZW50cyBmcm9tIFBob25lTnVtYmVyQ2hhbmdlVmlldyB0byBQcm9maWxlVmlldyBhcyBjb21wdXRlZCBwcm9wZXJ0aWVzXG4zLiBFbnN1cmVkIGFsbCBmdW5jdGlvbmFsaXR5IGlzIHByZXNlcnZlZCwgaW5jbHVkaW5nOlxuICAgLSBQaG9uZSBudW1iZXIgdmFsaWRhdGlvbiBhbmQgZm9ybWF0dGluZ1xuICAgLSBWZXJpZmljYXRpb24gY29kZSBoYW5kbGluZ1xuICAgLSBSZWdpb24gc2VsZWN0aW9uXG4gICAtIEVycm9yIGhhbmRsaW5nXG4gICAtIEZvY3VzIG1hbmFnZW1lbnRcbiAgIC0gSGFwdGljIGZlZWRiYWNrXG5cblRoZSBjb2RlIGlzIG5vdyBtb3JlIG1haW50YWluYWJsZSBhbmQgZm9sbG93cyB0aGUgTVZWTSBwYXR0ZXJuIG1vcmUgY2xvc2VseSwgd2l0aCBhbGwgcHJvZmlsZS1yZWxhdGVkIGZ1bmN0aW9uYWxpdHkgY29udGFpbmVkIHdpdGhpbiB0aGUgUHJvZmlsZVZpZXcgYW5kIFByb2ZpbGVWaWV3TW9kZWwgZmlsZXMuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiIzOTQ3NDU3ZS0zNjExLTQ5NGMtODA2ZS0xYTRhNjM1NDBjMjciLCJ1dWlkIjoiNzQyNjM3N2YtNWZmNS00ZGY2LWJlMjItM2YyYzRlYzYzODc0IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ3NTU4MDMwODI3LCJ0b1RpbWVzdGFtcCI6MTc0NzU1ODIzNDUwMCwic2Vlbl9zdGF0ZSI6InNlZW4ifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtMDA2NzY2OTEtOGUzMy00MmRlLTkzMjEtNWE5YzMyNWM2YWFiIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xOTM0YmM4Mi0zNzc0LTRhMWQtYjVkMi0yM2M0OGVhZTQwODIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTM5MTIyOWZkLWRkZTctNGYwMS05ZmFlLTNjZGVmYWZlOTg1ZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZTczOWJkMDAtMmM3OC00YWRkLThjNGYtYTY5NTQwYTU2NWY0Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1mMzY3MTczZS0wZTQzLTRjYWUtOTc2ZS00YmVhOGE5MGJmMWMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTNkNzQ3ZGNkLTcwZGMtNDgwMy05YzkwLTcxNmI2YmEyMmJmZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMDc2NzQ2YzItNGMzYS00NzEwLThiMmUtNGU3ZDJlNWUxZTAzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01ZThjNTU0Ni0zNzZkLTQzMzMtYWU5MS1mYTU1YTNiNjI5YTQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTM4M2UzY2ZkLTNiNjktNGZlYS1iYzBlLWMzMmFmNWMwNGVlOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn19LCJ0b29sVXNlU3RhdGVzIjp7ImJlZjRjNTZmLWI2NjMtNDIxOC1hZGNkLTI4YjhiNzJhMTkwMjt0b29sdV92cnR4XzAxNkNvMWtRaDlmMkNOVGdyZmZSQ2o0UiI6eyJyZXF1ZXN0SWQiOiJiZWY0YzU2Zi1iNjYzLTQyMTgtYWRjZC0yOGI4YjcyYTE5MDIiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxNkNvMWtRaDlmMkNOVGdyZmZSQ2o0UiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0XG4uLi5cblxuLy8vIFZpZXcgbW9kZWwgZm9yIHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbmNsYXNzIFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsOiBPYnNlcnZhYmxlT2JqZWN0IHtcbiAgICAvLyBNQVJLOiAtIFB1Ymxpc2hlZCBQcm9wZXJ0aWVzXG5cbiAgICAvLy8gVGhlIHBob25lIG51bWJlciBiZWluZyBlZGl0ZWRcbiAgICBAUHVibGlzaGVkIHZhciBlZGl0aW5nUGhvbmU6IFN0cmluZyA9IFwiXCJcblxuICAgIC8vLyBUaGUgcGhvbmUgcmVnaW9uIGJlaW5nIGVkaXRlZFxuICAgIEBQdWJsaXNoZWQgdmFyIGVkaXRpbmdQaG9uZVJlZ2lvbjogU3RyaW5nID0gXCJVU1wiXG5cbiAgICAvLy8gV2hldGhlciB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgaGFzIGJlZW4gc2VudFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzQ29kZVNlbnQ6IEJvb2wgPSBmYWxzZVxuXG4gICAgLy8vIFRoZSB2ZXJpZmljYXRpb24gY29kZVxuICAgIEBQdWJsaXNoZWQgdmFyIHZlcmlmaWNhdGlvbkNvZGU6IFN0cmluZyA9IFwiXCJcblxuICAgIC8vLyBXaGV0aGVyIHRoZSB2aWV3IGlzIGxvYWRpbmdcbiAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuXG4gICAgLy8vIFdoZXRoZXIgdGhlIHBob25lIG51bWJlciBmaWVsZCBpcyBmb2N1c2VkXG4gICAgQFB1Ymxpc2hlZCB2YXIgaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG5cbiAgICAvLy8gV2hldGhlciB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgZmllbGQgaXMgZm9jdXNlZFxuICAgIEBQdWJsaXNoZWQgdmFyIGlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG5cbiAgICAvLy8gRXJyb3IgbWVzc2FnZVxuICAgIEBQdWJsaXNoZWQgdmFyIGVycm9yTWVzc2FnZTogU3RyaW5nPyA9IG5pbFxuXG4gICAgLy8vIEVudmlyb25tZW50IGRpc21pc3MgYWN0aW9uXG4gICAgdmFyIGRpc21pc3NBY3Rpb246IERpc21pc3NBY3Rpb24/ID0gbmlsXG5cbiAgICAvLy8gQXZhaWxhYmxlIHJlZ2lvbnNcbiAgICBsZXQgcmVnaW9ucyA9IFtcbiAgICAgICAgKFwiVVNcIiwgXCIrMVwiKSxcbiAgICAgICAgKFwiQ0FcIiwgXCIrMVwiKSxcbiAgICAgICAgKFwiVUtcIiwgXCIrNDRcIiksXG4gICAgICAgIChcIkFVXCIsIFwiKzYxXCIpXG4gICAgXVxuXG4gICAgLy8gTUFSSzogLSBQcml2YXRlIFByb3BlcnRpZXNcblxuICAgIC8vLyBUaGUgY3VycmVudCBwaG9uZSBudW1iZXJcbiAgICB2YXIgY3VycmVudFBob25lOiBTdHJpbmcgPSBcIlwiXG5cbiAgICAvLy8gVGhlIGN1cnJlbnQgcGhvbmUgcmVnaW9uXG4gICAgdmFyIGN1cnJlbnRQaG9uZVJlZ2lvbjogU3RyaW5nID0gXCJVU1wiXG5cbiAgICAvLy8gQ29tcGxldGlvbiBoYW5kbGVyIGZvciB3aGVuIHRoZSBwaG9uZSBudW1iZXIgaXMgY2hhbmdlZFxuICAgIHByaXZhdGUgdmFyIG9uUGhvbmVOdW1iZXJDaGFuZ2VkOiAoKFN0cmluZywgU3RyaW5nKSAtPiBWb2lkKT8gPSBuaWxcblxuICAgIC8vLyBDb21wbGV0aW9uIGhhbmRsZXIgZm9yIHdoZW4gdGhlIHZpZXcgaXMgZGlzbWlzc2VkXG4gICAgcHJpdmF0ZSB2YXIgb25EaXNtaXNzOiAoKCkgLT4gVm9pZCk/ID0gbmlsXG5cbiAgICAvLyBNQVJLOiAtIEluaXRpYWxpemF0aW9uXG5cbiAgICAvLy8gSW5pdGlhbGl6ZSB0aGUgdmlldyBtb2RlbCB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gTW9jayBkYXRhIGluaXRpYWxpemF0aW9uXG4gICAgICAgIHNlbGYuY3VycmVudFBob25lID0gXCIoOTU0KSAyMzQtNTY3OFwiXG4gICAgICAgIHNlbGYuY3VycmVudFBob25lUmVnaW9uID0gXCJVU1wiXG4gICAgICAgIHNlbGYuZWRpdGluZ1Bob25lUmVnaW9uID0gXCJVU1wiXG5cbiAgICAgICAgLy8gU2V0IHVwIG1vY2sgY2FsbGJhY2sgZm9yIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICAgICAgc2VsZi5vblBob25lTnVtYmVyQ2hhbmdlZCA9IHsgbmV3UGhvbmUsIHJlZ2lvbiBpblxuICAgICAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgdGhpcyB3b3VsZCB1cGRhdGUgdGhlIHVzZXIncyBwaG9uZSBudW1iZXIgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHByaW50IGl0IHRvIHRoZSBjb25zb2xlXG4gICAgICAgICAgICBwcmludChcIlBob25lIG51bWJlciBjaGFuZ2VkIHRvIFxcKG5ld1Bob25lKSAoXFwocmVnaW9uKSlcIilcblxuICAgICAgICAgICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIGJlIGNvbm5lY3RlZCB0byB0aGUgUHJvZmlsZVZpZXdNb2RlbCdzIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlZCBtZXRob2RcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbkNlbnRlci5kZWZhdWx0LnBvc3QobmFtZTogTlNOb3RpZmljYXRpb24uTmFtZShcIlBob25lTnVtYmVyQ2hhbmdlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogbmlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckluZm86IFtcInBob25lXCI6IG5ld1Bob25lLCBcInJlZ2lvblwiOiByZWdpb25dKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTUFSSzogLSBDb21wdXRlZCBQcm9wZXJ0aWVzXG5cbiAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHBob25lIG51bWJlciBpcyB2YWxpZFxuICAgIHZhciBpc1Bob25lTnVtYmVyVmFsaWQ6IEJvb2wge1xuICAgICAgICAvLyBNYXRjaCBsb2dpbiBzY3JlZW4gdmFsaWRhdGlvblxuICAgICAgICAvLyBBbGxvdyBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlcnNcbiAgICAgICAgaWYgZWRpdGluZ1Bob25lID09IFwiMTIzNDU2Nzg5MFwiIHx8IGVkaXRpbmdQaG9uZSA9PSBcIjAwMDAwMDAwMDBcIiB8fCBlZGl0aW5nUGhvbmUgPT0gXCIrMTEyMzQ1Njc4OTBcIiB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2ltcGxlIHZhbGlkYXRpb246IGF0IGxlYXN0IDEwIGRpZ2l0c1xuICAgICAgICByZXR1cm4gZWRpdGluZ1Bob25lLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPj0gMTBcbiAgICB9XG5cbiAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIHZhbGlkXG4gICAgdmFyIGlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkOiBCb29sIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBub24tZGlnaXQgY2hhcmFjdGVycyBhbmQgY2hlY2sgaWYgd2UgaGF2ZSA2IGRpZ2l0c1xuICAgICAgICByZXR1cm4gdmVyaWZpY2F0aW9uQ29kZS5maWx0ZXIgeyAkMC5pc051bWJlciB9LmNvdW50ID09IDZcbiAgICB9XG5cbiAgICAvLy8gR2V0IHRoZSBwaG9uZSBudW1iZXIgcGxhY2Vob2xkZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgIHZhciBwaG9uZU51bWJlclBsYWNlaG9sZGVyOiBTdHJpbmcge1xuICAgICAgICBzd2l0Y2ggZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWC1YWFgtWFhYWFwiIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWFgtWFhYLVhYWFwiIC8vIEZvcm1hdCBmb3IgVUtcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFhYLVhYWC1YWFhcIiAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYLVhYWC1YWFhYXCIgLy8gRGVmYXVsdCBmb3JtYXRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1BUks6IC0gUHVibGljIE1ldGhvZHNcblxuICAgIC8vLyBDYW5jZWwgcGhvbmUgbnVtYmVyIGNoYW5nZVxuICAgIGZ1bmMgY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKSB7XG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgICAgICBvbkRpc21pc3M/KClcbiAgICAgICAgaWYgbGV0IGRpc21pc3MgPSBkaXNtaXNzQWN0aW9uIHtcbiAgICAgICAgICAgIGRpc21pc3MoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIFNlbmQgdmVyaWZpY2F0aW9uIGNvZGUgZm9yIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICBmdW5jIHNlbmRQaG9uZUNoYW5nZVZlcmlmaWNhdGlvbkNvZGUoKSB7XG4gICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBwaG9uZSBudW1iZXJcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgZGVsYXlcbiAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgICAgICAgICAgc2VsZi5pc0xvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgc2VsZi5pc0NvZGVTZW50ID0gdHJ1ZVxuICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG5cbiAgICAgICAgICAgIC8vIEZvY3VzIHRoZSB2ZXJpZmljYXRpb24gY29kZSBmaWVsZFxuICAgICAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDAuNSkge1xuICAgICAgICAgICAgICAgIHNlbGYuaXNWZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIFZlcmlmeSB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZVxuICAgIGZ1bmMgdmVyaWZ5UGhvbmVDaGFuZ2UoKSB7XG4gICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdmVyaWZ5IHRoZSBjb2RlIHdpdGggdGhlIHNlcnZlclxuICAgICAgICBpc0xvYWRpbmcgPSB0cnVlXG5cbiAgICAgICAgLy8gU2ltdWxhdGUgbmV0d29yayBkZWxheVxuICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMS41KSB7IFt3ZWFrIHNlbGZdIGluXG4gICAgICAgICAgICBndWFyZCBsZXQgc2VsZiA9IHNlbGYgZWxzZSB7IHJldHVybiB9XG4gICAgICAgICAgICBzZWxmLmlzTG9hZGluZyA9IGZhbHNlXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGhvbmUgbnVtYmVyIGlmIHZlcmlmaWNhdGlvbiBpcyBzdWNjZXNzZnVsXG4gICAgICAgICAgICBpZiAhc2VsZi5lZGl0aW5nUGhvbmUuaXNFbXB0eSAmJiBzZWxmLnZlcmlmaWNhdGlvbkNvZGUuY291bnQgPj0gNCB7XG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFBob25lID0gUGhvbmVGb3JtYXR0ZXIuZm9ybWF0UGhvbmVOdW1iZXIoc2VsZi5lZGl0aW5nUGhvbmUsIHJlZ2lvbjogc2VsZi5lZGl0aW5nUGhvbmVSZWdpb24pXG4gICAgICAgICAgICAgICAgc2VsZi5vblBob25lTnVtYmVyQ2hhbmdlZD8oZm9ybWF0dGVkUGhvbmUsIHNlbGYuZWRpdGluZ1Bob25lUmVnaW9uKVxuICAgICAgICAgICAgICAgIHNlbGYub25EaXNtaXNzPygpXG4gICAgICAgICAgICAgICAgaWYgbGV0IGRpc21pc3MgPSBzZWxmLmRpc21pc3NBY3Rpb24ge1xuICAgICAgICAgICAgICAgICAgICBkaXNtaXNzKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciB0ZXh0IGNoYW5nZVxuICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UobmV3VmFsdWU6IFN0cmluZykge1xuICAgICAgICAvLyBDaGVjayBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJcbiAgICAgICAgaWYgbmV3VmFsdWUgPT0gXCIrMTEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjAwMDAwMDAwMDBcIiB7XG4gICAgICAgICAgICAvLyBBbGxvdyB0aGUgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXIgYXMgaXNcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXdWYWx1ZS5maWx0ZXIgeyAkMC5pc051bWJlciB9XG5cbiAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVLOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWE6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIERlZmF1bHQgZm9ybWF0OiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8gSGFuZGxlIHZlcmlmaWNhdGlvbiBjb2RlIHRleHQgY2hhbmdlXG4gICAgZnVuYyBoYW5kbGVWZXJpZmljYXRpb25Db2RlQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gRm9ybWF0IHRoZSB2ZXJpZmljYXRpb24gY29kZSBhcyBYWFgtWFhYXG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cblxuICAgICAgICAvLyBMaW1pdCB0byA2IGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCg2KSlcblxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5cbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XG4gICAgICAgICAgICBsZXQgZmlyc3RQYXJ0ID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHNlY29uZFBhcnQgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gXCJcXChmaXJzdFBhcnQpLVxcKHNlY29uZFBhcnQpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZCAhPSB2ZXJpZmljYXRpb25Db2RlIHtcbiAgICAgICAgICAgIC8vIEp1c3QgdXNlIHRoZSBmaWx0ZXJlZCBkaWdpdHMgaWYgMyBvciBmZXdlclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEhhbmRsZSByZWdpb24gc2VsZWN0aW9uIGNoYW5nZVxuICAgIGZ1bmMgaGFuZGxlUmVnaW9uQ2hhbmdlKCkge1xuICAgICAgICBIYXB0aWNGZWVkYmFjay5zZWxlY3Rpb25GZWVkYmFjaygpXG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXIgKFhYWC1YWFgtWFhYWClcbiAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VVNQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcblxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDYge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNilcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyIChYWFhYLVhYWC1YWFgpXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdEFVUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA3IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDcpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDQge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNClcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IEZvdW5kYXRpb25cblxuLy8vIEEgdmlldyBmb3IgY2hhbmdpbmcgdGhlIHVzZXIncyBwaG9uZSBudW1iZXJcbnN0cnVjdCBQaG9uZU51bWJlckNoYW5nZVZpZXc6IFZpZXcge1xuICAgIC8vLyBUaGUgdmlldyBtb2RlbFxuICAgIEBTdGF0ZU9iamVjdCBwcml2YXRlIHZhciB2aWV3TW9kZWw6IFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsXG5cbiAgICAvLy8gRGlzbWlzcyBhY3Rpb25cbiAgICBARW52aXJvbm1lbnQoXFwuZGlzbWlzcykgcHJpdmF0ZSB2YXIgZGlzbWlzc1xuXG4gICAgLy8vIEZvY3VzIHN0YXRlIGZvciB0aGUgcGhvbmUgbnVtYmVyIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQ6IEJvb2xcblxuICAgIC8vLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbFxuXG4gICAgLy8vIEluaXRpYWxpemUgd2l0aCBhIHZpZXcgbW9kZWxcbiAgICBpbml0KGN1cnJlbnRQaG9uZTogU3RyaW5nLCBjdXJyZW50UGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIiwgb25QaG9uZU51bWJlckNoYW5nZWQ6ICgoU3RyaW5nLCBTdHJpbmcpIC0+IFZvaWQpPyA9IG5pbCkge1xuICAgICAgICBsZXQgdmlld01vZGVsID0gUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwoXG4gICAgICAgICAgICBjdXJyZW50UGhvbmU6IGN1cnJlbnRQaG9uZSxcbiAgICAgICAgICAgIGN1cnJlbnRQaG9uZVJlZ2lvbjogY3VycmVudFBob25lUmVnaW9uLFxuICAgICAgICAgICAgb25QaG9uZU51bWJlckNoYW5nZWQ6IG9uUGhvbmVOdW1iZXJDaGFuZ2VkLFxuICAgICAgICAgICAgb25EaXNtaXNzOiBuaWxcbiAgICAgICAgKVxuICAgICAgICBfdmlld01vZGVsID0gU3RhdGVPYmplY3Qod3JhcHBlZFZhbHVlOiB2aWV3TW9kZWwpXG4gICAgfVxuXG4gICAgdmFyIGJvZHk6IHNvbWUgVmlldyB7XG4gICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3lzdGVtIGdyb3VwZWQgYmFja2dyb3VuZCBmb3IgdGhlIG1haW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpXG4gICAgICAgICAgICAgICAgICAgIC5lZGdlc0lnbm9yaW5nU2FmZUFyZWEoLmFsbClcbiAgICAgICAgICAgICAgICAgICAgLmZyYW1lKGhlaWdodDogMCkgLy8gWmVybyBoZWlnaHQgdG8gbm90IHRha2UgdXAgc3BhY2VcbiAgICAgICAgICAgICAgICBpZiAhdmlld01vZGVsLmlzQ29kZVNlbnQge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDdXJyZW50IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwuY3VycmVudFBob25lLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiB2aWV3TW9kZWwuY3VycmVudFBob25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHksIGFsaWdubWVudDogLmxlYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiTmV3IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpb24gcGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJSZWdpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyKFwiUmVnaW9uXCIsIHNlbGVjdGlvbjogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yRWFjaCh2aWV3TW9kZWwucmVnaW9ucywgaWQ6IFxcLjApIHsgcmVnaW9uIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiXFwocmVnaW9uLjApIChcXChyZWdpb24uMSkpXCIpLnRhZyhyZWdpb24uMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlja2VyU3R5bGUoTWVudVBpY2tlclN0eWxlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7IF8sIF8gaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2suc2VsZWN0aW9uRmVlZGJhY2soKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoZ2V0UGhvbmVOdW1iZXJQbGFjZWhvbGRlcigpLCB0ZXh0OiAkdmlld01vZGVsLmVkaXRpbmdQaG9uZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlsaW5lVGV4dEFsaWdubWVudCgubGVhZGluZykgLy8gTGVmdCBhbGlnbiB0aGUgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1c2VkKCRwaG9uZU51bWJlckZpZWxkRm9jdXNlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpIHsgbmV3VmFsdWUgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYTogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVUs6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRBVVBob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHlvdXIgbmV3IHBob25lIG51bWJlci4gV2UnbGwgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIGNvbmZpcm0uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsZXQgZXJyb3JNZXNzYWdlID0gdmlld01vZGVsLmVycm9yTWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZChcIlhYWC1YWFhcIiwgdGV4dDogJHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rZXlib2FyZFR5cGUoLm51bWJlclBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlKSB7IG9sZFZhbHVlLCBuZXdWYWx1ZSBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGFzIFhYWC1YWFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbWl0IHRvIDYgZGlnaXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDYpKVxuLi4uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwudmVyaWZ5UGhvbmVDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJWZXJpZnkgQ29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICFpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZCA/IENvbG9yLmdyYXkgOiBDb2xvci5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpc2FibGVkKHZpZXdNb2RlbC5pc0xvYWRpbmcgfHwgIWlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMTYpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXCIpXG4gICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgIC50b29sYmFyIHtcbiAgICAgICAgICAgICAgICBUb29sYmFySXRlbShwbGFjZW1lbnQ6IC5uYXZpZ2F0aW9uQmFyTGVhZGluZykge1xuICAgICAgICAgICAgICAgICAgICBCdXR0b24oXCJDYW5jZWxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgIC8vLyBDb21wdXRlZCBwcm9wZXJ0eSB0byBjaGVjayBpZiB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgdmFsaWRcbiAgICBwcml2YXRlIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZDogQm9vbCB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICAgICAgcmV0dXJuIHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPT0gNlxuICAgIH1cblxuICAgIC8vLyBHZXQgdGhlIHBob25lIG51bWJlciBwbGFjZWhvbGRlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgcHJpdmF0ZSBmdW5jIGdldFBob25lTnVtYmVyUGxhY2Vob2xkZXIoKSAtPiBTdHJpbmcge1xuICAgICAgICBzd2l0Y2ggdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGFcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFhYLVhYWC1YWFhcIiAvLyBGb3JtYXQgZm9yIFVLXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWC1YWFgtWFhYWFwiIC8vIERlZmF1bHQgZm9ybWF0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8gRm9ybWF0IGEgVVMvQ2FuYWRhIHBob25lIG51bWJlciAoWFhYLVhYWC1YWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVU1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNiB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg2KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyIChYWFhYLVhYWC1YWFgpXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdEFVUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA3IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDcpXG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdC4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjJjODVjOTVkLTk3MzMtNGUzZi05NWU3LTBiODYyMDY3Yjc3Zjt0b29sdV92cnR4XzAxVWVONHFZUzZ1SkFncERzMlkxeHNwSCI6eyJyZXF1ZXN0SWQiOiIyYzg1Yzk1ZC05NzMzLTRlM2YtOTVlNy0wYjg2MjA2N2I3N2YiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxVWVONHFZUzZ1SkFncERzMlkxeHNwSCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IExpZmVTaWduYWwvTGlmZVNpZ25hbC9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUHJvZmlsZVZpZXcuc3dpZnRcbmltcG9ydCBTd2lmdFVJXG5pbXBvcnQgQ29tcG9zYWJsZUFyY2hpdGVjdHVyZVxuaW1wb3J0IFVJS2l0XG5cbi8vLyBBIFN3aWZ0VUkgdmlldyBmb3IgZGlzcGxheWluZyB0aGUgdXNlciBwcm9maWxlIHVzaW5nIFRDQVxuc3RydWN0IFByb2ZpbGVWaWV3OiBWaWV3IHtcbiAgICAvLy8gVGhlIHN0b3JlIGZvciB0aGUgdXNlciBmZWF0dXJlXG4gICAgQEJpbmRhYmxlIHZhciBzdG9yZTogU3RvcmVPZjxVc2VyRmVhdHVyZT5cblxuICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgICAgICBpZiBzdG9yZS5wcm9maWxlID09IG5pbCB8fCAoc3RvcmUudXNlckRhdGEubmFtZS5pc0VtcHR5ICYmIHN0b3JlLmlzTG9hZGluZykge1xuICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHZpZXcgd2hlbiB1c2VyIGRhdGEgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAgICAgUHJvZ3Jlc3NWaWV3KFwiTG9hZGluZyBwcm9maWxlLi4uXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICBWU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm9maWxlIEhlYWRlclxuICAgICAgICAgICAgICAgICAgICBWU3RhY2soc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENpcmNsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbGwoQ29sb3IoVUlDb2xvci5zeXN0ZW1CYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUod2lkdGg6IDgwLCBoZWlnaHQ6IDgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vdmVybGF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFN0cmluZyhzdG9yZS51c2VyRGF0YS5uYW1lLnByZWZpeCgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnRpdGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3ZlcmxheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2lyY2xlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHJva2UoQ29sb3IuYmx1ZSwgbGluZVdpZHRoOiAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoc3RvcmUudXNlckRhdGEubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHN0b3JlLnVzZXJEYXRhLnBob25lTnVtYmVyLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiBzdG9yZS51c2VyRGF0YS5waG9uZU51bWJlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gRWRpdCBuYW1lIHNoZWV0XG4gICAgICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICRzdG9yZS5wcm9maWxlIS5zaG93RWRpdE5hbWVTaGVldC5zZW5kaW5nKFxcLnByb2ZpbGUuc2V0U2hvd0VkaXROYW1lU2hlZXQpKSB7XG4gICAgICAgICAgICAgICAgTmF2aWdhdGlvblN0YWNrIHtcbiAgICAgICAgICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZChcIk5hbWVcIiwgdGV4dDogJHN0b3JlLnByb2ZpbGUhLmVkaXRpbmdOYW1lLnNlbmRpbmcoXFwucHJvZmlsZS51cGRhdGVFZGl0aW5nTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyYXk1KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiUGVvcGxlIHdpbGwgc2VlIHRoaXMgbmFtZSBpZiB5b3UgaW50ZXJhY3Qgd2l0aCB0aGVtIGFuZCB0aGV5IGRvbid0IGhhdmUgeW91IHNhdmVkIGFzIGEgY29udGFjdC5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKG1pbkxlbmd0aDogMClcbiAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuc2VuZCgucHJvZmlsZSguc3RhcnRQaG9uZU51bWJlckNoYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvci5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgIXN0b3JlLnByb2ZpbGUhLmlzQ29kZVNlbnQge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiAxNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiTmV3IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnaW9uIHBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXIoXCJSZWdpb25cIiwgc2VsZWN0aW9uOiAkc3RvcmUucHJvZmlsZSEuZWRpdGluZ1Bob25lUmVnaW9uLnNlbmRpbmcoXFwucHJvZmlsZS51cGRhdGVFZGl0aW5nUGhvbmVSZWdpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVVMgKCsxKVwiKS50YWcoXCJVU1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkNBICgrMSlcIikudGFnKFwiQ0FcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJVSyAoKzQ0KVwiKS50YWcoXCJHQlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkFVICgrNjEpXCIpLnRhZyhcIkFVXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBpY2tlclN0eWxlKE1lbnVQaWNrZXJTdHlsZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoXCJQaG9uZSBOdW1iZXJcIiwgdGV4dDogJHN0b3JlLnByb2ZpbGUhLmVkaXRpbmdQaG9uZS5zZW5kaW5nKFxcLnByb2ZpbGUudXBkYXRlRWRpdGluZ1Bob25lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rZXlib2FyZFR5cGUoLnBob25lUGFkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyYXk1KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB5b3VyIG5ldyBwaG9uZSBudW1iZXIuIFdlJ2xsIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byBjb25maXJtLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5zZW5kKC5wcm9maWxlKC5zZW5kUGhvbmVDaGFuZ2VWZXJpZmljYXRpb25Db2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChzdG9yZS5pc0xvYWRpbmcgPyBcIlNlbmRpbmcuLi5cIiA6IFwiU2VuZCBWZXJpZmljYXRpb24gQ29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IuYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2F0aW9uIGNvZGUgdmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiAxNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiVmVyaWZpY2F0aW9uIENvZGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byBcXChQaG9uZUZvcm1hdHRlci5mb3JtYXRQaG9uZU51bWJlcihzdG9yZS5wcm9maWxlIS5lZGl0aW5nUGhvbmUsIHJlZ2lvbjogc3RvcmUucHJvZmlsZSEuZWRpdGluZ1Bob25lUmVnaW9uKSlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEZpZWxkKFwiVmVyaWZpY2F0aW9uIENvZGVcIiwgdGV4dDogJHN0b3JlLnByb2ZpbGUhLnZlcmlmaWNhdGlvbkNvZGUuc2VuZGluZyhcXC5wcm9maWxlLnVwZGF0ZVZlcmlmaWNhdGlvbkNvZGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmtleWJvYXJkVHlwZSgubnVtYmVyUGFkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyYXk1KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLnNlbmQoLnByb2ZpbGUoLnZlcmlmeVBob25lQ2hhbmdlQ29kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoc3RvcmUuaXNMb2FkaW5nID8gXCJWZXJpZnlpbmcuLi5cIiA6IFwiVmVyaWZ5IENvZGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigud2hpdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yLmJsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQoc3RvcmUuaXNMb2FkaW5nIHx8IHN0b3JlLnByb2ZpbGUhLnZlcmlmaWNhdGlvbkNvZGUuaXNFbXB0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgOClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5zZW5kKC5wcm9maWxlKC5jYW5jZWxQaG9uZU51bWJlckNoYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKG1pbkxlbmd0aDogMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgICAgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25UaXRsZShcIlBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhckl0ZW1zKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZGluZzogQnV0dG9uKFwiQ2xvc2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLnNlbmQoLnByb2ZpbGUoLnNldFNob3dFZGl0UGhvbmVTaGVldChmYWxzZSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApXG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnRcbmltcG9ydCBGb3VuZGF0aW9uXG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IENvbWJpbmVcbmltcG9ydCBVc2VyTm90aWZpY2F0aW9uc1xuaW1wb3J0IFVJS2l0XG5cbi8vLyBWaWV3IG1vZGVsIGZvciB0aGUgcHJvZmlsZSBzY3JlZW5cbmNsYXNzIFByb2ZpbGVWaWV3TW9kZWw6IE9ic2VydmFibGVPYmplY3Qge1xuICAgIC8vIE1BUks6IC0gUHVibGlzaGVkIFByb3BlcnRpZXNcblxuICAgIC8vIFVzZXIgUHJvZmlsZSBQcm9wZXJ0aWVzXG4gICAgQFB1Ymxpc2hlZCB2YXIgbmFtZTogU3RyaW5nID0gXCJTYXJhaCBKb2huc29uXCJcbiAgICBAUHVibGlzaGVkIHZhciBwaG9uZTogU3RyaW5nID0gXCIrMSAoNTU1KSA5ODctNjU0M1wiXG4gICAgQFB1Ymxpc2hlZCB2YXIgcHJvZmlsZURlc2NyaXB0aW9uOiBTdHJpbmcgPSBcIkkgaGF2ZSB0eXBlIDEgZGlhYmV0ZXMuIE15IGluc3VsaW4gYW5kIHN1cHBsaWVzIGFyZSBpbiB0aGUgcmVmcmlnZXJhdG9yLiBFbWVyZ2VuY3kgY29udGFjdHM6IE1vbSAoNTU1LTExMS0yMjIyKSwgUm9vbW1hdGUgSmVuICg1NTUtMzMzLTQ0NDQpLiBBbGxlcmdpYyB0byBwZW5pY2lsbGluLiBNeSBkb2N0b3IgaXMgRHIuIE1hcnRpbmV6IGF0IENpdHkgTWVkaWNhbCBDZW50ZXIgKDU1NS03NzctODg4OCkuXCJcblxuICAgIC8vIEF2YXRhciBQcm9wZXJ0aWVzXG4gICAgQFB1Ymxpc2hlZCB2YXIgYXZhdGFySW1hZ2U6IFVJSW1hZ2U/ID0gbmlsXG4uLi5cblxuICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcbiAgICBAUHVibGlzaGVkIHZhciBpc05hbWVGaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuICAgIEBQdWJsaXNoZWQgdmFyIGlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuXG4gICAgLy8gTUFSSzogLSBDb21wdXRlZCBQcm9wZXJ0aWVzXG5cbiAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcbiAgICB2YXIgaXNVc2luZ0RlZmF1bHRBdmF0YXI6IEJvb2wge1xuICAgICAgICByZXR1cm4gYXZhdGFySW1hZ2UgPT0gbmlsXG4gICAgfVxuXG4gICAgLy8gTUFSSzogLSBJbml0aWFsaXphdGlvblxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gTG9hZCBwZXJzaXN0ZWQgZGF0YSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgICAgICBsb2FkUGVyc2lzdGVkRGF0YSgpXG4gICAgfVxuXG4gICAgLy8gTUFSSzogLSBNZXRob2RzXG5cbiAgICAvLy8gUHJlcGFyZSB0byBlZGl0IHRoZSBkZXNjcmlwdGlvblxuICAgIGZ1bmMgcHJlcGFyZUVkaXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgbmV3RGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb25cbiAgICAgICAgc2hvd0VkaXREZXNjcmlwdGlvblNoZWV0ID0gdHJ1ZVxuICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcblxuICAgICAgICAvLyBGb2N1cyB0aGUgdGV4dCBlZGl0b3Igd2hlbiB0aGUgc2hlZXQgYXBwZWFyc1xuICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC4xKSB7XG4gICAgICAgICAgICBzZWxmLmlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8vLyBTaG93IGRlbGV0ZSBhdmF0YXIgY29uZmlybWF0aW9uXG4gICAgZnVuYyBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uRGlhbG9nKCkge1xuICAgICAgICBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uID0gdHJ1ZVxuICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICB9XG5cbiAgICAvLy8gU2hvdyB0aGUgcGhvbmUgbnVtYmVyIGNoYW5nZSB2aWV3XG4gICAgZnVuYyBzaG93UGhvbmVOdW1iZXJDaGFuZ2UoKSB7XG4gICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgICAgICBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3ID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIGNoYW5nZVxuICAgIC8vLyAtIFBhcmFtZXRlcnM6XG4gICAgLy8vICAgLSBuZXdQaG9uZTogVGhlIG5ldyBwaG9uZSBudW1iZXJcbiAgICAvLy8gICAtIHJlZ2lvbjogVGhlIHBob25lIHJlZ2lvblxuICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSB7XG4gICAgICAgIHNlbGYucGhvbmUgPSBuZXdQaG9uZVxuICAgICAgICBzYXZlUGhvbmUoKVxuICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgICB9XG5cbiAgICAvLy8gU2hvdyBzaWduIG91dCBjb25maXJtYXRpb25cbiAgICBmdW5jIGNvbmZpcm1TaWduT3V0KCkge1xuICAgICAgICBzaG93U2lnbk91dENvbmZpcm1hdGlvbiA9IHRydWVcbiAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgfVxuLi4uXG5cbiAgICAvLyBNQVJLOiAtIFByaXZhdGUgTWV0aG9kc1xuXG4gICAgLy8vIExvYWQgcGVyc2lzdGVkIGRhdGEgZnJvbSBVc2VyRGVmYXVsdHNcbiAgICBwcml2YXRlIGZ1bmMgbG9hZFBlcnNpc3RlZERhdGEoKSB7XG4gICAgICAgIC8vIExvYWQgdXNlciBuYW1lXG4gICAgICAgIGlmIGxldCB1c2VyTmFtZSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zdHJpbmcoZm9yS2V5OiBcInVzZXJOYW1lXCIpIHtcbiAgICAgICAgICAgIHNlbGYubmFtZSA9IHVzZXJOYW1lXG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2FkIHVzZXIgcGhvbmVcbiAgICAgICAgaWYgbGV0IHVzZXJQaG9uZSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zdHJpbmcoZm9yS2V5OiBcInVzZXJQaG9uZVwiKSB7XG4gICAgICAgICAgICBzZWxmLnBob25lID0gdXNlclBob25lXG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2FkIHByb2ZpbGUgZGVzY3JpcHRpb25cbiAgICAgICAgaWYgbGV0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zdHJpbmcoZm9yS2V5OiBcInVzZXJQcm9maWxlRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgc2VsZi5wcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb25cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvYWQgYXZhdGFyIGltYWdlIGlmIGF2YWlsYWJsZVxuICAgICAgICBsb2FkQXZhdGFySW1hZ2UoKVxuICAgIH1cblxuICAgIC8vLyBTYXZlIHRoZSB1c2VyIG5hbWUgdG8gVXNlckRlZmF1bHRzXG4gICAgcHJpdmF0ZSBmdW5jIHNhdmVOYW1lKCkge1xuICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KG5hbWUsIGZvcktleTogXCJ1c2VyTmFtZVwiKVxuICAgIH1cbi4uLlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwuc3dpZnRcbi4uLlxuXG4gICAgLy8vIEluaXRpYWxpemUgdGhlIHZpZXcgbW9kZWwgd2l0aCBkZWZhdWx0IHZhbHVlc1xuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIE1vY2sgZGF0YSBpbml0aWFsaXphdGlvblxuICAgICAgICBzZWxmLmN1cnJlbnRQaG9uZSA9IFwiKDk1NCkgMjM0LTU2NzhcIlxuICAgICAgICBzZWxmLmN1cnJlbnRQaG9uZVJlZ2lvbiA9IFwiVVNcIlxuICAgICAgICBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbiA9IFwiVVNcIlxuXG4gICAgICAgIC8vIFNldCB1cCBtb2NrIGNhbGxiYWNrIGZvciBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAgICAgIHNlbGYub25QaG9uZU51bWJlckNoYW5nZWQgPSB7IG5ld1Bob25lLCByZWdpb24gaW5cbiAgICAgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdXBkYXRlIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBwcmludCBpdCB0byB0aGUgY29uc29sZVxuICAgICAgICAgICAgcHJpbnQoXCJQaG9uZSBudW1iZXIgY2hhbmdlZCB0byBcXChuZXdQaG9uZSkgKFxcKHJlZ2lvbikpXCIpXG5cbiAgICAgICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBiZSBjb25uZWN0ZWQgdG8gdGhlIFByb2ZpbGVWaWV3TW9kZWwncyBoYW5kbGVQaG9uZU51bWJlckNoYW5nZWQgbWV0aG9kXG4gICAgICAgICAgICBOb3RpZmljYXRpb25DZW50ZXIuZGVmYXVsdC5wb3N0KG5hbWU6IE5TTm90aWZpY2F0aW9uLk5hbWUoXCJQaG9uZU51bWJlckNoYW5nZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG5pbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJbmZvOiBbXCJwaG9uZVwiOiBuZXdQaG9uZSwgXCJyZWdpb25cIjogcmVnaW9uXSlcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgdGV4dCBjaGFuZ2VcbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgIHN3aXRjaCBlZGl0aW5nUGhvbmVSZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJVS1wiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICBmb3JtYXRVS1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdEFVUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXcuc3dpZnRcbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYTogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVUs6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRBVVBob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHlvdXIgbmV3IHBob25lIG51bWJlci4gV2UnbGwgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIGNvbmZpcm0uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsZXQgZXJyb3JNZXNzYWdlID0gdmlld01vZGVsLmVycm9yTWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBMaWZlU2lnbmFsL0xpZmVTaWduYWwvRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVGZWF0dXJlLnN3aWZ0XG4uLi5cblxuICAgIC8vLyBUaGUgc3RhdGUgb2YgdGhlIHByb2ZpbGUgZmVhdHVyZVxuICAgIEBPYnNlcnZhYmxlU3RhdGVcbiAgICBzdHJ1Y3QgU3RhdGU6IEVxdWF0YWJsZSwgU2VuZGFibGUge1xuICAgICAgICAvLy8gVXNlciBkYXRhIHJlZmVyZW5jZSBmcm9tIHBhcmVudCBmZWF0dXJlXG4gICAgICAgIHZhciB1c2VyRGF0YTogVXNlckRhdGEgPSAuZW1wdHlcblxuICAgICAgICAvLy8gQ2hpbGQgZmVhdHVyZSBzdGF0ZXNcbiAgICAgICAgQFByZXNlbnRzIHZhciBxckNvZGVTaGFyZTogUVJDb2RlU2hhcmVGZWF0dXJlLlN0YXRlP1xuXG4gICAgICAgIC8vLyBQcm9maWxlIFVJIHN0YXRlIGZvciBtYW5hZ2luZyBVSS1zcGVjaWZpYyBzdGF0ZVxuICAgICAgICB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgICAgICB2YXIgZWRpdGluZ05hbWU6IFN0cmluZyA9IFwiXCJcbiAgICAgICAgdmFyIHNob3dFZGl0RGVzY3JpcHRpb25TaGVldDogQm9vbCA9IGZhbHNlXG4gICAgICAgIHZhciBlZGl0aW5nRGVzY3JpcHRpb246IFN0cmluZyA9IFwiXCJcbiAgICAgICAgdmFyIHNob3dFZGl0UGhvbmVTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgICAgIHZhciBlZGl0aW5nUGhvbmU6IFN0cmluZyA9IFwiXCJcbiAgICAgICAgdmFyIGVkaXRpbmdQaG9uZVJlZ2lvbjogU3RyaW5nID0gXCJVU1wiXG4gICAgICAgIHZhciBzaG93RWRpdEF2YXRhclNoZWV0OiBCb29sID0gZmFsc2VcbiAgICAgICAgdmFyIHNob3dTaWduT3V0Q29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAgICAgdmFyIHNob3dGaXJlYmFzZVRlc3Q6IEJvb2wgPSBmYWxzZVxuLi4uXG5cbiAgICAvLy8gQWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgb24gdGhlIHByb2ZpbGUgZmVhdHVyZVxuICAgIGVudW0gQWN0aW9uOiBCaW5kYWJsZUFjdGlvbiwgRXF1YXRhYmxlLCBTZW5kYWJsZSB7XG4gICAgICAgIC8vIE1BUks6IC0gQmluZGluZyBBY3Rpb25cblxuICAgICAgICAvLy8gQmluZGluZyBhY3Rpb24gZm9yIHR3by13YXkgYmluZGluZyB3aXRoIHRoZSB2aWV3XG4gICAgICAgIGNhc2UgYmluZGluZyhCaW5kaW5nQWN0aW9uPFN0YXRlPilcblxuICAgICAgICAvLyBNQVJLOiAtIExpZmVjeWNsZSBBY3Rpb25zXG5cbiAgICAgICAgLy8vIENhbGxlZCB3aGVuIHRoZSB2aWV3IGFwcGVhcnNcbiAgICAgICAgY2FzZSBvbkFwcGVhclxuXG4gICAgICAgIC8vIE1BUks6IC0gUHJvZmlsZSBPcGVyYXRpb25zXG5cbiAgICAgICAgLy8vIFVwZGF0ZSBwcm9maWxlIChkZWxlZ2F0ZWQgdG8gcGFyZW50KVxuICAgICAgICBjYXNlIHVwZGF0ZVByb2ZpbGVcblxuICAgICAgICAvLy8gU2lnbiBvdXRcbiAgICAgICAgY2FzZSBzaWduT3V0XG4gICAgICAgIGNhc2Ugc2lnbk91dFN1Y2NlZWRlZFxuICAgICAgICBjYXNlIHNpZ25PdXRGYWlsZWQoVXNlckZhY2luZ0Vycm9yKVxuXG4gICAgICAgIC8vIE1BUks6IC0gUGhvbmUgTnVtYmVyIENoYW5nZSBBY3Rpb25zXG5cbiAgICAgICAgLy8vIFN0YXJ0IHBob25lIG51bWJlciBjaGFuZ2UgcHJvY2Vzc1xuICAgICAgICBjYXNlIHN0YXJ0UGhvbmVOdW1iZXJDaGFuZ2VcblxuICAgICAgICAvLy8gQ2FuY2VsIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICAgICAgY2FzZSBjYW5jZWxQaG9uZU51bWJlckNoYW5nZVxuXG4gICAgICAgIC8vIFBob25lIHJlZ2lvbiBpcyBub3cgaGFuZGxlZCBieSBiaW5kaW5nXG4uLi5cblxuICAgICAgICAvLy8gU2V0IHdoZXRoZXIgdG8gc2hvdyB0aGUgZWRpdCBhdmF0YXIgc2hlZXRcbiAgICAgICAgY2FzZSBzZXRTaG93RWRpdEF2YXRhclNoZWV0KEJvb2wpXG5cbiAgICAgICAgLy8vIFNldCB3aGV0aGVyIHRvIHNob3cgdGhlIHNpZ24gb3V0IGNvbmZpcm1hdGlvblxuICAgICAgICBjYXNlIHNldFNob3dTaWduT3V0Q29uZmlybWF0aW9uKEJvb2wpXG5cbiAgICAgICAgLy8vIFNldCB3aGV0aGVyIHRvIHNob3cgdGhlIEZpcmViYXNlIHRlc3RcbiAgICAgICAgY2FzZSBzZXRTaG93RmlyZWJhc2VUZXN0KEJvb2wpXG5cbiAgICAgICAgLy8gTUFSSzogLSBRUiBDb2RlIFNoYXJlIEFjdGlvbnNcblxuICAgICAgICAvLy8gU2hvdyBRUiBjb2RlIHNoYXJlIHNoZWV0XG4gICAgICAgIGNhc2Ugc2hvd1FSQ29kZVNoYXJlU2hlZXRcblxuICAgICAgICAvLyBNQVJLOiAtIERlbGVnYXRlIEFjdGlvbnNcblxuICAgICAgICAvLy8gRGVsZWdhdGUgYWN0aW9ucyB0byBwYXJlbnQgZmVhdHVyZXNcbiAgICAgICAgY2FzZSBkZWxlZ2F0ZShEZWxlZ2F0ZUFjdGlvbilcblxuICAgICAgICBlbnVtIERlbGVnYXRlQWN0aW9uOiBFcXVhdGFibGUsIFNlbmRhYmxlIHtcbiAgICAgICAgICAgIC8vLyBVc2VyIHNpZ25lZCBvdXRcbiAgICAgICAgICAgIGNhc2UgdXNlclNpZ25lZE91dFxuXG4gICAgICAgICAgICAvLy8gVXBkYXRlIHByb2ZpbGVcbiAgICAgICAgICAgIGNhc2UgdXBkYXRlUHJvZmlsZShuYW1lOiBTdHJpbmcsIGVtZXJnZW5jeU5vdGU6IFN0cmluZylcblxuICAgICAgICAgICAgLy8vIFVwZGF0ZSBwaG9uZSBudW1iZXJcbiAgICAgICAgICAgIGNhc2UgdXBkYXRlUGhvbmVOdW1iZXIocGhvbmU6IFN0cmluZywgcmVnaW9uOiBTdHJpbmcpXG5cbiAgICAgICAgICAgIC8vLyBQaG9uZSBudW1iZXIgdXBkYXRlIGZhaWxlZFxuICAgICAgICAgICAgY2FzZSBwaG9uZU51bWJlclVwZGF0ZUZhaWxlZChVc2VyRmFjaW5nRXJyb3IpXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8vLyBUaGUgYm9keSBvZiB0aGUgcmVkdWNlclxuICAgIHZhciBib2R5OiBzb21lIFJlZHVjZXJPZjxTZWxmPiB7XG4gICAgICAgIFJlZHVjZSB7IHN0YXRlLCBhY3Rpb24gaW5cbiAgICAgICAgICAgIHN3aXRjaCBhY3Rpb24ge1xuICAgICAgICAgICAgLy8gTUFSSzogLSBMaWZlY3ljbGUgQWN0aW9uc1xuXG4gICAgICAgICAgICBjYXNlIC5vbkFwcGVhcjpcbiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIFVJIHN0YXRlIHdpdGggY3VycmVudCB1c2VyIGRhdGFcbiAgICAgICAgICAgICAgICByZXR1cm4gLm5vbmVcblxuICAgICAgICAgICAgLy8gTUFSSzogLSBQcm9maWxlIE9wZXJhdGlvbnNcblxuICAgICAgICAgICAgY2FzZSAudXBkYXRlUHJvZmlsZTpcbiAgICAgICAgICAgICAgICAvLyBEZWxlZ2F0ZSB0byBwYXJlbnQgZmVhdHVyZVxuICAgICAgICAgICAgICAgIHJldHVybiAuc2VuZCguZGVsZWdhdGUoLnVwZGF0ZVByb2ZpbGUoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlLmVkaXRpbmdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbWVyZ2VuY3lOb3RlOiBzdGF0ZS5lZGl0aW5nRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICApKSlcblxuICAgICAgICAgICAgY2FzZSAuc2lnbk91dDpcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSB0cnVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIC5ydW4geyBbZmlyZWJhc2VBdXRoXSBzZW5kIGluXG4gICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSBhd2FpdCBmaXJlYmFzZUF1dGguc2lnbk91dCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kKC5zaWduT3V0U3VjYy4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjVjNzUwOTQ3LTQ1YzgtNGVkOS05MjcxLTk3MGUxYmJjZDZjYTt0b29sdV92cnR4XzAxSlo5R0h1aXFQQjlZUHFLdTF4RmpjWCI6eyJyZXF1ZXN0SWQiOiI1Yzc1MDk0Ny00NWM4LTRlZDktOTI3MS05NzBlMWJiY2Q2Y2EiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxSlo5R0h1aXFQQjlZUHFLdTF4RmpjWCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vQ29yZS9VdGlsaXRpZXMvUGhvbmVGb3JtYXR0ZXIuc3dpZnRcbmltcG9ydCBGb3VuZGF0aW9uXG5cbi8vLyBVdGlsaXR5IGZvciBmb3JtYXR0aW5nIHBob25lIG51bWJlcnNcbnN0cnVjdCBQaG9uZUZvcm1hdHRlciB7XG4gICAgLy8vIEZvcm1hdCBhIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgcmVnaW9uXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHBob25lTnVtYmVyOiBUaGUgcGhvbmUgbnVtYmVyIHRvIGZvcm1hdFxuICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcmVnaW9uIGNvZGUgKGUuZy4sIFwiVVNcIiwgXCJVS1wiKVxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBzdGF0aWMgZnVuYyBmb3JtYXRQaG9uZU51bWJlcihfIHBob25lTnVtYmVyOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICAvLyBSZW1vdmUgYW55IG5vbi1kaWdpdCBjaGFyYWN0ZXJzXG4gICAgICAgIGxldCBkaWdpdHMgPSBwaG9uZU51bWJlci5maWx0ZXIgeyAkMC5pc051bWJlciB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBlbXB0eSwgcmV0dXJuIGVtcHR5IHN0cmluZ1xuICAgICAgICBpZiBkaWdpdHMuaXNFbXB0eSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXQgYmFzZWQgb24gcmVnaW9uXG4gICAgICAgIHN3aXRjaCByZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFVTUGhvbmVOdW1iZXIoZGlnaXRzKVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRVS1Bob25lTnVtYmVyKGRpZ2l0cylcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0QVVQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VVNQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXJcbiAgICAvLy8gLSBQYXJhbWV0ZXIgZGlnaXRzOiBUaGUgZGlnaXRzIHRvIGZvcm1hdFxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBwcml2YXRlIHN0YXRpYyBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBkaWdpdHM6IFN0cmluZykgLT4gU3RyaW5nIHtcbiAgICAgICAgbGV0IGxpbWl0ZWREaWdpdHMgPSBTdHJpbmcoZGlnaXRzLnByZWZpeCgxMCkpXG4gICAgICAgIFxuICAgICAgICBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID09IDEwIHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWREaWdpdHMucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICByZXR1cm4gXCIrMSAoXFwoYXJlYUNvZGUpKSBcXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIisxIFxcKGxpbWl0ZWREaWdpdHMpXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVLIHBob25lIG51bWJlclxuICAgIC8vLyAtIFBhcmFtZXRlciBkaWdpdHM6IFRoZSBkaWdpdHMgdG8gZm9ybWF0XG4gICAgLy8vIC0gUmV0dXJuczogQSBmb3JtYXR0ZWQgcGhvbmUgbnVtYmVyIHN0cmluZ1xuICAgIHByaXZhdGUgc3RhdGljIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGRpZ2l0czogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICBsZXQgbGltaXRlZERpZ2l0cyA9IFN0cmluZyhkaWdpdHMucHJlZml4KDEwKSlcbiAgICAgICAgXG4gICAgICAgIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPT0gMTAge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZERpZ2l0cy5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoNylcbiAgICAgICAgICAgIHJldHVybiBcIis0NCBcXChhcmVhQ29kZSkgXFwocHJlZml4KSBcXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID4gMCB7XG4gICAgICAgICAgICByZXR1cm4gXCIrNDQgXFwobGltaXRlZERpZ2l0cylcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyXG4gICAgLy8vIC0gUGFyYW1ldGVyIGRpZ2l0czogVGhlIGRpZ2l0cyB0byBmb3JtYXRcbiAgICAvLy8gLSBSZXR1cm5zOiBBIGZvcm1hdHRlZCBwaG9uZSBudW1iZXIgc3RyaW5nXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZGlnaXRzOiBTdHJpbmcpIC0+IFN0cmluZyB7XG4gICAgICAgIGxldCBsaW1pdGVkRGlnaXRzID0gU3RyaW5nKGRpZ2l0cy5wcmVmaXgoMTApKVxuICAgICAgICBcbiAgICAgICAgaWYgbGltaXRlZERpZ2l0cy5jb3VudCA9PSAxMCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRGlnaXRzLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgcmV0dXJuIFwiKzYxIFxcKGFyZWFDb2RlKSBcXChwcmVmaXgpIFxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIis2MSBcXChsaW1pdGVkRGlnaXRzKVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9QaG9uZU51bWJlckNoYW5nZS9QaG9uZU51bWJlckNoYW5nZVZpZXdNb2RlbC5zd2lmdFxuLi4uXG5cbiAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciB0ZXh0IGNoYW5nZVxuICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UobmV3VmFsdWU6IFN0cmluZykge1xuICAgICAgICAvLyBDaGVjayBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJcbiAgICAgICAgaWYgbmV3VmFsdWUgPT0gXCIrMTEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjEyMzQ1Njc4OTBcIiB8fCBuZXdWYWx1ZSA9PSBcIjAwMDAwMDAwMDBcIiB7XG4gICAgICAgICAgICAvLyBBbGxvdyB0aGUgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXIgYXMgaXNcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXdWYWx1ZS5maWx0ZXIgeyAkMC5pc051bWJlciB9XG5cbiAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGE6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICAvLyBGb3JtYXQgZm9yIFVLOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWE6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIERlZmF1bHQgZm9ybWF0OiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8vLyBGb3JtYXQgYSBVUy9DYW5hZGEgcGhvbmUgbnVtYmVyIChYWFgtWFhYLVhYWFgpXG4gICAgcHJpdmF0ZSBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG5cbiAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA2IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoMylcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBGb3JtYXQgYSBVSyBwaG9uZSBudW1iZXIgKFhYWFgtWFhYLVhYWClcbiAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcblxuICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDcge1xuICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNCkucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNylcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcbiAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDQpXG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlldy5zd2lmdFxuLi4uXG5cbiAgICAvLy8gRm9ybWF0IGEgVVMvQ2FuYWRhIHBob25lIG51bWJlciAoWFhYLVhYWC1YWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVU1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNiB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg2KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCgzKVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhIFVLIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVS1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgIHByaXZhdGUgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuXG4gICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDQpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgICAgICAgICAgdmlld01vZGVsLmVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3TW9kZWwuZWRpdGluZ1Bob25lID0gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0NvcmUvVXRpbGl0aWVzL0hhcHRpY0ZlZWRiYWNrLnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IFVJS2l0XG5cbi8vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgaGFwdGljIGZlZWRiYWNrXG5zdHJ1Y3QgSGFwdGljRmVlZGJhY2sge1xuICAgIC8vLyBUcmlnZ2VyIGEgc3RhbmRhcmQgaGFwdGljIGZlZWRiYWNrIChtZWRpdW0gaW1wYWN0KVxuICAgIHN0YXRpYyBmdW5jIHRyaWdnZXJIYXB0aWMoKSB7XG4gICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAubWVkaXVtKVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgbGlnaHQgaW1wYWN0IGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIGxpZ2h0SW1wYWN0KCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmxpZ2h0KVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgaGVhdnkgaW1wYWN0IGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIGhlYXZ5SW1wYWN0KCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmhlYXZ5KVxuICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgc2VsZWN0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHN0YXRpYyBmdW5jIHNlbGVjdGlvbkZlZWRiYWNrKCkge1xuICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlTZWxlY3Rpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgIGdlbmVyYXRvci5zZWxlY3Rpb25DaGFuZ2VkKClcbiAgICB9XG5cbiAgICAvLy8gVHJpZ2dlciBhIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICBzdGF0aWMgZnVuYyBub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yLkZlZWRiYWNrVHlwZSA9IC5zdWNjZXNzKSB7XG4gICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgZ2VuZXJhdG9yLm5vdGlmaWNhdGlvbk9jY3VycmVkKHR5cGUpXG4gICAgfVxufVxuXG4vLyBHbG9iYWwgZnVuY3Rpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgLSByZW5hbWVkIHRvIGF2b2lkIGNvbmZsaWN0c1xuZnVuYyBtb2NrVHJpZ2dlckhhcHRpYygpIHtcbiAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbn1cbi4uLlxuUGF0aDogTGlmZVNpZ25hbC9MaWZlU2lnbmFsL0NvcmUvSGFwdGljRmVlZGJhY2svSGFwdGljRmVlZGJhY2tDbGllbnQuc3dpZnRcbmltcG9ydCBVSUtpdFxuaW1wb3J0IENvbXBvc2FibGVBcmNoaXRlY3R1cmVcblxuLy8vIEEgY2xpZW50IGZvciBoYXB0aWMgZmVlZGJhY2tcbkBEZXBlbmRlbmN5Q2xpZW50XG5zdHJ1Y3QgSGFwdGljRmVlZGJhY2tDbGllbnQ6IFNlbmRhYmxlIHtcbiAgICAvLy8gVHJpZ2dlciBhIGxpZ2h0IGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgbGlnaHRJbXBhY3Q6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgbWVkaXVtIGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgbWVkaXVtSW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIGhlYXZ5IGltcGFjdCBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgaGVhdnlJbXBhY3Q6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgc2VsZWN0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBzZWxlY3Rpb25GZWVkYmFjazogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSBub3RpZmljYXRpb24gaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiBAU2VuZGFibGUgKF8gdHlwZTogVUlOb3RpZmljYXRpb25GZWVkYmFja0dlbmVyYXRvci5GZWVkYmFja1R5cGUpIC0+IFZvaWQgPSB7IF8gaW4gfVxuXG4gICAgLy8vIFRyaWdnZXIgYSBzdWNjZXNzIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgc3VjY2VzczogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSB3YXJuaW5nIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgd2FybmluZzogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYW4gZXJyb3Igbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBlcnJvcjogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxufVxuXG4vLyBNQVJLOiAtIExpdmUgSW1wbGVtZW50YXRpb25cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50IHtcbiAgICAvLy8gVGhlIGxpdmUgaW1wbGVtZW50YXRpb24gb2YgdGhlIGhhcHRpYyBjbGllbnRcbiAgICBzdGF0aWMgbGV0IGxpdmUgPSBIYXB0aWNDbGllbnQoXG4gICAgICAgIGxpZ2h0SW1wYWN0OiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAubGlnaHQpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBtZWRpdW1JbXBhY3Q6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IC5tZWRpdW0pXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBoZWF2eUltcGFjdDoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLmhlYXZ5KVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5pbXBhY3RPY2N1cnJlZCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0aW9uRmVlZGJhY2s6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJU2VsZWN0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5zZWxlY3Rpb25DaGFuZ2VkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBub3RpZmljYXRpb25GZWVkYmFjazogeyB0eXBlIGluXG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQodHlwZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLnN1Y2Nlc3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlOb3RpZmljYXRpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLm5vdGlmaWNhdGlvbk9jY3VycmVkKC53YXJuaW5nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLmVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKVxufVxuXG4vLyBNQVJLOiAtIE1vY2sgSW1wbGVtZW50YXRpb25cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50IHtcbiAgICAvLy8gQSBtb2NrIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lcyBub3RoaW5nLCBmb3IgdGVzdGluZ1xuICAgIHN0YXRpYyBsZXQgbW9jayA9IFNlbGYoXG4gICAgICAgIGxpZ2h0SW1wYWN0OiB7fSxcbiAgICAgICAgbWVkaXVtSW1wYWN0OiB7fSxcbiAgICAgICAgaGVhdnlJbXBhY3Q6IHt9LFxuICAgICAgICBzZWxlY3Rpb25GZWVkYmFjazoge30sXG4gICAgICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiB7IF8gaW4gfSxcbiAgICAgICAgc3VjY2Vzczoge30sXG4gICAgICAgIHdhcm5pbmc6IHt9LFxuICAgICAgICBlcnJvcjoge31cbiAgICApXG59XG5cbi8vIE1BUks6IC0gRGVwZW5kZW5jeSBSZWdpc3RyYXRpb25cblxuZXh0ZW5zaW9uIERlcGVuZGVuY3lWYWx1ZXMge1xuICAgIC8vLyBUaGUgaGFwdGljIGNsaWVudCBkZXBlbmRlbmN5XG4gICAgdmFyIGhhcHRpYzogSGFwdGljQ2xpZW50IHtcbiAgICAgICAgZ2V0IHsgc2VsZltIYXB0aWNDbGllbnQuc2VsZl0gfVxuICAgICAgICBzZXQgeyBzZWxmW0hhcHRpY0NsaWVudC5zZWxmXSA9IG5ld1ZhbHVlIH1cbiAgICB9XG59XG5cbmV4dGVuc2lvbiBIYXB0aWNGZWVkYmFja0NsaWVudDogRGVwZW5kZW5jeUtleSB7XG4gICAgLy8vIFRoZSBsaXZlIHZhbHVlIG9mIHRoZSBoYXB0aWMgY2xpZW50XG4gICAgc3RhdGljIHZhciBsaXZlVmFsdWU6IEhhcHRpY0NsaWVudCB7XG4gICAgICAgIHJldHVybiAubGl2ZVxuICAgIH1cblxuICAgIC8vLyBUaGUgdGVzdCB2YWx1ZSBvZiB0aGUgaGFwdGljIGNsaWVudFxuICAgIHN0YXRpYyB2YXIgdGVzdFZhbHVlOiBIYXB0aWNDbGllbnQge1xuICAgICAgICByZXR1cm4gLm1vY2tcbiAgICB9XG59XG5cbi8vIE1BUks6IC0gR2xvYmFsIENvbnZlbmllbmNlIEZ1bmN0aW9uXG5cbi8vLyBHbG9iYWwgZnVuY3Rpb24gdG8gdHJpZ2dlciBhIHN0YW5kYXJkIGhhcHRpYyBmZWVkYmFja1xuZnVuYyB0cmlnZ2VySGFwdGljKCkge1xuICAgIEBEZXBlbmRlbmN5KFxcLmhhcHRpYykgdmFyIGhhcHRpY1xuICAgIGhhcHRpYy5tZWRpdW1JbXBhY3QoKVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0NvcmUvRXh0ZW5zaW9ucy9WaWV3cy9WaWV3K0V4dGVuc2lvbnMuc3dpZnRcbi4uLlxuXG4gICAgLy8vIEFkZCBoYXB0aWMgZmVlZGJhY2sgdG8gYSBidXR0b24gb3Igb3RoZXIgaW50ZXJhY3RpdmUgZWxlbWVudFxuICAgIC8vLyAtIFBhcmFtZXRlcnM6XG4gICAgLy8vICAgLSBzdHlsZTogVGhlIGhhcHRpYyBmZWVkYmFjayBzdHlsZSB0byB1c2UgKGRlZmF1bHQ6IC5tZWRpdW0pXG4gICAgLy8vIC0gUmV0dXJuczogQSB2aWV3IHdpdGggaGFwdGljIGZlZWRiYWNrIGFkZGVkXG4gICAgZnVuYyBoYXB0aWNGZWVkYmFjayhzdHlsZTogVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvci5GZWVkYmFja1N0eWxlID0gLm1lZGl1bSkgLT4gc29tZSBWaWV3IHtcbiAgICAgICAgc2VsZi5zaW11bHRhbmVvdXNHZXN0dXJlKFRhcEdlc3R1cmUoKS5vbkVuZGVkIHsgXyBpblxuICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IHN0eWxlKVxuICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLy8gQWRkIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2sgdG8gYSBidXR0b24gb3Igb3RoZXIgaW50ZXJhY3RpdmUgZWxlbWVudFxuICAgIC8vLyAtIFJldHVybnM6IEEgdmlldyB3aXRoIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2sgYWRkZWRcbiAgICBmdW5jIHNlbGVjdGlvbkhhcHRpY0ZlZWRiYWNrKCkgLT4gc29tZSBWaWV3IHtcbiAgICAgICAgc2VsZi5zaW11bHRhbmVvdXNHZXN0dXJlKFRhcEdlc3R1cmUoKS5vbkVuZGVkIHsgXyBpblxuICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJU2VsZWN0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgZ2VuZXJhdG9yLnNlbGVjdGlvbkNoYW5nZWQoKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vLyBBZGQgbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFjayB0byBhIGJ1dHRvbiBvciBvdGhlciBpbnRlcmFjdGl2ZSBlbGVtZW50XG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHR5cGU6IFRoZSBub3RpZmljYXRpb24gZmVlZGJhY2sgdHlwZSB0byB1c2UgKGRlZmF1bHQ6IC5zdWNjZXNzKVxuICAgIC8vLyAtIFJldHVybnM6IEEgdmlldyB3aXRoIG5vdGlmaWNhdGlvbiBoYXB0aWMgZmVlZGJhY2sgYWRkZWRcbiAgICBmdW5jIG5vdGlmaWNhdGlvbkhhcHRpY0ZlZWRiYWNrKHR5cGU6IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IuRmVlZGJhY2tUeXBlID0gLnN1Y2Nlc3MpIC0+IHNvbWUgVmlldyB7XG4gICAgICAgIHNlbGYuc2ltdWx0YW5lb3VzR2VzdHVyZShUYXBHZXN0dXJlKCkub25FbmRlZCB7IF8gaW5cbiAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCh0eXBlKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuLy8vIEV4dGVuc2lvbnMgZm9yIEFycmF5XG5leHRlbnNpb24gQXJyYXkge1xuICAgIC8vLyBTYWZlIHN1YnNjcmlwdCB0aGF0IHJldHVybnMgbmlsIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gICAgc3Vic2NyaXB0KHNhZmUgaW5kZXg6IEludCkgLT4gRWxlbWVudD8ge1xuICAgICAgICByZXR1cm4gaW5kaWNlcy5jb250YWlucyhpbmRleCkgPyBzZWxmW2luZGV4XSA6IG5pbFxuICAgIH1cbn1cbi4uLlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Db3JlL05vdGlmaWNhdGlvbnMvTm90aWZpY2F0aW9uTWFuYWdlci5zd2lmdFxuLi4uXG5cbiAgICAvLy8gU2hvdyBhIGZlZWRiYWNrLW9ubHkgc2lsZW50IG5vdGlmaWNhdGlvbiB0aGF0IGFwcGVhcnMgYXMgYSB0b2FzdCBtZXNzYWdlIGJ1dCBpc24ndCB0cmFja2VkIGluIHRoZSBub3RpZmljYXRpb24gY2VudGVyXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHRpdGxlOiBUaGUgbm90aWZpY2F0aW9uIHRpdGxlXG4gICAgLy8vICAgLSBib2R5OiBUaGUgbm90aWZpY2F0aW9uIGJvZHlcbiAgICAvLy8gICAtIGRlbGF5OiBUaGUgZGVsYXkgYmVmb3JlIHNob3dpbmcgdGhlIG5vdGlmaWNhdGlvblxuICAgIC8vLyAgIC0gY29tcGxldGlvbjogQ29tcGxldGlvbiBoYW5kbGVyIHdpdGggYW4gb3B0aW9uYWwgZXJyb3JcbiAgICBmdW5jIHNob3dGZWVkYmFja05vdGlmaWNhdGlvbihcbiAgICAgICAgdGl0bGU6IFN0cmluZyxcbiAgICAgICAgYm9keTogU3RyaW5nLFxuICAgICAgICBkZWxheTogVGltZUludGVydmFsID0gMC4xLFxuICAgICAgICBjb21wbGV0aW9uOiAoKEVycm9yPykgLT4gVm9pZCk/ID0gbmlsXG4gICAgKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGF1dGhvcml6ZWRcbiAgICAgICAgaWYgIWlzQXV0aG9yaXplZCB7XG4gICAgICAgICAgICAvLyBSZXF1ZXN0IGF1dGhvcml6YXRpb24gaWYgbm90IGF1dGhvcml6ZWRcbiAgICAgICAgICAgIHJlcXVlc3RBdXRob3JpemF0aW9uIHsgZ3JhbnRlZCBpblxuICAgICAgICAgICAgICAgIGlmIGdyYW50ZWQge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjaGVkdWxlU2lsZW50Tm90aWZpY2F0aW9uKHRpdGxlOiB0aXRsZSwgYm9keTogYm9keSwgdHlwZTogLnBpbmdOb3RpZmljYXRpb24sIGRlbGF5OiBkZWxheSwgdHJhY2tJbkNlbnRlcjogZmFsc2UsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbi4uLlxuXG4gICAgICAgIC8vIEFkZCB0aGUgcmVxdWVzdCB0byB0aGUgbm90aWZpY2F0aW9uIGNlbnRlclxuICAgICAgICBVTlVzZXJOb3RpZmljYXRpb25DZW50ZXIuY3VycmVudCgpLmFkZChyZXF1ZXN0KSB7IGVycm9yIGluXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGhhcHRpYyBmZWVkYmFja1xuICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2soKVxuXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBjb21wbGV0aW9uIGhhbmRsZXJcbiAgICAgICAgICAgIGNvbXBsZXRpb24/KGVycm9yKVxuXG4gICAgICAgICAgICAvLyBQb3N0IGEgbm90aWZpY2F0aW9uIHRvIHVwZGF0ZSB0aGUgbm90aWZpY2F0aW9uIGNlbnRlciBpZiB0cmFja2luZyBpcyBlbmFibGVkXG4gICAgICAgICAgICBpZiB0cmFja0luQ2VudGVyIHtcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmaWNhdGlvbkNlbnRlci5wb3N0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBOU05vdGlmaWNhdGlvbi5OYW1lKFwiTmV3Tm90aWZpY2F0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG5pbCxcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm86IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvZHlcIjogYm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiB0eXBlLnJhd1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9DaGVja0luL0NoZWNrSW5WaWV3TW9kZWwuc3dpZnRcbi4uLlxuICAgICAgICBSdW5Mb29wLm1haW4uYWRkKHRhcFJlc2V0VGltZXIhLCBmb3JNb2RlOiAuY29tbW9uKVxuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBzaHJpbmsgdGltZXIgdG8gZ3JhZHVhbGx5IHJlZHVjZSB0aGUgcHJvZ3Jlc3MgYmFyIGlmIG5vdCB0YXBwZWQgYWdhaW5cbiAgICAgICAgc3RhcnRTaHJpbmtUaW1lcigpXG4gICAgfVxuXG4gICAgLy8vIFN0YXJ0IHRoZSBsb25nIHByZXNzIHRpbWVyXG4gICAgZnVuYyBzdGFydExvbmdQcmVzcygpIHtcbiAgICAgICAgLy8gSWYgYWxyZWFkeSBsb25nIHByZXNzaW5nLCBkb24ndCByZXN0YXJ0IHRoZSB0aW1lclxuICAgICAgICBndWFyZCAhaXNMb25nUHJlc3NpbmcgZWxzZSB7IHJldHVybiB9XG5cbiAgICAgICAgLy8gSW5pdGlhbCBoYXB0aWMgZmVlZGJhY2sgdG8gaW5kaWNhdGUgdGhlIGhvbGQgaGFzIHN0YXJ0ZWRcbiAgICAgICAgSGFwdGljRmVlZGJhY2subGlnaHRJbXBhY3QoKVxuXG4gICAgICAgIC8vIFJlc2V0IGFueSBleGlzdGluZyB0aW1lclxuICAgICAgICBsb25nUHJlc3NUaW1lcj8uaW52YWxpZGF0ZSgpXG4gICAgICAgIGxvbmdQcmVzc1RpbWVyID0gbmlsXG5cbiAgICAgICAgLy8gU3RhcnQgZnJlc2hcbiAgICAgICAgaXNMb25nUHJlc3NpbmcgPSB0cnVlXG4gICAgICAgIGxvbmdQcmVzc1Byb2dyZXNzID0gMC4wXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgdGltZXIgdGhhdCB1cGRhdGVzIHRoZSBwcm9ncmVzcyBldmVyeSAwLjA1IHNlY29uZHMgKHNtb290aGVyIHVwZGF0ZXMpXG4gICAgICAgIGxvbmdQcmVzc1RpbWVyID0gVGltZXIuc2NoZWR1bGVkVGltZXIod2l0aFRpbWVJbnRlcnZhbDogMC4wNSwgcmVwZWF0czogdHJ1ZSkgeyBbd2VhayBzZWxmXSBfIGluXG4gICAgICAgICAgICBndWFyZCBsZXQgc2VsZiA9IHNlbGYgZWxzZSB7IHJldHVybiB9XG5cbiAgICAgICAgICAgIGlmIHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgPCAxLjAge1xuICAgICAgICAgICAgICAgIHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgKz0gMC4wMTY3IC8vIEluY3JlYXNlIGJ5IH4xLjY3JSBlYWNoIHRpbWUgKHJlYWNoZXMgMTAwJSBpbiAzIHNlY29uZHMpXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgaGFwdGljIGZlZWRiYWNrIGF0IDMwJSwgNjAlLCA5MCUgcHJvZ3Jlc3MgcG9pbnRzXG4gICAgICAgICAgICAgICAgaWYgSW50KHNlbGYubG9uZ1ByZXNzUHJvZ3Jlc3MgKiAxMDApID09IDMwIHx8XG4gICAgICAgICAgICAgICAgICAgIEludChzZWxmLmxvbmcuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiYTM0NjllMS05M2UzLTQzNzEtYjI2NC01MmVhZjJlYmU2OGU7dG9vbHVfdnJ0eF8wMUVwNmRXOVppTE5ndEdnQkE2Uk5Ec3MiOnsicmVxdWVzdElkIjoiYmEzNDY5ZTEtOTNlMy00MzcxLWIyNjQtNTJlYWYyZWJlNjhlIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUVwNmRXOVppTE5ndEdnQkE2Uk5Ec3MiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQ6XG4gICAgIDFcdGltcG9ydCBGb3VuZGF0aW9uXG4gICAgIDJcdGltcG9ydCBTd2lmdFVJXG4gICAgIDNcdGltcG9ydCBDb21iaW5lXG4gICAgIDRcdGltcG9ydCBVc2VyTm90aWZpY2F0aW9uc1xuICAgICA1XHRpbXBvcnQgVUlLaXRcbiAgICAgNlx0XG4gICAgIDdcdC8vLyBWaWV3IG1vZGVsIGZvciB0aGUgcHJvZmlsZSBzY3JlZW5cbiAgICAgOFx0Y2xhc3MgUHJvZmlsZVZpZXdNb2RlbDogT2JzZXJ2YWJsZU9iamVjdCB7XG4gICAgIDlcdCAgICAvLyBNQVJLOiAtIFB1Ymxpc2hlZCBQcm9wZXJ0aWVzXG4gICAgMTBcdFxuICAgIDExXHQgICAgLy8gVXNlciBQcm9maWxlIFByb3BlcnRpZXNcbiAgICAxMlx0ICAgIEBQdWJsaXNoZWQgdmFyIG5hbWU6IFN0cmluZyA9IFwiU2FyYWggSm9obnNvblwiXG4gICAgMTNcdCAgICBAUHVibGlzaGVkIHZhciBwaG9uZTogU3RyaW5nID0gXCIrMSAoNTU1KSA5ODctNjU0M1wiXG4gICAgMTRcdCAgICBAUHVibGlzaGVkIHZhciBwcm9maWxlRGVzY3JpcHRpb246IFN0cmluZyA9IFwiSSBoYXZlIHR5cGUgMSBkaWFiZXRlcy4gTXkgaW5zdWxpbiBhbmQgc3VwcGxpZXMgYXJlIGluIHRoZSByZWZyaWdlcmF0b3IuIEVtZXJnZW5jeSBjb250YWN0czogTW9tICg1NTUtMTExLTIyMjIpLCBSb29tbWF0ZSBKZW4gKDU1NS0zMzMtNDQ0NCkuIEFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uIE15IGRvY3RvciBpcyBEci4gTWFydGluZXogYXQgQ2l0eSBNZWRpY2FsIENlbnRlciAoNTU1LTc3Ny04ODg4KS5cIlxuICAgIDE1XHRcbiAgICAxNlx0ICAgIC8vIEF2YXRhciBQcm9wZXJ0aWVzXG4gICAgMTdcdCAgICBAUHVibGlzaGVkIHZhciBhdmF0YXJJbWFnZTogVUlJbWFnZT8gPSBuaWxcbiAgICAxOFx0XG4gICAgMTlcdCAgICAvLyBTaGVldCBQcmVzZW50YXRpb24gU3RhdGVzXG4gICAgMjBcdCAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdERlc2NyaXB0aW9uU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIxXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIyXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXRBdmF0YXJTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgMjNcdCAgICBAUHVibGlzaGVkIHZhciBzaG93SW1hZ2VQaWNrZXI6IEJvb2wgPSBmYWxzZVxuICAgIDI0XHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXG4gICAgMjVcdCAgICBAUHVibGlzaGVkIHZhciBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBCb29sID0gZmFsc2VcbiAgICAyNlx0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dTaWduT3V0Q29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyN1x0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyOFx0XG4gICAgMjlcdCAgICAvLyBFZGl0aW5nIFN0YXRlc1xuICAgIDMwXHQgICAgQFB1Ymxpc2hlZCB2YXIgbmV3RGVzY3JpcHRpb246IFN0cmluZyA9IFwiXCJcbiAgICAzMVx0ICAgIEBQdWJsaXNoZWQgdmFyIG5ld05hbWU6IFN0cmluZyA9IFwiXCJcbiAgICAzMlx0ICAgIEBQdWJsaXNoZWQgdmFyIGltYWdlUGlja2VyU291cmNlVHlwZTogVUlJbWFnZVBpY2tlckNvbnRyb2xsZXIuU291cmNlVHlwZSA9IC5waG90b0xpYnJhcnlcbiAgICAzM1x0XG4gICAgMzRcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgMzVcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDM2XHRcbiAgICAzN1x0ICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcbiAgICAzOFx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzTmFtZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgMzlcdCAgICBAUHVibGlzaGVkIHZhciBpc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcbiAgICA0MFx0XG4gICAgNDFcdCAgICAvLyBNQVJLOiAtIENvbXB1dGVkIFByb3BlcnRpZXNcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcbiAgICA0NFx0ICAgIHZhciBpc1VzaW5nRGVmYXVsdEF2YXRhcjogQm9vbCB7XG4gICAgNDVcdCAgICAgICAgcmV0dXJuIGF2YXRhckltYWdlID09IG5pbFxuICAgIDQ2XHQgICAgfVxuICAgIDQ3XHRcbiAgICA0OFx0ICAgIC8vIE1BUks6IC0gSW5pdGlhbGl6YXRpb25cbiAgICA0OVx0XG4gICAgNTBcdCAgICBpbml0KCkge1xuICAgIDUxXHQgICAgICAgIC8vIExvYWQgcGVyc2lzdGVkIGRhdGEgZnJvbSBVc2VyRGVmYXVsdHNcbiAgICA1Mlx0ICAgICAgICBsb2FkUGVyc2lzdGVkRGF0YSgpXG4gICAgNTNcdCAgICB9XG4gICAgNTRcdFxuICAgIDU1XHQgICAgLy8gTUFSSzogLSBNZXRob2RzXG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8vIFByZXBhcmUgdG8gZWRpdCB0aGUgZGVzY3JpcHRpb25cbiAgICA1OFx0ICAgIGZ1bmMgcHJlcGFyZUVkaXREZXNjcmlwdGlvbigpIHtcbiAgICA1OVx0ICAgICAgICBuZXdEZXNjcmlwdGlvbiA9IHByb2ZpbGVEZXNjcmlwdGlvblxuICAgIDYwXHQgICAgICAgIHNob3dFZGl0RGVzY3JpcHRpb25TaGVldCA9IHRydWVcbiAgICA2MVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICA2Mlx0XG4gICAgNjNcdCAgICAgICAgLy8gRm9jdXMgdGhlIHRleHQgZWRpdG9yIHdoZW4gdGhlIHNoZWV0IGFwcGVhcnNcbiAgICA2NFx0ICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC4xKSB7XG4gICAgNjVcdCAgICAgICAgICAgIHNlbGYuaXNEZXNjcmlwdGlvbkZpZWxkRm9jdXNlZCA9IHRydWVcbiAgICA2Nlx0ICAgICAgICB9XG4gICAgNjdcdCAgICB9XG4gICAgNjhcdFxuICAgIDY5XHQgICAgLy8vIFNhdmUgdGhlIGVkaXRlZCBkZXNjcmlwdGlvblxuICAgIDcwXHQgICAgZnVuYyBzYXZlRWRpdGVkRGVzY3JpcHRpb24oKSB7XG4gICAgNzFcdCAgICAgICAgaWYgbmV3RGVzY3JpcHRpb24gIT0gcHJvZmlsZURlc2NyaXB0aW9uICYmXG4gICAgNzJcdCAgICAgICAgICAgIW5ld0Rlc2NyaXB0aW9uLnRyaW1taW5nQ2hhcmFjdGVycyhpbjogLndoaXRlc3BhY2VzQW5kTmV3bGluZXMpLmlzRW1wdHkge1xuICAgIDczXHQgICAgICAgICAgICBwcm9maWxlRGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvblxuICAgIDc0XHQgICAgICAgICAgICBzYXZlUHJvZmlsZURlc2NyaXB0aW9uKClcbiAgICA3NVx0ICAgICAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAgNzZcdCAgICAgICAgfVxuICAgIDc3XHQgICAgfVxuICAgIDc4XHRcbiAgICA3OVx0ICAgIC8vLyBDYW5jZWwgZWRpdGluZyBkZXNjcmlwdGlvblxuICAgIDgwXHQgICAgZnVuYyBjYW5jZWxFZGl0RGVzY3JpcHRpb24oKSB7XG4gICAgODFcdCAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgODJcdCAgICAgICAgc2hvd0VkaXREZXNjcmlwdGlvblNoZWV0ID0gZmFsc2VcbiAgICA4M1x0ICAgIH1cbiAgICA4NFx0XG4gICAgODVcdCAgICAvLy8gUHJlcGFyZSB0byBlZGl0IHRoZSBuYW1lXG4gICAgODZcdCAgICBmdW5jIHByZXBhcmVFZGl0TmFtZSgpIHtcbiAgICA4N1x0ICAgICAgICBuZXdOYW1lID0gbmFtZVxuICAgIDg4XHQgICAgICAgIHNob3dFZGl0TmFtZVNoZWV0ID0gdHJ1ZVxuICAgIDg5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgIDkwXHRcbiAgICA5MVx0ICAgICAgICAvLyBGb2N1cyB0aGUgbmFtZSBmaWVsZCB3aGVuIHRoZSBzaGVldCBhcHBlYXJzXG4gICAgOTJcdCAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDAuMSkge1xuICAgIDkzXHQgICAgICAgICAgICBzZWxmLmlzTmFtZUZpZWxkRm9jdXNlZCA9IHRydWVcbiAgICA5NFx0ICAgICAgICB9XG4gICAgOTVcdCAgICB9XG4gICAgOTZcdFxuICAgIDk3XHQgICAgLy8vIFNhdmUgdGhlIGVkaXRlZCBuYW1lXG4gICAgOThcdCAgICBmdW5jIHNhdmVFZGl0ZWROYW1lKCkge1xuICAgIDk5XHQgICAgICAgIGlmIG5ld05hbWUgIT0gbmFtZSAmJlxuICAgMTAwXHQgICAgICAgICAgICFuZXdOYW1lLnRyaW1taW5nQ2hhcmFjdGVycyhpbjogLndoaXRlc3BhY2VzQW5kTmV3bGluZXMpLmlzRW1wdHkge1xuICAgMTAxXHQgICAgICAgICAgICBuYW1lID0gbmV3TmFtZVxuICAgMTAyXHQgICAgICAgICAgICBzYXZlTmFtZSgpXG4gICAxMDNcdCAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuICAgMTA0XHQgICAgICAgIH1cbiAgIDEwNVx0ICAgIH1cbiAgIDEwNlx0XG4gICAxMDdcdCAgICAvLy8gQ2FuY2VsIGVkaXRpbmcgbmFtZVxuICAgMTA4XHQgICAgZnVuYyBjYW5jZWxFZGl0TmFtZSgpIHtcbiAgIDEwOVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDExMFx0ICAgICAgICBzaG93RWRpdE5hbWVTaGVldCA9IGZhbHNlXG4gICAxMTFcdCAgICB9XG4gICAxMTJcdFxuICAgMTEzXHQgICAgLy8vIFNob3cgdGhlIGF2YXRhciBlZGl0IHNoZWV0XG4gICAxMTRcdCAgICBmdW5jIHNob3dBdmF0YXJFZGl0b3IoKSB7XG4gICAxMTVcdCAgICAgICAgc2hvd0VkaXRBdmF0YXJTaGVldCA9IHRydWVcbiAgIDExNlx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDExN1x0ICAgIH1cbiAgIDExOFx0XG4gICAxMTlcdCAgICAvLy8gQ2xvc2UgdGhlIGF2YXRhciBlZGl0IHNoZWV0XG4gICAxMjBcdCAgICBmdW5jIGNsb3NlQXZhdGFyRWRpdG9yKCkge1xuICAgMTIxXHQgICAgICAgIHNob3dFZGl0QXZhdGFyU2hlZXQgPSBmYWxzZVxuICAgMTIyXHQgICAgfVxuICAgMTIzXHRcbiAgIDEyNFx0ICAgIC8vLyBTaG93IGltYWdlIHBpY2tlciB3aXRoIHNwZWNpZmllZCBzb3VyY2UgdHlwZVxuICAgMTI1XHQgICAgZnVuYyBzaG93SW1hZ2VQaWNrZXJXaXRoU291cmNlVHlwZShfIHNvdXJjZVR5cGU6IFVJSW1hZ2VQaWNrZXJDb250cm9sbGVyLlNvdXJjZVR5cGUpIHtcbiAgIDEyNlx0ICAgICAgICBpbWFnZVBpY2tlclNvdXJjZVR5cGUgPSBzb3VyY2VUeXBlXG4gICAxMjdcdCAgICAgICAgc2hvd0ltYWdlUGlja2VyID0gdHJ1ZVxuICAgMTI4XHQgICAgICAgIHNob3dFZGl0QXZhdGFyU2hlZXQgPSBmYWxzZVxuICAgMTI5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTMwXHQgICAgfVxuICAgMTMxXHRcbiAgIDEzMlx0ICAgIC8vLyBTZXQgdGhlIHVzZXIncyBhdmF0YXIgaW1hZ2VcbiAgIDEzM1x0ICAgIC8vLyAtIFBhcmFtZXRlciBpbWFnZTogVGhlIG5ldyBhdmF0YXIgaW1hZ2VcbiAgIDEzNFx0ICAgIGZ1bmMgc2V0QXZhdGFySW1hZ2UoXyBpbWFnZTogVUlJbWFnZSkge1xuICAgMTM1XHQgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBpbWFnZVxuICAgMTM2XHQgICAgICAgIHNhdmVBdmF0YXJJbWFnZShpbWFnZSlcbiAgIDEzN1x0ICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDEzOFx0ICAgIH1cbiAgIDEzOVx0XG4gICAxNDBcdCAgICAvLy8gRGVsZXRlIHRoZSB1c2VyJ3MgYXZhdGFyIGltYWdlXG4gICAxNDFcdCAgICBmdW5jIGRlbGV0ZUF2YXRhckltYWdlKCkge1xuICAgMTQyXHQgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBuaWxcbiAgIDE0M1x0ICAgICAgICByZW1vdmVBdmF0YXJJbWFnZSgpXG4gICAxNDRcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxNDVcdCAgICB9XG4gICAxNDZcdFxuICAgMTQ3XHQgICAgLy8vIFNob3cgZGVsZXRlIGF2YXRhciBjb25maXJtYXRpb25cbiAgIDE0OFx0ICAgIGZ1bmMgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbkRpYWxvZygpIHtcbiAgIDE0OVx0ICAgICAgICBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTUwXHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTUxXHQgICAgfVxuICAgMTUyXHRcbiAgIDE1M1x0ICAgIC8vLyBTaG93IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgIDE1NFx0ICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgMTU1XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTU2XHQgICAgICAgIHNob3dQaG9uZU51bWJlckNoYW5nZVZpZXcgPSB0cnVlXG4gICAxNTdcdCAgICB9XG4gICAxNThcdFxuICAgMTU5XHQgICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAxNjBcdCAgICAvLy8gLSBQYXJhbWV0ZXJzOlxuICAgMTYxXHQgICAgLy8vICAgLSBuZXdQaG9uZTogVGhlIG5ldyBwaG9uZSBudW1iZXJcbiAgIDE2Mlx0ICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcGhvbmUgcmVnaW9uXG4gICAxNjNcdCAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlZChuZXdQaG9uZTogU3RyaW5nLCByZWdpb246IFN0cmluZykge1xuICAgMTY0XHQgICAgICAgIHNlbGYucGhvbmUgPSBuZXdQaG9uZVxuICAgMTY1XHQgICAgICAgIHNhdmVQaG9uZSgpXG4gICAxNjZcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxNjdcdCAgICB9XG4gICAxNjhcdFxuICAgMTY5XHQgICAgLy8vIFNob3cgc2lnbiBvdXQgY29uZmlybWF0aW9uXG4gICAxNzBcdCAgICBmdW5jIGNvbmZpcm1TaWduT3V0KCkge1xuICAgMTcxXHQgICAgICAgIHNob3dTaWduT3V0Q29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTcyXHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMTczXHQgICAgfVxuICAgMTc0XHRcbiAgIDE3NVx0ICAgIC8vLyBTaWduIG91dCB0aGUgdXNlclxuICAgMTc2XHQgICAgZnVuYyBzaWduT3V0KCkge1xuICAgMTc3XHQgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgc2lnbiBvdXQgdGhlIHVzZXIgZnJvbSB0aGUgc2VydmVyXG4gICAxNzhcdCAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCByZXNldCB0aGUgdXNlciBkYXRhXG4gICAxNzlcdCAgICAgICAgcmVzZXRVc2VyRGF0YSgpXG4gICAxODBcdCAgICAgICAgSGFwdGljRmVlZGJhY2subm90aWZpY2F0aW9uRmVlZGJhY2sodHlwZTogLnN1Y2Nlc3MpXG4gICAxODFcdCAgICB9XG4gICAxODJcdFxuICAgMTgzXHQgICAgLy8vIFJlc2V0IHVzZXIgZGF0YSB3aGVuIHNpZ25pbmcgb3V0XG4gICAxODRcdCAgICBmdW5jIHJlc2V0VXNlckRhdGEoKSB7XG4gICAxODVcdCAgICAgICAgLy8gQ2xlYXIgYW55IHVzZXItc3BlY2lmaWMgZGF0YSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMTg2XHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJOYW1lXCIpXG4gICAxODdcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlclBob25lXCIpXG4gICAxODhcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlclByb2ZpbGVEZXNjcmlwdGlvblwiKVxuICAgMTg5XHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJBdmF0YXJJbWFnZVwiKVxuICAgMTkwXHRcbiAgIDE5MVx0ICAgICAgICAvLyBSZXNldCBpbi1tZW1vcnkgc3RhdGVcbiAgIDE5Mlx0ICAgICAgICBuYW1lID0gXCJTYXJhaCBKb2huc29uXCJcbiAgIDE5M1x0ICAgICAgICBwaG9uZSA9IFwiKzEgKDU1NSkgOTg3LTY1NDNcIlxuICAgMTk0XHQgICAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbiA9IFwiSSBoYXZlIHR5cGUgMSBkaWFiZXRlcy4gTXkgaW5zdWxpbiBhbmQgc3VwcGxpZXMgYXJlIGluIHRoZSByZWZyaWdlcmF0b3IuIEVtZXJnZW5jeSBjb250YWN0czogTW9tICg1NTUtMTExLTIyMjIpLCBSb29tbWF0ZSBKZW4gKDU1NS0zMzMtNDQ0NCkuIEFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uIE15IGRvY3RvciBpcyBEci4gTWFydGluZXogYXQgQ2l0eSBNZWRpY2FsIENlbnRlciAoNTU1LTc3Ny04ODg4KS5cIlxuICAgMTk1XHQgICAgICAgIGF2YXRhckltYWdlID0gbmlsXG4gICAxOTZcdCAgICB9XG4gICAxOTdcdFxuICAgMTk4XHQgICAgLy8gTUFSSzogLSBQcml2YXRlIE1ldGhvZHNcbiAgIDE5OVx0XG4gICAyMDBcdCAgICAvLy8gTG9hZCBwZXJzaXN0ZWQgZGF0YSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMjAxXHQgICAgcHJpdmF0ZSBmdW5jIGxvYWRQZXJzaXN0ZWREYXRhKCkge1xuICAgMjAyXHQgICAgICAgIC8vIExvYWQgdXNlciBuYW1lXG4gICAyMDNcdCAgICAgICAgaWYgbGV0IHVzZXJOYW1lID0gVXNlckRlZmF1bHRzLnN0YW5kYXJkLnN0cmluZyhmb3JLZXk6IFwidXNlck5hbWVcIikge1xuICAgMjA0XHQgICAgICAgICAgICBzZWxmLm5hbWUgPSB1c2VyTmFtZVxuICAgMjA1XHQgICAgICAgIH1cbiAgIDIwNlx0XG4gICAyMDdcdCAgICAgICAgLy8gTG9hZCB1c2VyIHBob25lXG4gICAyMDhcdCAgICAgICAgaWYgbGV0IHVzZXJQaG9uZSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zdHJpbmcoZm9yS2V5OiBcInVzZXJQaG9uZVwiKSB7XG4gICAyMDlcdCAgICAgICAgICAgIHNlbGYucGhvbmUgPSB1c2VyUGhvbmVcbiAgIDIxMFx0ICAgICAgICB9XG4gICAyMTFcdFxuICAgMjEyXHQgICAgICAgIC8vIExvYWQgcHJvZmlsZSBkZXNjcmlwdGlvblxuICAgMjEzXHQgICAgICAgIGlmIGxldCBwcm9maWxlRGVzY3JpcHRpb24gPSBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc3RyaW5nKGZvcktleTogXCJ1c2VyUHJvZmlsZURlc2NyaXB0aW9uXCIpIHtcbiAgIDIxNFx0ICAgICAgICAgICAgc2VsZi5wcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb25cbiAgIDIxNVx0ICAgICAgICB9XG4gICAyMTZcdFxuICAgMjE3XHQgICAgICAgIC8vIExvYWQgYXZhdGFyIGltYWdlIGlmIGF2YWlsYWJsZVxuICAgMjE4XHQgICAgICAgIGxvYWRBdmF0YXJJbWFnZSgpXG4gICAyMTlcdCAgICB9XG4gICAyMjBcdFxuICAgMjIxXHQgICAgLy8vIFNhdmUgdGhlIHVzZXIgbmFtZSB0byBVc2VyRGVmYXVsdHNcbiAgIDIyMlx0ICAgIHByaXZhdGUgZnVuYyBzYXZlTmFtZSgpIHtcbiAgIDIyM1x0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KG5hbWUsIGZvcktleTogXCJ1c2VyTmFtZVwiKVxuICAgMjI0XHQgICAgfVxuICAgMjI1XHRcbiAgIDIyNlx0ICAgIC8vLyBTYXZlIHRoZSB1c2VyIHBob25lIHRvIFVzZXJEZWZhdWx0c1xuICAgMjI3XHQgICAgcHJpdmF0ZSBmdW5jIHNhdmVQaG9uZSgpIHtcbiAgIDIyOFx0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KHBob25lLCBmb3JLZXk6IFwidXNlclBob25lXCIpXG4gICAyMjlcdCAgICB9XG4gICAyMzBcdFxuICAgMjMxXHQgICAgLy8vIFNhdmUgdGhlIHByb2ZpbGUgZGVzY3JpcHRpb24gdG8gVXNlckRlZmF1bHRzXG4gICAyMzJcdCAgICBwcml2YXRlIGZ1bmMgc2F2ZVByb2ZpbGVEZXNjcmlwdGlvbigpIHtcbiAgIDIzM1x0ICAgICAgICBVc2VyRGVmYXVsdHMuc3RhbmRhcmQuc2V0KHByb2ZpbGVEZXNjcmlwdGlvbiwgZm9yS2V5OiBcInVzZXJQcm9maWxlRGVzY3JpcHRpb25cIilcbiAgIDIzNFx0ICAgIH1cbiAgIDIzNVx0XG4gICAyMzZcdCAgICAvLy8gU2F2ZSB0aGUgYXZhdGFyIGltYWdlIHRvIFVzZXJEZWZhdWx0c1xuICAgMjM3XHQgICAgLy8vIC0gUGFyYW1ldGVyIGltYWdlOiBUaGUgaW1hZ2UgdG8gc2F2ZVxuICAgMjM4XHQgICAgcHJpdmF0ZSBmdW5jIHNhdmVBdmF0YXJJbWFnZShfIGltYWdlOiBVSUltYWdlKSB7XG4gICAyMzlcdCAgICAgICAgaWYgbGV0IGltYWdlRGF0YSA9IGltYWdlLmpwZWdEYXRhKGNvbXByZXNzaW9uUXVhbGl0eTogMC44KSB7XG4gICAyNDBcdCAgICAgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5zZXQoaW1hZ2VEYXRhLCBmb3JLZXk6IFwidXNlckF2YXRhckltYWdlXCIpXG4gICAyNDFcdCAgICAgICAgfVxuICAgMjQyXHQgICAgfVxuICAgMjQzXHRcbiAgIDI0NFx0ICAgIC8vLyBMb2FkIHRoZSBhdmF0YXIgaW1hZ2UgZnJvbSBVc2VyRGVmYXVsdHNcbiAgIDI0NVx0ICAgIHByaXZhdGUgZnVuYyBsb2FkQXZhdGFySW1hZ2UoKSB7XG4gICAyNDZcdCAgICAgICAgaWYgbGV0IGltYWdlRGF0YSA9IFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5kYXRhKGZvcktleTogXCJ1c2VyQXZhdGFySW1hZ2VcIikge1xuICAgMjQ3XHQgICAgICAgICAgICBzZWxmLmF2YXRhckltYWdlID0gVUlJbWFnZShkYXRhOiBpbWFnZURhdGEpXG4gICAyNDhcdCAgICAgICAgfVxuICAgMjQ5XHQgICAgfVxuICAgMjUwXHRcbiAgIDI1MVx0ICAgIC8vLyBSZW1vdmUgdGhlIGF2YXRhciBpbWFnZSBmcm9tIFVzZXJEZWZhdWx0c1xuICAgMjUyXHQgICAgcHJpdmF0ZSBmdW5jIHJlbW92ZUF2YXRhckltYWdlKCkge1xuICAgMjUzXHQgICAgICAgIFVzZXJEZWZhdWx0cy5zdGFuZGFyZC5yZW1vdmVPYmplY3QoZm9yS2V5OiBcInVzZXJBdmF0YXJJbWFnZVwiKVxuICAgMjU0XHQgICAgfVxuICAgMjU1XHR9XG4gICAyNTZcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjU2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI0YjI5NGE1My01YThmLTRlZjItYmFlMC1jNDJmZDUxYzYwOGM7dG9vbHVfdnJ0eF8wMTRrVFo2ZURicG16eEZ2MkQ4NzVOWXkiOnsicmVxdWVzdElkIjoiNGIyOTRhNTMtNWE4Zi00ZWYyLWJhZTAtYzQyZmQ1MWM2MDhjIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTRrVFo2ZURicG16eEZ2MkQ4NzVOWXkiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3TW9kZWwuc3dpZnQuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAxXHRpbXBvcnQgRm91bmRhdGlvblxuICAgICAyXHRpbXBvcnQgU3dpZnRVSVxuICAgICAzXHRpbXBvcnQgQ29tYmluZVxuICAgICA0XHRpbXBvcnQgVXNlck5vdGlmaWNhdGlvbnNcbiAgICAgNVx0aW1wb3J0IFVJS2l0XG4gICAgIDZcdFxuICAgICA3XHQvLy8gVmlldyBtb2RlbCBmb3IgdGhlIHByb2ZpbGUgc2NyZWVuXG4gICAgIDhcdGNsYXNzIFByb2ZpbGVWaWV3TW9kZWw6IE9ic2VydmFibGVPYmplY3Qge1xuICAgICA5XHQgICAgLy8gTUFSSzogLSBQdWJsaXNoZWQgUHJvcGVydGllc1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE1XHRcbiAgICAxNlx0ICAgIC8vIEF2YXRhciBQcm9wZXJ0aWVzXG4gICAgMTdcdCAgICBAUHVibGlzaGVkIHZhciBhdmF0YXJJbWFnZTogVUlJbWFnZT8gPSBuaWxcbiAgICAxOFx0XG4gICAgMTlcdCAgICAvLyBTaGVldCBQcmVzZW50YXRpb24gU3RhdGVzXG4gICAgMjBcdCAgICBAUHVibGlzaGVkIHZhciBzaG93RWRpdERlc2NyaXB0aW9uU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIxXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXROYW1lU2hlZXQ6IEJvb2wgPSBmYWxzZVxuICAgIDIyXHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0VkaXRBdmF0YXJTaGVldDogQm9vbCA9IGZhbHNlXG4gICAgMjNcdCAgICBAUHVibGlzaGVkIHZhciBzaG93SW1hZ2VQaWNrZXI6IEJvb2wgPSBmYWxzZVxuICAgIDI0XHQgICAgQFB1Ymxpc2hlZCB2YXIgc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbjogQm9vbCA9IGZhbHNlXG4gICAgMjVcdCAgICBAUHVibGlzaGVkIHZhciBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBCb29sID0gZmFsc2VcbiAgICAyNlx0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dTaWduT3V0Q29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyN1x0ICAgIEBQdWJsaXNoZWQgdmFyIHNob3dDaGVja0luQ29uZmlybWF0aW9uOiBCb29sID0gZmFsc2VcbiAgICAyOFx0XG4gICAgMjlcdCAgICAvLyBQaG9uZSBOdW1iZXIgQ2hhbmdlIFByb3BlcnRpZXNcbiAgICAzMFx0ICAgIEBQdWJsaXNoZWQgdmFyIGVkaXRpbmdQaG9uZTogU3RyaW5nID0gXCJcIlxuICAgIDMxXHQgICAgQFB1Ymxpc2hlZCB2YXIgZWRpdGluZ1Bob25lUmVnaW9uOiBTdHJpbmcgPSBcIlVTXCJcbiAgICAzMlx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzQ29kZVNlbnQ6IEJvb2wgPSBmYWxzZVxuICAgIDMzXHQgICAgQFB1Ymxpc2hlZCB2YXIgdmVyaWZpY2F0aW9uQ29kZTogU3RyaW5nID0gXCJcIlxuICAgIDM0XHQgICAgQFB1Ymxpc2hlZCB2YXIgaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgMzVcdCAgICBAUHVibGlzaGVkIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuICAgIDM2XHQgICAgQFB1Ymxpc2hlZCB2YXIgcGhvbmVFcnJvck1lc3NhZ2U6IFN0cmluZz8gPSBuaWxcbiAgICAzN1x0XG4gICAgMzhcdCAgICAvLyBFZGl0aW5nIFN0YXRlc1xuICAgIDM5XHQgICAgQFB1Ymxpc2hlZCB2YXIgbmV3RGVzY3JpcHRpb246IFN0cmluZyA9IFwiXCJcbiAgICA0MFx0ICAgIEBQdWJsaXNoZWQgdmFyIG5ld05hbWU6IFN0cmluZyA9IFwiXCJcbiAgICA0MVx0ICAgIEBQdWJsaXNoZWQgdmFyIGltYWdlUGlja2VyU291cmNlVHlwZTogVUlJbWFnZVBpY2tlckNvbnRyb2xsZXIuU291cmNlVHlwZSA9IC5waG90b0xpYnJhcnlcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgNDRcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDQ1XHRcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMl06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAvLyBMb2FkaW5nIFN0YXRlXG4gICAgNDRcdCAgICBAUHVibGlzaGVkIHZhciBpc0xvYWRpbmc6IEJvb2wgPSBmYWxzZVxuICAgIDQ1XHRcbiAgICA0Nlx0ICAgIC8vIEZvY3VzIFN0YXRlcyAoZm9yIFN3aWZ0VUkgQEZvY3VzU3RhdGUgYmluZGluZylcbiAgICA0N1x0ICAgIEBQdWJsaXNoZWQgdmFyIGlzTmFtZUZpZWxkRm9jdXNlZDogQm9vbCA9IGZhbHNlXG4gICAgNDhcdCAgICBAUHVibGlzaGVkIHZhciBpc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkOiBCb29sID0gZmFsc2VcbiAgICA0OVx0XG4gICAgNTBcdCAgICAvLyBNQVJLOiAtIENvbXB1dGVkIFByb3BlcnRpZXNcbiAgICA1MVx0XG4gICAgNTJcdCAgICAvLy8gV2hldGhlciB0aGUgdXNlciBpcyB1c2luZyB0aGUgZGVmYXVsdCBhdmF0YXJcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbM106XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0OFx0ICAgIEBQdWJsaXNoZWQgdmFyIGlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQ6IEJvb2wgPSBmYWxzZVxuICAgIDQ5XHRcbiAgICA1MFx0ICAgIC8vIE1BUks6IC0gQ29tcHV0ZWQgUHJvcGVydGllc1xuICAgIDUxXHRcbiAgICA1Mlx0ICAgIC8vLyBXaGV0aGVyIHRoZSB1c2VyIGlzIHVzaW5nIHRoZSBkZWZhdWx0IGF2YXRhclxuICAgIDUzXHQgICAgdmFyIGlzVXNpbmdEZWZhdWx0QXZhdGFyOiBCb29sIHtcbiAgICA1NFx0ICAgICAgICByZXR1cm4gYXZhdGFySW1hZ2UgPT0gbmlsXG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8vIEF2YWlsYWJsZSBwaG9uZSByZWdpb25zXG4gICAgNThcdCAgICBsZXQgcmVnaW9ucyA9IFtcbiAgICA1OVx0ICAgICAgICAoXCJVU1wiLCBcIisxXCIpLFxuICAgIDYwXHQgICAgICAgIChcIkNBXCIsIFwiKzFcIiksXG4gICAgNjFcdCAgICAgICAgKFwiVUtcIiwgXCIrNDRcIiksXG4gICAgNjJcdCAgICAgICAgKFwiQVVcIiwgXCIrNjFcIilcbiAgICA2M1x0ICAgIF1cbiAgICA2NFx0XG4gICAgNjVcdCAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHBob25lIG51bWJlciBpcyB2YWxpZFxuICAgIDY2XHQgICAgdmFyIGlzUGhvbmVOdW1iZXJWYWxpZDogQm9vbCB7XG4gICAgNjdcdCAgICAgICAgLy8gTWF0Y2ggbG9naW4gc2NyZWVuIHZhbGlkYXRpb25cbiAgICA2OFx0ICAgICAgICAvLyBBbGxvdyBkZXZlbG9wbWVudCB0ZXN0aW5nIG51bWJlcnNcbiAgICA2OVx0ICAgICAgICBpZiBlZGl0aW5nUGhvbmUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgZWRpdGluZ1Bob25lID09IFwiMDAwMDAwMDAwMFwiIHx8IGVkaXRpbmdQaG9uZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHtcbiAgICA3MFx0ICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICA3MVx0ICAgICAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgIC8vIFNpbXBsZSB2YWxpZGF0aW9uOiBhdCBsZWFzdCAxMCBkaWdpdHNcbiAgICA3NFx0ICAgICAgICByZXR1cm4gZWRpdGluZ1Bob25lLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPj0gMTBcbiAgICA3NVx0ICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAvLy8gQ29tcHV0ZWQgcHJvcGVydHkgdG8gY2hlY2sgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIHZhbGlkXG4gICAgNzhcdCAgICB2YXIgaXNWZXJpZmljYXRpb25Db2RlVmFsaWQ6IEJvb2wge1xuICAgIDc5XHQgICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICA4MFx0ICAgICAgICByZXR1cm4gdmVyaWZpY2F0aW9uQ29kZS5maWx0ZXIgeyAkMC5pc051bWJlciB9LmNvdW50ID09IDZcbiAgICA4MVx0ICAgIH1cbiAgICA4Mlx0XG4gICAgODNcdCAgICAvLy8gR2V0IHRoZSBwaG9uZSBudW1iZXIgcGxhY2Vob2xkZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgIDg0XHQgICAgdmFyIHBob25lTnVtYmVyUGxhY2Vob2xkZXI6IFN0cmluZyB7XG4gICAgODVcdCAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgODZcdCAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICA4N1x0ICAgICAgICAgICAgcmV0dXJuIFwiWFhYLVhYWC1YWFhYXCIgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhXG4gICAgODhcdCAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgODlcdCAgICAgICAgICAgIHJldHVybiBcIlhYWFgtWFhYLVhYWFwiIC8vIEZvcm1hdCBmb3IgVUtcbiAgICA5MFx0ICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICA5MVx0ICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICA5Mlx0ICAgICAgICBkZWZhdWx0OlxuICAgIDkzXHQgICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBEZWZhdWx0IGZvcm1hdFxuICAgIDk0XHQgICAgICAgIH1cbiAgICA5NVx0ICAgIH1cbiAgICA5Nlx0XG4gICAgOTdcdCAgICAvLyBNQVJLOiAtIEluaXRpYWxpemF0aW9uXG4gICAgOThcdFxuICAgIDk5XHQgICAgaW5pdCgpIHtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbNF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE5OFx0ICAgICAgICBzaG93RGVsZXRlQXZhdGFyQ29uZmlybWF0aW9uID0gdHJ1ZVxuICAgMTk5XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgMjAwXHQgICAgfVxuICAgMjAxXHRcbiAgIDIwMlx0ICAgIC8vLyBTaG93IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlIHZpZXdcbiAgIDIwM1x0ICAgIGZ1bmMgc2hvd1Bob25lTnVtYmVyQ2hhbmdlKCkge1xuICAgMjA0XHQgICAgICAgIC8vIFJlc2V0IHBob25lIG51bWJlciBjaGFuZ2Ugc3RhdGVcbiAgIDIwNVx0ICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICAyMDZcdCAgICAgICAgZWRpdGluZ1Bob25lUmVnaW9uID0gXCJVU1wiXG4gICAyMDdcdCAgICAgICAgaXNDb2RlU2VudCA9IGZhbHNlXG4gICAyMDhcdCAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSA9IFwiXCJcbiAgIDIwOVx0ICAgICAgICBwaG9uZUVycm9yTWVzc2FnZSA9IG5pbFxuICAgMjEwXHRcbiAgIDIxMVx0ICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDIxMlx0ICAgICAgICBzaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3ID0gdHJ1ZVxuICAgMjEzXHRcbiAgIDIxNFx0ICAgICAgICAvLyBGb2N1cyB0aGUgcGhvbmUgbnVtYmVyIGZpZWxkIHdoZW4gdGhlIHZpZXcgYXBwZWFyc1xuICAgMjE1XHQgICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAwLjEpIHtcbiAgIDIxNlx0ICAgICAgICAgICAgc2VsZi5pc1Bob25lTnVtYmVyRmllbGRGb2N1c2VkID0gdHJ1ZVxuICAgMjE3XHQgICAgICAgIH1cbiAgIDIxOFx0ICAgIH1cbiAgIDIxOVx0XG4gICAyMjBcdCAgICAvLy8gQ2FuY2VsIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDIyMVx0ICAgIGZ1bmMgY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKSB7XG4gICAyMjJcdCAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAyMjNcdCAgICAgICAgc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IGZhbHNlXG4gICAyMjRcdCAgICAgICAgaXNDb2RlU2VudCA9IGZhbHNlXG4gICAyMjVcdCAgICB9XG4gICAyMjZcdFxuICAgMjI3XHQgICAgLy8vIFNlbmQgdmVyaWZpY2F0aW9uIGNvZGUgZm9yIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDIyOFx0ICAgIGZ1bmMgc2VuZFBob25lQ2hhbmdlVmVyaWZpY2F0aW9uQ29kZSgpIHtcbiAgIDIyOVx0ICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byB0aGUgcGhvbmUgbnVtYmVyXG4gICAyMzBcdCAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5XG4gICAyMzNcdCAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgMjM0XHQgICAgICAgICAgICBndWFyZCBsZXQgc2VsZiA9IHNlbGYgZWxzZSB7IHJldHVybiB9XG4gICAyMzVcdCAgICAgICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2VcbiAgIDIzNlx0ICAgICAgICAgICAgc2VsZi5pc0NvZGVTZW50ID0gdHJ1ZVxuICAgMjM3XHQgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDIzOFx0XG4gICAyMzlcdCAgICAgICAgICAgIC8vIEZvY3VzIHRoZSB2ZXJpZmljYXRpb24gY29kZSBmaWVsZFxuICAgMjQwXHQgICAgICAgICAgICBEaXNwYXRjaFF1ZXVlLm1haW4uYXN5bmNBZnRlcihkZWFkbGluZTogLm5vdygpICsgMC41KSB7XG4gICAyNDFcdCAgICAgICAgICAgICAgICBzZWxmLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IHRydWVcbiAgIDI0Mlx0ICAgICAgICAgICAgfVxuICAgMjQzXHQgICAgICAgIH1cbiAgIDI0NFx0ICAgIH1cbiAgIDI0NVx0XG4gICAyNDZcdCAgICAvLy8gVmVyaWZ5IHRoZSBwaG9uZSBudW1iZXIgY2hhbmdlXG4gICAyNDdcdCAgICBmdW5jIHZlcmlmeVBob25lQ2hhbmdlKCkge1xuICAgMjQ4XHQgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHRoaXMgd291bGQgdmVyaWZ5IHRoZSBjb2RlIHdpdGggdGhlIHNlcnZlclxuICAgMjQ5XHQgICAgICAgIGlzTG9hZGluZyA9IHRydWVcbiAgIDI1MFx0XG4gICAyNTFcdCAgICAgICAgLy8gU2ltdWxhdGUgbmV0d29yayBkZWxheVxuICAgMjUyXHQgICAgICAgIERpc3BhdGNoUXVldWUubWFpbi5hc3luY0FmdGVyKGRlYWRsaW5lOiAubm93KCkgKyAxLjUpIHsgW3dlYWsgc2VsZl0gaW5cbiAgIDI1M1x0ICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgMjU0XHQgICAgICAgICAgICBzZWxmLmlzTG9hZGluZyA9IGZhbHNlXG4gICAyNTVcdFxuICAgMjU2XHQgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxuICAgMjU3XHQgICAgICAgICAgICBpZiAhc2VsZi5lZGl0aW5nUGhvbmUuaXNFbXB0eSAmJiBzZWxmLnZlcmlmaWNhdGlvbkNvZGUuY291bnQgPj0gNCB7XG4gICAyNThcdCAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkUGhvbmUgPSBQaG9uZUZvcm1hdHRlci5mb3JtYXRQaG9uZU51bWJlcihzZWxmLmVkaXRpbmdQaG9uZSwgcmVnaW9uOiBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgIDI1OVx0ICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBmb3JtYXR0ZWRQaG9uZSwgcmVnaW9uOiBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgIDI2MFx0ICAgICAgICAgICAgICAgIHNlbGYuc2hvd1Bob25lTnVtYmVyQ2hhbmdlVmlldyA9IGZhbHNlXG4gICAyNjFcdCAgICAgICAgICAgICAgICBzZWxmLmlzQ29kZVNlbnQgPSBmYWxzZVxuICAgMjYyXHQgICAgICAgICAgICB9XG4gICAyNjNcdCAgICAgICAgfVxuICAgMjY0XHQgICAgfVxuICAgMjY1XHRcbiAgIDI2Nlx0ICAgIC8vLyBIYW5kbGUgcGhvbmUgbnVtYmVyIHRleHQgY2hhbmdlXG4gICAyNjdcdCAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgIDI2OFx0ICAgICAgICAvLyBDaGVjayBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZyBudW1iZXJcbiAgIDI2OVx0ICAgICAgICBpZiBuZXdWYWx1ZSA9PSBcIisxMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMTIzNDU2Nzg5MFwiIHx8IG5ld1ZhbHVlID09IFwiMDAwMDAwMDAwMFwiIHtcbiAgIDI3MFx0ICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAyNzFcdCAgICAgICAgICAgIHJldHVyblxuICAgMjcyXHQgICAgICAgIH1cbiAgIDI3M1x0XG4gICAyNzRcdCAgICAgICAgLy8gRm9ybWF0IHRoZSBwaG9uZSBudW1iZXIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHJlZ2lvblxuICAgMjc1XHQgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5ld1ZhbHVlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH1cbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgc3dpdGNoIGVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAyNzhcdCAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgIDI3OVx0ICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgIDI4MFx0ICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgIDI4MVx0ICAgICAgICBjYXNlIFwiVUtcIjpcbiAgIDI4Mlx0ICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAyODNcdCAgICAgICAgICAgIGZvcm1hdFVLUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAyODRcdCAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAyODVcdCAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgIDI4Nlx0ICAgICAgICAgICAgZm9ybWF0QVVQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgIDI4N1x0ICAgICAgICBkZWZhdWx0OlxuICAgMjg4XHQgICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAyODlcdCAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAyOTBcdCAgICAgICAgfVxuICAgMjkxXHQgICAgfVxuICAgMjkyXHRcbiAgIDI5M1x0ICAgIC8vLyBIYW5kbGUgdmVyaWZpY2F0aW9uIGNvZGUgdGV4dCBjaGFuZ2VcbiAgIDI5NFx0ICAgIGZ1bmMgaGFuZGxlVmVyaWZpY2F0aW9uQ29kZUNoYW5nZShuZXdWYWx1ZTogU3RyaW5nKSB7XG4gICAyOTVcdCAgICAgICAgLy8gRm9ybWF0IHRoZSB2ZXJpZmljYXRpb24gY29kZSBhcyBYWFgtWFhYXG4gICAyOTZcdCAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuICAgMjk3XHRcbiAgIDI5OFx0ICAgICAgICAvLyBMaW1pdCB0byA2IGRpZ2l0c1xuICAgMjk5XHQgICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDYpKVxuICAgMzAwXHRcbiAgIDMwMVx0ICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5cbiAgIDMwMlx0ICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAzIHtcbiAgIDMwM1x0ICAgICAgICAgICAgbGV0IGZpcnN0UGFydCA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoMylcbiAgIDMwNFx0ICAgICAgICAgICAgbGV0IHNlY29uZFBhcnQgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpXG4gICAzMDVcdCAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUgPSBcIlxcKGZpcnN0UGFydCktXFwoc2Vjb25kUGFydClcIlxuICAgMzA2XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQgIT0gdmVyaWZpY2F0aW9uQ29kZSB7XG4gICAzMDdcdCAgICAgICAgICAgIC8vIEp1c3QgdXNlIHRoZSBmaWx0ZXJlZCBkaWdpdHMgaWYgMyBvciBmZXdlclxuICAgMzA4XHQgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gbGltaXRlZEZpbHRlcmVkXG4gICAzMDlcdCAgICAgICAgfVxuICAgMzEwXHQgICAgfVxuICAgMzExXHRcbiAgIDMxMlx0ICAgIC8vLyBIYW5kbGUgcmVnaW9uIHNlbGVjdGlvbiBjaGFuZ2VcbiAgIDMxM1x0ICAgIGZ1bmMgaGFuZGxlUmVnaW9uQ2hhbmdlKCkge1xuICAgMzE0XHQgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnNlbGVjdGlvbkZlZWRiYWNrKClcbiAgIDMxNVx0ICAgIH1cbiAgIDMxNlx0XG4gICAzMTdcdCAgICAvLy8gSGFuZGxlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgIDMxOFx0ICAgIC8vLyAtIFBhcmFtZXRlcnM6XG4gICAzMTlcdCAgICAvLy8gICAtIG5ld1Bob25lOiBUaGUgbmV3IHBob25lIG51bWJlclxuICAgMzIwXHQgICAgLy8vICAgLSByZWdpb246IFRoZSBwaG9uZSByZWdpb25cbiAgIDMyMVx0ICAgIGZ1bmMgaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2VkKG5ld1Bob25lOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSB7XG4gICAzMjJcdCAgICAgICAgc2VsZi5waG9uZSA9IG5ld1Bob25lXG4gICAzMjNcdCAgICAgICAgc2F2ZVBob25lKClcbiAgIDMyNFx0ICAgICAgICBIYXB0aWNGZWVkYmFjay5ub3RpZmljYXRpb25GZWVkYmFjayh0eXBlOiAuc3VjY2VzcylcbiAgIDMyNVx0ICAgIH1cbiAgIDMyNlx0XG4gICAzMjdcdCAgICAvLy8gU2hvdyBzaWduIG91dCBjb25maXJtYXRpb25cbiAgIDMyOFx0ICAgIGZ1bmMgY29uZmlybVNpZ25PdXQoKSB7XG4gICAzMjlcdCAgICAgICAgc2hvd1NpZ25PdXRDb25maXJtYXRpb24gPSB0cnVlXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzVdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA0MDVcdCAgICAgICAgICAgIHNlbGYuYXZhdGFySW1hZ2UgPSBVSUltYWdlKGRhdGE6IGltYWdlRGF0YSlcbiAgIDQwNlx0ICAgICAgICB9XG4gICA0MDdcdCAgICB9XG4gICA0MDhcdFxuICAgNDA5XHQgICAgLy8vIFJlbW92ZSB0aGUgYXZhdGFyIGltYWdlIGZyb20gVXNlckRlZmF1bHRzXG4gICA0MTBcdCAgICBwcml2YXRlIGZ1bmMgcmVtb3ZlQXZhdGFySW1hZ2UoKSB7XG4gICA0MTFcdCAgICAgICAgVXNlckRlZmF1bHRzLnN0YW5kYXJkLnJlbW92ZU9iamVjdChmb3JLZXk6IFwidXNlckF2YXRhckltYWdlXCIpXG4gICA0MTJcdCAgICB9XG4gICA0MTNcdFxuICAgNDE0XHQgICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXIgKFhYWC1YWFgtWFhYWClcbiAgIDQxNVx0ICAgIHByaXZhdGUgZnVuYyBmb3JtYXRVU1Bob25lTnVtYmVyKF8gZmlsdGVyZWQ6IFN0cmluZykge1xuICAgNDE2XHQgICAgICAgIC8vIExpbWl0IHRvIDEwIGRpZ2l0c1xuICAgNDE3XHQgICAgICAgIGxldCBsaW1pdGVkRmlsdGVyZWQgPSBTdHJpbmcoZmlsdGVyZWQucHJlZml4KDEwKSlcbiAgIDQxOFx0XG4gICA0MTlcdCAgICAgICAgLy8gRm9ybWF0IHdpdGggaHlwaGVuc1xuICAgNDIwXHQgICAgICAgIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDYge1xuICAgNDIxXHQgICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICA0MjJcdCAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpLnByZWZpeCgzKVxuICAgNDIzXHQgICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNilcbiAgIDQyNFx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KS1cXChsaW5lTnVtYmVyKVwiXG4gICA0MjVcdCAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDMge1xuICAgNDI2XHQgICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRmlsdGVyZWQucHJlZml4KDMpXG4gICA0MjdcdCAgICAgICAgICAgIGxldCBwcmVmaXggPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDMpXG4gICA0MjhcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeClcIlxuICAgNDI5XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiAwIHtcbiAgIDQzMFx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gbGltaXRlZEZpbHRlcmVkXG4gICA0MzFcdCAgICAgICAgfSBlbHNlIHtcbiAgIDQzMlx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcIlxuICAgNDMzXHQgICAgICAgIH1cbiAgIDQzNFx0ICAgIH1cbiAgIDQzNVx0XG4gICA0MzZcdCAgICAvLy8gRm9ybWF0IGEgVUsgcGhvbmUgbnVtYmVyIChYWFhYLVhYWC1YWFgpXG4gICA0MzdcdCAgICBwcml2YXRlIGZ1bmMgZm9ybWF0VUtQaG9uZU51bWJlcihfIGZpbHRlcmVkOiBTdHJpbmcpIHtcbiAgIDQzOFx0ICAgICAgICAvLyBMaW1pdCB0byAxMCBkaWdpdHNcbiAgIDQzOVx0ICAgICAgICBsZXQgbGltaXRlZEZpbHRlcmVkID0gU3RyaW5nKGZpbHRlcmVkLnByZWZpeCgxMCkpXG4gICA0NDBcdFxuICAgNDQxXHQgICAgICAgIC8vIEZvcm1hdCB3aXRoIGh5cGhlbnNcbiAgIDQ0Mlx0ICAgICAgICBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA3IHtcbiAgIDQ0M1x0ICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgNDQ0XHQgICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KS5wcmVmaXgoMylcbiAgIDQ0NVx0ICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRmlsdGVyZWQuZHJvcEZpcnN0KDcpXG4gICA0NDZcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXFwoYXJlYUNvZGUpLVxcKHByZWZpeCktXFwobGluZU51bWJlcilcIlxuICAgNDQ3XHQgICAgICAgIH0gZWxzZSBpZiBsaW1pdGVkRmlsdGVyZWQuY291bnQgPiA0IHtcbiAgIDQ0OFx0ICAgICAgICAgICAgbGV0IGFyZWFDb2RlID0gbGltaXRlZEZpbHRlcmVkLnByZWZpeCg0KVxuICAgNDQ5XHQgICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg0KVxuICAgNDUwXHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpXCJcbiAgIDQ1MVx0ICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gMCB7XG4gICA0NTJcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IGxpbWl0ZWRGaWx0ZXJlZFxuICAgNDUzXHQgICAgICAgIH0gZWxzZSB7XG4gICA0NTRcdCAgICAgICAgICAgIGVkaXRpbmdQaG9uZSA9IFwiXCJcbiAgIDQ1NVx0ICAgICAgICB9XG4gICA0NTZcdCAgICB9XG4gICA0NTdcdFxuICAgNDU4XHQgICAgLy8vIEZvcm1hdCBhbiBBdXN0cmFsaWFuIHBob25lIG51bWJlciAoWFhYWC1YWFgtWFhYKVxuICAgNDU5XHQgICAgcHJpdmF0ZSBmdW5jIGZvcm1hdEFVUGhvbmVOdW1iZXIoXyBmaWx0ZXJlZDogU3RyaW5nKSB7XG4gICA0NjBcdCAgICAgICAgLy8gTGltaXQgdG8gMTAgZGlnaXRzXG4gICA0NjFcdCAgICAgICAgbGV0IGxpbWl0ZWRGaWx0ZXJlZCA9IFN0cmluZyhmaWx0ZXJlZC5wcmVmaXgoMTApKVxuICAgNDYyXHRcbiAgIDQ2M1x0ICAgICAgICAvLyBGb3JtYXQgd2l0aCBoeXBoZW5zXG4gICA0NjRcdCAgICAgICAgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNyB7XG4gICA0NjVcdCAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgIDQ2Nlx0ICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNCkucHJlZml4KDMpXG4gICA0NjdcdCAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gbGltaXRlZEZpbHRlcmVkLmRyb3BGaXJzdCg3KVxuICAgNDY4XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlxcKGFyZWFDb2RlKS1cXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgIDQ2OVx0ICAgICAgICB9IGVsc2UgaWYgbGltaXRlZEZpbHRlcmVkLmNvdW50ID4gNCB7XG4gICA0NzBcdCAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWRGaWx0ZXJlZC5wcmVmaXgoNClcbiAgIDQ3MVx0ICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWRGaWx0ZXJlZC5kcm9wRmlyc3QoNClcbiAgIDQ3Mlx0ICAgICAgICAgICAgZWRpdGluZ1Bob25lID0gXCJcXChhcmVhQ29kZSktXFwocHJlZml4KVwiXG4gICA0NzNcdCAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWRGaWx0ZXJlZC5jb3VudCA+IDAge1xuICAgNDc0XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBsaW1pdGVkRmlsdGVyZWRcbiAgIDQ3NVx0ICAgICAgICB9IGVsc2Uge1xuICAgNDc2XHQgICAgICAgICAgICBlZGl0aW5nUGhvbmUgPSBcIlwiXG4gICA0NzdcdCAgICAgICAgfVxuICAgNDc4XHQgICAgfVxuICAgNDc5XHR9XG4gICA0ODBcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlNzA0YzYzOS0wNWE5LTQzNmYtOTk0Zi0xMWJiZDA3MWYzYjM7dG9vbHVfdnJ0eF8wMVlUcVJqOEYzVFlKR0wzQkxvZ0ZMOXkiOnsicmVxdWVzdElkIjoiZTcwNGM2MzktMDVhOS00MzZmLTk5NGYtMTFiYmQwNzFmM2IzIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVlUcVJqOEYzVFlKR0wzQkxvZ0ZMOXkiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0OlxuICAgICAxXHRpbXBvcnQgU3dpZnRVSVxuICAgICAyXHRpbXBvcnQgRm91bmRhdGlvblxuICAgICAzXHRpbXBvcnQgUGhvdG9zVUlcbiAgICAgNFx0aW1wb3J0IENvbWJpbmVcbiAgICAgNVx0aW1wb3J0IFVJS2l0XG4gICAgIDZcdFxuICAgICA3XHQvLyBNQVJLOiAtIE1haW4gUHJvZmlsZSBWaWV3XG4gICAgIDhcdHN0cnVjdCBQcm9maWxlVmlldzogVmlldyB7XG4gICAgIDlcdCAgICBAU3RhdGVPYmplY3QgcHJpdmF0ZSB2YXIgdmlld01vZGVsID0gUHJvZmlsZVZpZXdNb2RlbCgpXG4gICAgMTBcdCAgICBARW52aXJvbm1lbnQoXFwucHJlc2VudGF0aW9uTW9kZSkgcHJpdmF0ZSB2YXIgcHJlc2VudGF0aW9uTW9kZVxuICAgIDExXHRcbiAgICAxMlx0ICAgIC8vIEZvY3VzIHN0YXRlIGZvciB0aGUgdGV4dCBlZGl0b3JcbiAgICAxM1x0ICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHRleHRFZGl0b3JGb2N1c2VkOiBCb29sXG4gICAgMTRcdFxuICAgIDE1XHQgICAgLy8gRm9jdXMgc3RhdGUgZm9yIHRoZSBuYW1lIGZpZWxkXG4gICAgMTZcdCAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciBuYW1lRmllbGRGb2N1c2VkOiBCb29sXG4gICAgMTdcdFxuICAgIDE4XHQgICAgdmFyIGJvZHk6IHNvbWUgVmlldyB7XG4gICAgMTlcdCAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgMjBcdCAgICAgICAgICAgIFZTdGFjayB7XG4gICAgMjFcdCAgICAgICAgICAgICAgICAvLyBQcm9maWxlIEhlYWRlclxuICAgIDIyXHQgICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDE2KSB7XG4gICAgMjNcdCAgICAgICAgICAgICAgICAgICAgQ29tbW9uQXZhdGFyVmlldyhcbiAgICAyNFx0ICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdmlld01vZGVsLm5hbWUsXG4gICAgMjVcdCAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB2aWV3TW9kZWwuYXZhdGFySW1hZ2UsXG4gICAgMjZcdCAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDgwLFxuICAgIDI3XHQgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IENvbG9yLmJsdWUub3BhY2l0eSgwLjEpLFxuICAgIDI4XHQgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IC5ibHVlLFxuICAgIDI5XHQgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMixcbiAgICAzMFx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IC5ibHVlXG4gICAgMzFcdCAgICAgICAgICAgICAgICAgICAgKVxuICAgIDMyXHQgICAgICAgICAgICAgICAgICAgIFRleHQodmlld01vZGVsLm5hbWUpXG4gICAgMzNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAzNFx0ICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5waG9uZS5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogdmlld01vZGVsLnBob25lKVxuICAgIDM1XHQgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICAgMzZcdCAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgICAzN1x0ICAgICAgICAgICAgICAgIH1cbiAgICAzOFx0ICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDIwKVxuICAgIDM5XHRcbiAgICA0MFx0ICAgICAgICAgICAgICAgIC8vIERlc2NyaXB0aW9uIFNldHRpbmcgQ2FyZFxuICAgIDQxXHQgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgIDQyXHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5wcmVwYXJlRWRpdERlc2NyaXB0aW9uKClcbiAgICA0M1x0ICAgICAgICAgICAgICAgIH0pIHtcbiAgICA0NFx0ICAgICAgICAgICAgICAgICAgICBIU3RhY2soYWxpZ25tZW50OiAudG9wKSB7XG4gICAgNDVcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQodmlld01vZGVsLnByb2ZpbGVEZXNjcmlwdGlvbi5pc0VtcHR5ID8gXCJUaGlzIGlzIHNpbXBseSBhIG5vdGUgZm9yIGNvbnRhY3RzLlwiIDogdmlld01vZGVsLnByb2ZpbGVEZXNjcmlwdGlvbilcbiAgICA0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgIDQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICA0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tdWx0aWxpbmVUZXh0QWxpZ25tZW50KC5sZWFkaW5nKVxuICAgIDQ5XHQgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgIDUwXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA1MVx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgIDUyXHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgIDUzXHQgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgIDU0XHQgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgNTVcdCAgICAgICAgICAgICAgICB9XG4gICAgNTZcdCAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgICA1N1x0ICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDgpXG4gICAgNThcdCAgICAgICAgICAgICAgICAucGFkZGluZyguYm90dG9tLCA4KVxuICAgIDU5XHRcbiAgICA2MFx0ICAgICAgICAgICAgICAgIC8vIEdyb3VwZWQgVXBkYXRlIENhcmRzXG4gICAgNjFcdCAgICAgICAgICAgICAgICBWU3RhY2soc3BhY2luZzogMCkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICA2M1x0ICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNob3dBdmF0YXJFZGl0b3IoKVxuICAgIDY0XHQgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgICA2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgICA2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJVcGRhdGUgQXZhdGFyXCIpXG4gICAgNjdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgNjhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICA2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcigpXG4gICAgNzBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbWFnZShzeXN0ZW1OYW1lOiBcImNoZXZyb24ucmlnaHRcIilcbiAgICA3MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAgNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICA3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICA3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgNzVcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgIDc2XHQgICAgICAgICAgICAgICAgICAgIERpdmlkZXIoKS5wYWRkaW5nKC5sZWFkaW5nKVxuICAgIDc3XHQgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICA3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnByZXBhcmVFZGl0TmFtZSgpXG4gICAgNzlcdCAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIDgwXHQgICAgICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgIDgxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlVwZGF0ZSBOYW1lXCIpXG4gICAgODJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAgODNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICA4NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlcigpXG4gICAgODVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbWFnZShzeXN0ZW1OYW1lOiBcImNoZXZyb24ucmlnaHRcIilcbiAgICA4Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAgODdcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICA4OFx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgICA4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgOTBcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgIDkxXHQgICAgICAgICAgICAgICAgfVxuICAgIDkyXHQgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAgOTNcdCAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgIDk0XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgOTVcdCAgICAgICAgICAgICAgICAucGFkZGluZyguYm90dG9tLCA4KVxuICAgIDk2XHRcbiAgICA5N1x0ICAgICAgICAgICAgICAgIC8vIFBob25lIE51bWJlciBTZXR0aW5nIENhcmRcbiAgICA5OFx0ICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICA5OVx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2hvd1Bob25lTnVtYmVyQ2hhbmdlKClcbiAgIDEwMFx0ICAgICAgICAgICAgICAgIH0pIHtcbiAgIDEwMVx0ICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgMTAyXHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ2hhbmdlIFBob25lIE51bWJlclwiKVxuICAgMTAzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICAxMDRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMTA1XHQgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgMTA2XHQgICAgICAgICAgICAgICAgICAgICAgICBJbWFnZShzeXN0ZW1OYW1lOiBcImNoZXZyb24ucmlnaHRcIilcbiAgIDEwN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgIDEwOFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxMDlcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgIDExMFx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDExMVx0ICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDExMlx0ICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgMTEzXHQgICAgICAgICAgICAgICAgfVxuICAgMTE0XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAxMTVcdCAgICAgICAgICAgICAgICAucGFkZGluZyguYm90dG9tLCA4KVxuICAgMTE2XHRcbiAgIDExN1x0ICAgICAgICAgICAgICAgIC8vIFNpZ24gT3V0IFNldHRpbmcgQ2FyZFxuICAgMTE4XHQgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgMTE5XHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jb25maXJtU2lnbk91dCgpXG4gICAxMjBcdCAgICAgICAgICAgICAgICB9KSB7XG4gICAxMjFcdCAgICAgICAgICAgICAgICAgICAgVGV4dChcIlNpZ24gT3V0XCIpXG4gICAxMjJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgMTIzXHQgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAxMjRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5mcmFtZShtYXhXaWR0aDogLmluZmluaXR5KVxuICAgMTI1XHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgMTI2XHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDEyN1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAxMjhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAxMjlcdCAgICAgICAgICAgICAgICB9XG4gICAxMzBcdCAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDEzMVx0XG4gICAxMzJcdCAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgMTMzXHQgICAgICAgICAgICB9XG4gICAxMzRcdCAgICAgICAgfVxuICAgMTM1XHQgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMTM2XHQgICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93UGhvbmVOdW1iZXJDaGFuZ2VWaWV3KSB7XG4gICAxMzdcdCAgICAgICAgICAgIHBob25lTnVtYmVyQ2hhbmdlVmlld1xuICAgMTM4XHQgICAgICAgIH1cbiAgIDEzOVx0ICAgICAgICAuYWxlcnQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0NoZWNrSW5Db25maXJtYXRpb24pIHtcbiAgIDE0MFx0ICAgICAgICAgICAgQWxlcnQoXG4gICAxNDFcdCAgICAgICAgICAgICAgICB0aXRsZTogVGV4dChcIkNvbmZpcm0gQ2hlY2staW5cIiksXG4gICAxNDJcdCAgICAgICAgICAgICAgICBtZXNzYWdlOiBUZXh0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNoZWNrIGluIG5vdz8gVGhpcyB3aWxsIHJlc2V0IHlvdXIgdGltZXIuXCIpLFxuICAgMTQzXHQgICAgICAgICAgICAgICAgcHJpbWFyeUJ1dHRvbjogLmRlZmF1bHQoVGV4dChcIkNoZWNrIEluXCIpKSB7XG4gICAxNDRcdCAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3b3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSB2aWV3IG1vZGVsIGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvblxuICAgMTQ1XHQgICAgICAgICAgICAgICAgfSxcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgIHNlY29uZGFyeUJ1dHRvbjogLmNhbmNlbCgpXG4gICAxNDdcdCAgICAgICAgICAgIClcbiAgIDE0OFx0ICAgICAgICB9XG4gICAxNDlcdCAgICAgICAgLmFsZXJ0KFwiU2lnbiBPdXRcIiwgaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd1NpZ25PdXRDb25maXJtYXRpb24pIHtcbiAgIDE1MFx0ICAgICAgICAgICAgQnV0dG9uKFwiQ2FuY2VsXCIsIHJvbGU6IC5jYW5jZWwpIHtcbiAgIDE1MVx0ICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgIDE1Mlx0ICAgICAgICAgICAgfVxuICAgMTUzXHQgICAgICAgICAgICBCdXR0b24oXCJTaWduIE91dFwiLCByb2xlOiAuZGVzdHJ1Y3RpdmUpIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaWduT3V0KClcbiAgIDE1NVx0ICAgICAgICAgICAgICAgIC8vIE5hdmlnYXRpb24gdG8gc2lnbi1pbiBzY3JlZW4gd291bGQgYmUgaGFuZGxlZCBieSBhIGNvb3JkaW5hdG9yIG9yIHBhcmVudCB2aWV3XG4gICAxNTZcdCAgICAgICAgICAgIH1cbiAgIDE1N1x0ICAgICAgICB9IG1lc3NhZ2U6IHtcbiAgIDE1OFx0ICAgICAgICAgICAgVGV4dChcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzaWduIG91dD9cIilcbiAgIDE1OVx0ICAgICAgICB9XG4gICAxNjBcdCAgICAgICAgLnNoZWV0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dFZGl0RGVzY3JpcHRpb25TaGVldCkge1xuICAgMTYxXHQgICAgICAgICAgICBlbWVyZ2VuY3lOb3RlU2hlZXRWaWV3XG4gICAxNjJcdCAgICAgICAgfVxuICAgMTYzXHQgICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93RWRpdE5hbWVTaGVldCkge1xuICAgMTY0XHQgICAgICAgICAgICBuYW1lRWRpdFNoZWV0Vmlld1xuICAgMTY1XHQgICAgICAgIH1cbiAgIDE2Nlx0ICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0VkaXRBdmF0YXJTaGVldCkge1xuICAgMTY3XHQgICAgICAgICAgICBhdmF0YXJFZGl0U2hlZXRWaWV3XG4gICAxNjhcdCAgICAgICAgfVxuICAgMTY5XHQgICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93SW1hZ2VQaWNrZXIpIHtcbiAgIDE3MFx0ICAgICAgICAgICAgSW1hZ2VQaWNrZXIoc291cmNlVHlwZTogdmlld01vZGVsLmltYWdlUGlja2VyU291cmNlVHlwZSwgc2VsZWN0ZWRJbWFnZTogeyBpbWFnZSBpblxuICAgMTcxXHQgICAgICAgICAgICAgICAgaWYgbGV0IGltYWdlID0gaW1hZ2Uge1xuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zZXRBdmF0YXJJbWFnZShpbWFnZSlcbiAgIDE3M1x0ICAgICAgICAgICAgICAgIH1cbiAgIDE3NFx0ICAgICAgICAgICAgfSlcbiAgIDE3NVx0ICAgICAgICB9XG4gICAxNzZcdCAgICAgICAgLmFsZXJ0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dEZWxldGVBdmF0YXJDb25maXJtYXRpb24pIHtcbiAgIDE3N1x0ICAgICAgICAgICAgQWxlcnQoXG4gICAxNzhcdCAgICAgICAgICAgICAgICB0aXRsZTogVGV4dChcIkRlbGV0ZSBBdmF0YXJcIiksXG4gICAxNzlcdCAgICAgICAgICAgICAgICBtZXNzYWdlOiBUZXh0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB5b3VyIGF2YXRhciBwaG90bz9cIiksXG4gICAxODBcdCAgICAgICAgICAgICAgICBwcmltYXJ5QnV0dG9uOiAuZGVzdHJ1Y3RpdmUoVGV4dChcIkRlbGV0ZVwiKSkge1xuICAgMTgxXHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5kZWxldGVBdmF0YXJJbWFnZSgpXG4gICAxODJcdCAgICAgICAgICAgICAgICB9LFxuICAgMTgzXHQgICAgICAgICAgICAgICAgc2Vjb25kYXJ5QnV0dG9uOiAuY2FuY2VsKClcbiAgIDE4NFx0ICAgICAgICAgICAgKVxuICAgMTg1XHQgICAgICAgIH1cbiAgIDE4Nlx0ICAgIH1cbiAgIDE4N1x0XG4gICAxODhcdCAgICAvLyBNQVJLOiAtIFByaXZhdGUgQ29tcHV0ZWQgUHJvcGVydGllc1xuICAgMTg5XHRcbiAgIDE5MFx0ICAgIC8vIEVtZXJnZW5jeSBOb3RlIFNoZWV0IFZpZXdcbiAgIDE5MVx0ICAgIHByaXZhdGUgdmFyIGVtZXJnZW5jeU5vdGVTaGVldFZpZXc6IHNvbWUgVmlldyB7XG4gICAxOTJcdCAgICAgICAgdmFyIHZpZXc6IHNvbWUgVmlldyB7XG4gICAxOTNcdCAgICAgICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAxOTRcdCAgICAgICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgIDE5NVx0ICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogOCkge1xuICAgMTk2XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0RWRpdG9yKHRleHQ6ICR2aWV3TW9kZWwubmV3RGVzY3JpcHRpb24pXG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDE5OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAxOTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWluSGVpZ2h0OiAyNDApIC8vIERvdWJsZWQgdGhlIGhlaWdodFxuICAgMjAwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCA0KVxuICAgMjAxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAyMDJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2Nyb2xsQ29udGVudEJhY2tncm91bmQoLmhpZGRlbilcbiAgIDIwM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMjA0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDIwNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1c2VkKCR0ZXh0RWRpdG9yRm9jdXNlZClcbiAgIDIwNlx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlRoaXMgbm90ZSBpcyB2aXNpYmxlIHRvIHlvdXIgY29udGFjdHMgd2hlbiB0aGV5IHZpZXcgeW91ciBwcm9maWxlLlwiKVxuICAgMjA3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAyMDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICAyMDlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDIxMFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAyMTFcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAyMTJcdCAgICAgICAgICAgICAgICAgICAgU3BhY2VyKG1pbkxlbmd0aDogMClcbiAgIDIxM1x0ICAgICAgICAgICAgICAgIH1cbiAgIDIxNFx0ICAgICAgICAgICAgICAgIC5uYXZpZ2F0aW9uQmFyVGl0bGVEaXNwbGF5TW9kZSguaW5saW5lKVxuICAgMjE1XHQgICAgICAgICAgICAgICAgLm5hdmlnYXRpb25UaXRsZShcIkVtZXJnZW5jeSBOb3RlXCIpXG4gICAyMTZcdCAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhckl0ZW1zKFxuICAgMjE3XHQgICAgICAgICAgICAgICAgICAgIGxlYWRpbmc6IEJ1dHRvbihcIkNhbmNlbFwiKSB7XG4gICAyMThcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jYW5jZWxFZGl0RGVzY3JpcHRpb24oKVxuICAgMjE5XHQgICAgICAgICAgICAgICAgICAgIH0sXG4gICAyMjBcdCAgICAgICAgICAgICAgICAgICAgdHJhaWxpbmc6IEJ1dHRvbihcIlNhdmVcIikge1xuICAgMjIxXHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2F2ZUVkaXRlZERlc2NyaXB0aW9uKClcbiAgIDIyMlx0ICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLnNob3dFZGl0RGVzY3JpcHRpb25TaGVldCA9IGZhbHNlXG4gICAyMjNcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMjI0XHQgICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCh2aWV3TW9kZWwubmV3RGVzY3JpcHRpb24udHJpbW1pbmdDaGFyYWN0ZXJzKGluOiAud2hpdGVzcGFjZXNBbmROZXdsaW5lcykuaXNFbXB0eSB8fFxuICAgMjI1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwubmV3RGVzY3JpcHRpb24gPT0gdmlld01vZGVsLnByb2ZpbGVEZXNjcmlwdGlvbilcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIClcbiAgIDIyN1x0ICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMjI4XHQgICAgICAgICAgICAgICAgLm9uQXBwZWFyIHtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBmb2N1cyBzdGF0ZSB0byB0aGUgdmlldyBtb2RlbCdzIGZvY3VzIHN0YXRlXG4gICAyMzBcdCAgICAgICAgICAgICAgICAgICAgdGV4dEVkaXRvckZvY3VzZWQgPSB2aWV3TW9kZWwuaXNEZXNjcmlwdGlvbkZpZWxkRm9jdXNlZFxuICAgMjMxXHQgICAgICAgICAgICAgICAgfVxuICAgMjMyXHQgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB0ZXh0RWRpdG9yRm9jdXNlZCkgeyBuZXdWYWx1ZSBpblxuICAgMjMzXHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5pc0Rlc2NyaXB0aW9uRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIH1cbiAgIDIzNVx0ICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLmlzRGVzY3JpcHRpb25GaWVsZEZvY3VzZWQpIHsgbmV3VmFsdWUgaW5cbiAgIDIzNlx0ICAgICAgICAgICAgICAgICAgICB0ZXh0RWRpdG9yRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICAyMzdcdCAgICAgICAgICAgICAgICB9XG4gICAyMzhcdCAgICAgICAgICAgIH1cbiAgIDIzOVx0ICAgICAgICAgICAgLnByZXNlbnRhdGlvbkRldGVudHMoWy5sYXJnZV0pXG4gICAyNDBcdCAgICAgICAgfVxuICAgMjQxXHQgICAgICAgIHJldHVybiB2aWV3XG4gICAyNDJcdCAgICB9XG4gICAyNDNcdFxuICAgMjQ0XHQgICAgLy8gTmFtZSBFZGl0IFNoZWV0IFZpZXdcbiAgIDI0NVx0ICAgIHByaXZhdGUgdmFyIG5hbWVFZGl0U2hlZXRWaWV3OiBzb21lIFZpZXcge1xuICAgMjQ2XHQgICAgICAgIHZhciB2aWV3OiBzb21lIFZpZXcge1xuICAgMjQ3XHQgICAgICAgICAgICBOYXZpZ2F0aW9uU3RhY2sge1xuICAgMjQ4XHQgICAgICAgICAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAyNDlcdCAgICAgICAgICAgICAgICAgICAgVlN0YWNrKGFsaWdubWVudDogLmxlYWRpbmcsIHNwYWNpbmc6IDgpIHtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEZpZWxkKFwiTmFtZVwiLCB0ZXh0OiAkdmlld01vZGVsLm5ld05hbWUpXG4gICAyNTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDI1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAyNTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDI1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMjU1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDI1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICAyNTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXNlZCgkbmFtZUZpZWxkRm9jdXNlZClcbiAgIDI1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlBlb3BsZSB3aWxsIHNlZSB0aGlzIG5hbWUgaWYgeW91IGludGVyYWN0IHdpdGggdGhlbSBhbmQgdGhleSBkb24ndCBoYXZlIHlvdSBzYXZlZCBhcyBhIGNvbnRhY3QuXCIpXG4gICAyNTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguY2FwdGlvbilcbiAgIDI2MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnNlY29uZGFyeSlcbiAgIDI2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgMjYyXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDI2M1x0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDI2NFx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgIDI2NVx0ICAgICAgICAgICAgICAgICAgICBTcGFjZXIobWluTGVuZ3RoOiAwKVxuICAgMjY2XHQgICAgICAgICAgICAgICAgfVxuICAgMjY3XHQgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAyNjhcdCAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgIDI2OVx0ICAgICAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJOYW1lXCIpXG4gICAyNzBcdCAgICAgICAgICAgICAgICAubmF2aWdhdGlvbkJhckl0ZW1zKFxuICAgMjcxXHQgICAgICAgICAgICAgICAgICAgIGxlYWRpbmc6IEJ1dHRvbihcIkNhbmNlbFwiKSB7XG4gICAyNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jYW5jZWxFZGl0TmFtZSgpXG4gICAyNzNcdCAgICAgICAgICAgICAgICAgICAgfSxcbiAgIDI3NFx0ICAgICAgICAgICAgICAgICAgICB0cmFpbGluZzogQnV0dG9uKFwiU2F2ZVwiKSB7XG4gICAyNzVcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zYXZlRWRpdGVkTmFtZSgpXG4gICAyNzZcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaG93RWRpdE5hbWVTaGVldCA9IGZhbHNlXG4gICAyNzdcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMjc4XHQgICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCh2aWV3TW9kZWwubmV3TmFtZS50cmltbWluZ0NoYXJhY3RlcnMoaW46IC53aGl0ZXNwYWNlc0FuZE5ld2xpbmVzKS5pc0VtcHR5IHx8XG4gICAyNzlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5uZXdOYW1lID09IHZpZXdNb2RlbC5uYW1lKVxuICAgMjgwXHQgICAgICAgICAgICAgICAgKVxuICAgMjgxXHQgICAgICAgICAgICAgICAgLm9uQXBwZWFyIHtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBmb2N1cyBzdGF0ZSB0byB0aGUgdmlldyBtb2RlbCdzIGZvY3VzIHN0YXRlXG4gICAyODNcdCAgICAgICAgICAgICAgICAgICAgbmFtZUZpZWxkRm9jdXNlZCA9IHZpZXdNb2RlbC5pc05hbWVGaWVsZEZvY3VzZWRcbiAgIDI4NFx0ICAgICAgICAgICAgICAgIH1cbiAgIDI4NVx0ICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogbmFtZUZpZWxkRm9jdXNlZCkgeyBuZXdWYWx1ZSBpblxuICAgMjg2XHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5pc05hbWVGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxuICAgMjg3XHQgICAgICAgICAgICAgICAgfVxuICAgMjg4XHQgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuaXNOYW1lRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICAyODlcdCAgICAgICAgICAgICAgICAgICAgbmFtZUZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICAyOTBcdCAgICAgICAgICAgICAgICB9XG4gICAyOTFcdCAgICAgICAgICAgIH1cbiAgIDI5Mlx0ICAgICAgICB9XG4gICAyOTNcdCAgICAgICAgcmV0dXJuIHZpZXdcbiAgIDI5NFx0ICAgIH1cbiAgIDI5NVx0XG4gICAyOTZcdCAgICAvLyBBdmF0YXIgRWRpdCBTaGVldCBWaWV3XG4gICAyOTdcdCAgICBwcml2YXRlIHZhciBhdmF0YXJFZGl0U2hlZXRWaWV3OiBzb21lIFZpZXcge1xuICAgMjk4XHQgICAgICAgIHZhciB2aWV3OiBzb21lIFZpZXcge1xuICAgMjk5XHRcbiAgIDMwMFx0ICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDIwKSB7XG4gICAzMDFcdCAgICAgICAgICAgICAgICBUZXh0KFwiQXZhdGFyXCIpXG4gICAzMDJcdCAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lLmJvbGQoKSlcbiAgIDMwM1x0ICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMzA0XHQgICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDApIHtcbiAgIDMwNVx0ICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICAzMDZcdCAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaG93SW1hZ2VQaWNrZXJXaXRoU291cmNlVHlwZSgucGhvdG9MaWJyYXJ5KVxuICAgMzA3XHQgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgIDMwOFx0ICAgICAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgIDMwOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDaG9vc2UgcGhvdG9cIilcbiAgIDMxMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMzExXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2VyKClcbiAgIDMxMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltYWdlKHN5c3RlbU5hbWU6IFwicGhvdG9cIilcbiAgIDMxM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMzE0XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAzMTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgIDMxNlx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAzMTdcdCAgICAgICAgICAgICAgICB9XG4gICAzMThcdCAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDMxOVx0ICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAzMjBcdCAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDMyMVx0ICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgIDMyMlx0ICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuc2hvd0RlbGV0ZUF2YXRhckNvbmZpcm1hdGlvbkRpYWxvZygpXG4gICAzMjNcdCAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmNsb3NlQXZhdGFyRWRpdG9yKClcbiAgIDMyNFx0ICAgICAgICAgICAgICAgIH0pIHtcbiAgIDMyNVx0ICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgMzI2XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiRGVsZXRlIGF2YXRhciBwaG90b1wiKVxuICAgMzI3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgMzI4XHQgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgMzI5XHQgICAgICAgICAgICAgICAgICAgICAgICBJbWFnZShzeXN0ZW1OYW1lOiBcInRyYXNoXCIpXG4gICAzMzBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAzMzFcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMzMyXHQgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKClcbiAgIDMzM1x0ICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDMzNFx0ICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEyKVxuICAgMzM1XHQgICAgICAgICAgICAgICAgfVxuICAgMzM2XHQgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAzMzdcdCAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLmlzVXNpbmdEZWZhdWx0QXZhdGFyKVxuICAgMzM4XHQgICAgICAgICAgICAgICAgLm9wYWNpdHkodmlld01vZGVsLmlzVXNpbmdEZWZhdWx0QXZhdGFyID8gMC41IDogMS4wKVxuICAgMzM5XHQgICAgICAgICAgICAgICAgU3BhY2VyKG1pbkxlbmd0aDogMClcbiAgIDM0MFx0ICAgICAgICAgICAgfVxuICAgMzQxXHQgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgIDM0Mlx0ICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAzNDNcdCAgICAgICAgICAgIC5wcmVzZW50YXRpb25EZXRlbnRzKFsubWVkaXVtXSlcbiAgIDM0NFx0ICAgICAgICB9XG4gICAzNDVcdCAgICAgICAgcmV0dXJuIHZpZXdcbiAgIDM0Nlx0ICAgIH1cbiAgIDM0N1x0XG4gICAzNDhcdCAgICAvLyBQaG9uZSBOdW1iZXIgQ2hhbmdlIFZpZXdcbiAgIDM0OVx0ICAgIHByaXZhdGUgdmFyIHBob25lTnVtYmVyQ2hhbmdlVmlldzogc29tZSBWaWV3IHtcbiAgIDM1MFx0ICAgICAgICBQaG9uZU51bWJlckNoYW5nZVZpZXcoKVxuICAgMzUxXHQgICAgICAgICAgICAub25SZWNlaXZlKE5vdGlmaWNhdGlvbkNlbnRlci5kZWZhdWx0LnB1Ymxpc2hlcihmb3I6IE5TTm90aWZpY2F0aW9uLk5hbWUoXCJQaG9uZU51bWJlckNoYW5nZWRcIikpKSB7IG5vdGlmaWNhdGlvbiBpblxuICAgMzUyXHQgICAgICAgICAgICAgICAgaWYgbGV0IHVzZXJJbmZvID0gbm90aWZpY2F0aW9uLnVzZXJJbmZvLFxuICAgMzUzXHQgICAgICAgICAgICAgICAgICAgbGV0IHBob25lID0gdXNlckluZm9bXCJwaG9uZVwiXSBhcz8gU3RyaW5nLFxuICAgMzU0XHQgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lvbiA9IHVzZXJJbmZvW1wicmVnaW9uXCJdIGFzPyBTdHJpbmcge1xuICAgMzU1XHQgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5oYW5kbGVQaG9uZU51bWJlckNoYW5nZWQobmV3UGhvbmU6IHBob25lLCByZWdpb246IHJlZ2lvbilcbiAgIDM1Nlx0ICAgICAgICAgICAgICAgIH1cbiAgIDM1N1x0ICAgICAgICAgICAgfVxuICAgMzU4XHQgICAgfVxuICAgMzU5XHR9XG4gICAzNjBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMzYwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlZDMyMTJkMi1kOTQzLTRjZDgtYTE4Yi02ZDhkMTU5OTc4OWU7dG9vbHVfdnJ0eF8wMUdHcHlUcjQ5U2Q2S3NlYkpSOVNmeHYiOnsicmVxdWVzdElkIjoiZWQzMjEyZDItZDk0My00Y2Q4LWExOGItNmQ4ZDE1OTk3ODllIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUdHcHlUcjQ5U2Q2S3NlYkpSOVNmeHYiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0LlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0aW1wb3J0IFN3aWZ0VUlcbiAgICAgMlx0aW1wb3J0IEZvdW5kYXRpb25cbiAgICAgM1x0aW1wb3J0IFBob3Rvc1VJXG4gICAgIDRcdGltcG9ydCBDb21iaW5lXG4gICAgIDVcdGltcG9ydCBVSUtpdFxuICAgICA2XHRcbiAgICAgN1x0Ly8gTUFSSzogLSBNYWluIFByb2ZpbGUgVmlld1xuICAgICA4XHRzdHJ1Y3QgUHJvZmlsZVZpZXc6IFZpZXcge1xuICAgICA5XHQgICAgQFN0YXRlT2JqZWN0IHByaXZhdGUgdmFyIHZpZXdNb2RlbCA9IFByb2ZpbGVWaWV3TW9kZWwoKVxuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICA4XHRzdHJ1Y3QgUHJvZmlsZVZpZXc6IFZpZXcge1xuICAgICA5XHQgICAgQFN0YXRlT2JqZWN0IHByaXZhdGUgdmFyIHZpZXdNb2RlbCA9IFByb2ZpbGVWaWV3TW9kZWwoKVxuICAgIDEwXHQgICAgQEVudmlyb25tZW50KFxcLnByZXNlbnRhdGlvbk1vZGUpIHByaXZhdGUgdmFyIHByZXNlbnRhdGlvbk1vZGVcbiAgICAxMVx0XG4gICAgMTJcdCAgICAvLyBGb2N1cyBzdGF0ZXNcbiAgICAxM1x0ICAgIEBGb2N1c1N0YXRlIHByaXZhdGUgdmFyIHRleHRFZGl0b3JGb2N1c2VkOiBCb29sXG4gICAgMTRcdCAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciBuYW1lRmllbGRGb2N1c2VkOiBCb29sXG4gICAgMTVcdCAgICBARm9jdXNTdGF0ZSBwcml2YXRlIHZhciBwaG9uZU51bWJlckZpZWxkRm9jdXNlZDogQm9vbFxuICAgIDE2XHQgICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbFxuICAgIDE3XHRcbiAgICAxOFx0ICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgIDE5XHQgICAgICAgIFNjcm9sbFZpZXcge1xuICAgIDIwXHQgICAgICAgICAgICBWU3RhY2sge1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsyXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMzQ0XHQgICAgICAgIH1cbiAgIDM0NVx0ICAgICAgICByZXR1cm4gdmlld1xuICAgMzQ2XHQgICAgfVxuICAgMzQ3XHRcbiAgIDM0OFx0ICAgIC8vIFBob25lIE51bWJlciBDaGFuZ2UgVmlld1xuICAgMzQ5XHQgICAgcHJpdmF0ZSB2YXIgcGhvbmVOdW1iZXJDaGFuZ2VWaWV3OiBzb21lIFZpZXcge1xuICAgMzUwXHQgICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAzNTFcdCAgICAgICAgICAgIFNjcm9sbFZpZXcge1xuICAgMzUyXHQgICAgICAgICAgICAgICAgaWYgIXZpZXdNb2RlbC5pc0NvZGVTZW50IHtcbiAgIDM1M1x0ICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgMzU0XHQgICAgICAgICAgICAgICAgICAgIFZTdGFjayhhbGlnbm1lbnQ6IC5sZWFkaW5nLCBzcGFjaW5nOiAxNikge1xuICAgMzU1XHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiQ3VycmVudCBQaG9uZSBOdW1iZXJcIilcbiAgIDM1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgIDM1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgMzU4XHRcbiAgIDM1OVx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwucGhvbmUuaXNFbXB0eSA/IFwiKDk1NCkgMjM0LTU2NzhcIiA6IHZpZXdNb2RlbC5waG9uZSlcbiAgIDM2MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgMzYxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnZlcnRpY2FsLCAxMilcbiAgIDM2Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgMzYzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHksIGFsaWdubWVudDogLmxlYWRpbmcpXG4gICAzNjRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDM2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAzNjZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgMzY3XHRcbiAgIDM2OFx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIk5ldyBQaG9uZSBOdW1iZXJcIilcbiAgIDM2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgIDM3MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgMzcxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgOClcbiAgIDM3Mlx0XG4gICAzNzNcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lvbiBwaWNrZXJcbiAgIDM3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgSFN0YWNrIHtcbiAgIDM3NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJSZWdpb25cIilcbiAgIDM3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDM3N1x0XG4gICAzNzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuICAgMzc5XHRcbiAgIDM4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpY2tlcihcIlJlZ2lvblwiLCBzZWxlY3Rpb246ICR2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7XG4gICAzODFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yRWFjaCh2aWV3TW9kZWwucmVnaW9ucywgaWQ6IFxcLjApIHsgcmVnaW9uIGluXG4gICAzODJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJcXChyZWdpb24uMCkgKFxcKHJlZ2lvbi4xKSlcIikudGFnKHJlZ2lvbi4wKVxuICAgMzgzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDM4NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDM4NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5waWNrZXJTdHlsZShNZW51UGlja2VyU3R5bGUoKSlcbiAgIDM4Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbikgeyBfLCBfIGluXG4gICAzODdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmhhbmRsZVJlZ2lvbkNoYW5nZSgpXG4gICAzODhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAzODlcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDM5MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwsIDQpXG4gICAzOTFcdFxuICAgMzkyXHQgICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQodmlld01vZGVsLnBob25lTnVtYmVyUGxhY2Vob2xkZXIsIHRleHQ6ICR2aWV3TW9kZWwuZWRpdGluZ1Bob25lKVxuICAgMzkzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmtleWJvYXJkVHlwZSgucGhvbmVQYWQpXG4gICAzOTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgIDM5NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAzOTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDM5N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgMzk4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgIDM5OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLnByaW1hcnkpXG4gICA0MDBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlsaW5lVGV4dEFsaWdubWVudCgubGVhZGluZykgLy8gTGVmdCBhbGlnbiB0aGUgdGV4dFxuICAgNDAxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJHBob25lTnVtYmVyRmllbGRGb2N1c2VkKVxuICAgNDAyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lKSB7IF8sIG5ld1ZhbHVlIGluXG4gICA0MDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBuZXdWYWx1ZSlcbiAgIDQwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQwNVx0XG4gICA0MDZcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB5b3VyIG5ldyBwaG9uZSBudW1iZXIuIFdlJ2xsIHNlbmQgYSB2ZXJpZmljYXRpb24gY29kZSB0byBjb25maXJtLlwiKVxuICAgNDA3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICA0MDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5zZWNvbmRhcnkpXG4gICA0MDlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDQxMFx0XG4gICA0MTFcdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxldCBlcnJvck1lc3NhZ2UgPSB2aWV3TW9kZWwucGhvbmVFcnJvck1lc3NhZ2Uge1xuICAgNDEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChlcnJvck1lc3NhZ2UpXG4gICA0MTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICA0MTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucmVkKVxuICAgNDE1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgNDE2XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICA0MTdcdFxuICAgNDE4XHQgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24oYWN0aW9uOiB7XG4gICA0MTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgIDQyMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zZW5kUGhvbmVDaGFuZ2VWZXJpZmljYXRpb25Db2RlKClcbiAgIDQyMVx0ICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgNDIyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwuaXNMb2FkaW5nID8gXCJTZW5kaW5nLi4uXCIgOiBcIlNlbmQgVmVyaWZpY2F0aW9uIENvZGVcIilcbiAgIDQyM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICA0MjRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigud2hpdGUpXG4gICA0MjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHkpXG4gICA0MjZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgNDI3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKHZpZXdNb2RlbC5pc0xvYWRpbmcgfHwgIXZpZXdNb2RlbC5pc1Bob25lTnVtYmVyVmFsaWQgPyBDb2xvci5ncmF5IDogQ29sb3IuYmx1ZSlcbiAgIDQyOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgNDI5XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICA0MzBcdCAgICAgICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICF2aWV3TW9kZWwuaXNQaG9uZU51bWJlclZhbGlkKVxuICAgNDMxXHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAxNilcbiAgIDQzMlx0ICAgICAgICAgICAgICAgICAgICB9XG4gICA0MzNcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICA0MzRcdCAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMjQpXG4gICA0MzVcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNDM2XHQgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhdGlvbiBjb2RlIHZpZXdcbiAgIDQzN1x0ICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgIDQzOFx0ICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIlZlcmlmaWNhdGlvbiBDb2RlXCIpXG4gICA0MzlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICA0NDBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDQ0MVx0XG4gICA0NDJcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJFbnRlciB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byBcXChQaG9uZUZvcm1hdHRlci5mb3JtYXRQaG9uZU51bWJlcih2aWV3TW9kZWwuZWRpdGluZ1Bob25lLCByZWdpb246IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pKVwiKVxuICAgNDQzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICA0NDRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgIDQ0NVx0XG4gICA0NDZcdCAgICAgICAgICAgICAgICAgICAgICAgIFRleHRGaWVsZChcIlhYWC1YWFhcIiwgdGV4dDogJHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlKVxuICAgNDQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmtleWJvYXJkVHlwZSgubnVtYmVyUGFkKVxuICAgNDQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG4gICA0NDlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgNDUwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICA0NTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnNlY29uZGFyeVN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDQ1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICA0NTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuICAgNDU0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzZWQoJHZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWQpXG4gICA0NTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlKSB7IF8sIG5ld1ZhbHVlIGluXG4gICA0NTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsLmhhbmRsZVZlcmlmaWNhdGlvbkNvZGVDaGFuZ2UobmV3VmFsdWU6IG5ld1ZhbHVlKVxuICAgNDU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgNDU4XHRcbiAgIDQ1OVx0ICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uKGFjdGlvbjoge1xuICAgNDYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICA0NjFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwudmVyaWZ5UGhvbmVDaGFuZ2UoKVxuICAgNDYyXHQgICAgICAgICAgICAgICAgICAgICAgICB9KSB7XG4gICA0NjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5pc0xvYWRpbmcgPyBcIlZlcmlmeWluZy4uLlwiIDogXCJWZXJpZnkgQ29kZVwiKVxuICAgNDY0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgIDQ2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC53aGl0ZSlcbiAgIDQ2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgIDQ2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygpXG4gICA0NjhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkID8gQ29sb3IuZ3JheSA6IENvbG9yLmJsdWUpXG4gICA0NjlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMClcbiAgIDQ3MFx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgNDcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuZGlzYWJsZWQodmlld01vZGVsLmlzTG9hZGluZyB8fCAhdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkKVxuICAgNDcyXHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAxNilcbiAgIDQ3M1x0XG4gICA0NzRcdCAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgIDQ3NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5jYW5jZWxQaG9uZU51bWJlckNoYW5nZSgpXG4gICA0NzZcdCAgICAgICAgICAgICAgICAgICAgICAgIH0pIHtcbiAgIDQ3N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDYW5jZWxcIilcbiAgIDQ3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICA0NzlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguYmx1ZSlcbiAgIDQ4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgIDQ4MVx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgNDgyXHQgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuICAgNDgzXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQ4NFx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbClcbiAgIDQ4NVx0ICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCAyNClcbiAgIDQ4Nlx0ICAgICAgICAgICAgICAgIH1cbiAgIDQ4N1x0XG4gICA0ODhcdCAgICAgICAgICAgICAgICBTcGFjZXIobWluTGVuZ3RoOiAwKVxuICAgNDg5XHQgICAgICAgICAgICB9XG4gICA0OTBcdCAgICAgICAgICAgIC5uYXZpZ2F0aW9uQmFyVGl0bGVEaXNwbGF5TW9kZSguaW5saW5lKVxuICAgNDkxXHQgICAgICAgICAgICAubmF2aWdhdGlvblRpdGxlKFwiQ2hhbmdlIFBob25lIE51bWJlclwiKVxuICAgNDkyXHQgICAgICAgICAgICAudG9vbGJhciB7XG4gICA0OTNcdCAgICAgICAgICAgICAgICBUb29sYmFySXRlbShwbGFjZW1lbnQ6IC5uYXZpZ2F0aW9uQmFyTGVhZGluZykge1xuICAgNDk0XHQgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihcIkNhbmNlbFwiKSB7XG4gICA0OTVcdCAgICAgICAgICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLnRyaWdnZXJIYXB0aWMoKVxuICAgNDk2XHQgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKVxuICAgNDk3XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDQ5OFx0ICAgICAgICAgICAgICAgIH1cbiAgIDQ5OVx0ICAgICAgICAgICAgfVxuICAgNTAwXHQgICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgIDUwMVx0ICAgICAgICAgICAgLm9uQXBwZWFyIHtcbiAgIDUwMlx0ICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGZvY3VzIHN0YXRlcyB0byB0aGUgdmlldyBtb2RlbCdzIGZvY3VzIHN0YXRlc1xuICAgNTAzXHQgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQgPSB2aWV3TW9kZWwuaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZFxuICAgNTA0XHQgICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IHZpZXdNb2RlbC5pc1ZlcmlmaWNhdGlvbkNvZGVGaWVsZEZvY3VzZWRcbiAgIDUwNVx0ICAgICAgICAgICAgfVxuICAgNTA2XHQgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHBob25lTnVtYmVyRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICA1MDdcdCAgICAgICAgICAgICAgICB2aWV3TW9kZWwuaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICA1MDhcdCAgICAgICAgICAgIH1cbiAgIDUwOVx0ICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuaXNQaG9uZU51bWJlckZpZWxkRm9jdXNlZCkgeyBuZXdWYWx1ZSBpblxuICAgNTEwXHQgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQgPSBuZXdWYWx1ZVxuICAgNTExXHQgICAgICAgICAgICB9XG4gICA1MTJcdCAgICAgICAgICAgIC5vbkNoYW5nZShvZjogdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCkgeyBuZXdWYWx1ZSBpblxuICAgNTEzXHQgICAgICAgICAgICAgICAgdmlld01vZGVsLmlzVmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZCA9IG5ld1ZhbHVlXG4gICA1MTRcdCAgICAgICAgICAgIH1cbiAgIDUxNVx0ICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuaXNWZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkKSB7IG5ld1ZhbHVlIGluXG4gICA1MTZcdCAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlRmllbGRGb2N1c2VkID0gbmV3VmFsdWVcbiAgIDUxN1x0ICAgICAgICAgICAgfVxuICAgNTE4XHQgICAgICAgIH1cbiAgIDUxOVx0ICAgIH1cbiAgIDUyMFx0fVxuICAgNTIxXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmU0OWViNjQtYzEwYi00ZGYyLWI3MmUtYmQ0NTAwNzlkZGQzO3Rvb2x1X3ZydHhfMDFFcXBEck1jdFpFcHc2WUR6WVBpOTFtIjp7InJlcXVlc3RJZCI6ImZlNDllYjY0LWMxMGItNGRmMi1iNzJlLWJkNDUwMDc5ZGRkMyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFFcXBEck1jdFpFcHc2WUR6WVBpOTFtIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQXJjaGl0ZWN0dXJlL2lPUy9BcHBsaWNhdGlvblNwZWNpZmljYXRpb24vTW9ja0FwcGxpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9GZWF0dXJlcy9UYWJTY3JlZW5zL1Byb2ZpbGUvUGhvbmVOdW1iZXJDaGFuZ2UvUGhvbmVOdW1iZXJDaGFuZ2VWaWV3LnN3aWZ0XG5pbXBvcnQgU3dpZnRVSVxuaW1wb3J0IEZvdW5kYXRpb25cblxuLy8vIEEgdmlldyBmb3IgY2hhbmdpbmcgdGhlIHVzZXIncyBwaG9uZSBudW1iZXJcbnN0cnVjdCBQaG9uZU51bWJlckNoYW5nZVZpZXc6IFZpZXcge1xuICAgIC8vLyBUaGUgdmlldyBtb2RlbFxuICAgIEBTdGF0ZU9iamVjdCBwcml2YXRlIHZhciB2aWV3TW9kZWw6IFBob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsXG5cbiAgICAvLy8gRGlzbWlzcyBhY3Rpb25cbiAgICBARW52aXJvbm1lbnQoXFwuZGlzbWlzcykgcHJpdmF0ZSB2YXIgZGlzbWlzc1xuXG4gICAgLy8vIEZvY3VzIHN0YXRlIGZvciB0aGUgcGhvbmUgbnVtYmVyIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgcGhvbmVOdW1iZXJGaWVsZEZvY3VzZWQ6IEJvb2xcblxuICAgIC8vLyBGb2N1cyBzdGF0ZSBmb3IgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGZpZWxkXG4gICAgQEZvY3VzU3RhdGUgcHJpdmF0ZSB2YXIgdmVyaWZpY2F0aW9uQ29kZUZpZWxkRm9jdXNlZDogQm9vbFxuXG4gICAgLy8vIEluaXRpYWxpemUgd2l0aCBhIHZpZXcgbW9kZWxcbiAgICBpbml0KGN1cnJlbnRQaG9uZTogU3RyaW5nLCBjdXJyZW50UGhvbmVSZWdpb246IFN0cmluZyA9IFwiVVNcIiwgb25QaG9uZU51bWJlckNoYW5nZWQ6ICgoU3RyaW5nLCBTdHJpbmcpIC0+IFZvaWQpPyA9IG5pbCkge1xuICAgICAgICBsZXQgdmlld01vZGVsID0gUGhvbmVOdW1iZXJDaGFuZ2VWaWV3TW9kZWwoXG4gICAgICAgICAgICBjdXJyZW50UGhvbmU6IGN1cnJlbnRQaG9uZSxcbiAgICAgICAgICAgIGN1cnJlbnRQaG9uZVJlZ2lvbjogY3VycmVudFBob25lUmVnaW9uLFxuICAgICAgICAgICAgb25QaG9uZU51bWJlckNoYW5nZWQ6IG9uUGhvbmVOdW1iZXJDaGFuZ2VkLFxuICAgICAgICAgICAgb25EaXNtaXNzOiBuaWxcbiAgICAgICAgKVxuICAgICAgICBfdmlld01vZGVsID0gU3RhdGVPYmplY3Qod3JhcHBlZFZhbHVlOiB2aWV3TW9kZWwpXG4gICAgfVxuXG4gICAgdmFyIGJvZHk6IHNvbWUgVmlldyB7XG4gICAgICAgIE5hdmlnYXRpb25TdGFjayB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3lzdGVtIGdyb3VwZWQgYmFja2dyb3VuZCBmb3IgdGhlIG1haW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIENvbG9yKFVJQ29sb3Iuc3lzdGVtR3JvdXBlZEJhY2tncm91bmQpXG4gICAgICAgICAgICAgICAgICAgIC5lZGdlc0lnbm9yaW5nU2FmZUFyZWEoLmFsbClcbiAgICAgICAgICAgICAgICAgICAgLmZyYW1lKGhlaWdodDogMCkgLy8gWmVybyBoZWlnaHQgdG8gbm90IHRha2UgdXAgc3BhY2VcbiAgICAgICAgICAgICAgICBpZiAhdmlld01vZGVsLmlzQ29kZVNlbnQge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsIHBob25lIG51bWJlciBjaGFuZ2Ugdmlld1xuICAgICAgICAgICAgICAgICAgICBWU3RhY2soYWxpZ25tZW50OiAubGVhZGluZywgc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJDdXJyZW50IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCh2aWV3TW9kZWwuY3VycmVudFBob25lLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiB2aWV3TW9kZWwuY3VycmVudFBob25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC52ZXJ0aWNhbCwgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyYW1lKG1heFdpZHRoOiAuaW5maW5pdHksIGFsaWdubWVudDogLmxlYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhY2tncm91bmQoQ29sb3IoVUlDb2xvci5zZWNvbmRhcnlTeXN0ZW1Hcm91cGVkQmFja2dyb3VuZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvcm5lclJhZGl1cygxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5wcmltYXJ5KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiTmV3IFBob25lIE51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5oZWFkbGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZyguaG9yaXpvbnRhbCwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudG9wLCA4KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpb24gcGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBIU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJSZWdpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmJvZHkpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFjZXIoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyKFwiUmVnaW9uXCIsIHNlbGVjdGlvbjogJHZpZXdNb2RlbC5lZGl0aW5nUGhvbmVSZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yRWFjaCh2aWV3TW9kZWwucmVnaW9ucywgaWQ6IFxcLjApIHsgcmVnaW9uIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFwiXFwocmVnaW9uLjApIChcXChyZWdpb24uMSkpXCIpLnRhZyhyZWdpb24uMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlja2VyU3R5bGUoTWVudVBpY2tlclN0eWxlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKG9mOiB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uKSB7IF8sIF8gaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2suc2VsZWN0aW9uRmVlZGJhY2soKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0RmllbGQoZ2V0UGhvbmVOdW1iZXJQbGFjZWhvbGRlcigpLCB0ZXh0OiAkdmlld01vZGVsLmVkaXRpbmdQaG9uZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAua2V5Ym9hcmRUeXBlKC5waG9uZVBhZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFkZGluZygudmVydGljYWwsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kKENvbG9yKFVJQ29sb3Iuc2Vjb25kYXJ5U3lzdGVtR3JvdXBlZEJhY2tncm91bmQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvcigucHJpbWFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlsaW5lVGV4dEFsaWdubWVudCgubGVhZGluZykgLy8gTGVmdCBhbGlnbiB0aGUgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1c2VkKCRwaG9uZU51bWJlckZpZWxkRm9jdXNlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2Uob2Y6IHZpZXdNb2RlbC5lZGl0aW5nUGhvbmUpIHsgbmV3VmFsdWUgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCB2aWV3TW9kZWwuZWRpdGluZ1Bob25lUmVnaW9uIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVTXCIsIFwiQ0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVVMgYW5kIENhbmFkYTogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgVUs6IFhYWFgtWFhYLVhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VUtQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgZm9yIEF1c3RyYWxpYTogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRBVVBob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQ6IFhYWC1YWFgtWFhYWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VVNQaG9uZU51bWJlcihmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChcIkVudGVyIHlvdXIgbmV3IHBob25lIG51bWJlci4gV2UnbGwgc2VuZCBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIGNvbmZpcm0uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmNhcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsZXQgZXJyb3JNZXNzYWdlID0gdmlld01vZGVsLmVycm9yTWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb250KC5jYXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5yZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC5ob3Jpem9udGFsLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbihhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXB0aWNGZWVkYmFjay50cmlnZ2VySGFwdGljKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwudmVyaWZ5UGhvbmVDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoXCJWZXJpZnkgQ29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JlZ3JvdW5kQ29sb3IoLndoaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUobWF4V2lkdGg6IC5pbmZpbml0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFja2dyb3VuZCh2aWV3TW9kZWwuaXNMb2FkaW5nIHx8ICFpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZCA/IENvbG9yLmdyYXkgOiBDb2xvci5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpc2FibGVkKHZpZXdNb2RlbC5pc0xvYWRpbmcgfHwgIWlzVmVyaWZpY2F0aW9uQ29kZVZhbGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLnRvcCwgMTYpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLnBhZGRpbmcoLmhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgIC5wYWRkaW5nKC50b3AsIDI0KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFNwYWNlcihtaW5MZW5ndGg6IDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmF2aWdhdGlvbkJhclRpdGxlRGlzcGxheU1vZGUoLmlubGluZSlcbiAgICAgICAgICAgIC5uYXZpZ2F0aW9uVGl0bGUoXCJDaGFuZ2UgUGhvbmUgTnVtYmVyXCIpXG4gICAgICAgICAgICAuYmFja2dyb3VuZChDb2xvcihVSUNvbG9yLnN5c3RlbUdyb3VwZWRCYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgIC50b29sYmFyIHtcbiAgICAgICAgICAgICAgICBUb29sYmFySXRlbShwbGFjZW1lbnQ6IC5uYXZpZ2F0aW9uQmFyTGVhZGluZykge1xuICAgICAgICAgICAgICAgICAgICBCdXR0b24oXCJDYW5jZWxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGFwdGljRmVlZGJhY2sudHJpZ2dlckhhcHRpYygpXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWwuY2FuY2VsUGhvbmVOdW1iZXJDaGFuZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgIC8vLyBDb21wdXRlZCBwcm9wZXJ0eSB0byBjaGVjayBpZiB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgdmFsaWRcbiAgICBwcml2YXRlIHZhciBpc1ZlcmlmaWNhdGlvbkNvZGVWYWxpZDogQm9vbCB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgbm9uLWRpZ2l0IGNoYXJhY3RlcnMgYW5kIGNoZWNrIGlmIHdlIGhhdmUgNiBkaWdpdHNcbiAgICAgICAgcmV0dXJuIHZpZXdNb2RlbC52ZXJpZmljYXRpb25Db2RlLmZpbHRlciB7ICQwLmlzTnVtYmVyIH0uY291bnQgPT0gNlxuICAgIH1cblxuICAgIC8vLyBHZXQgdGhlIHBob25lIG51bWJlciBwbGFjZWhvbGRlciBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcmVnaW9uXG4gICAgcHJpdmF0ZSBmdW5jIGdldFBob25lTnVtYmVyUGxhY2Vob2xkZXIoKSAtPiBTdHJpbmcge1xuICAgICAgICBzd2l0Y2ggdmlld01vZGVsLmVkaXRpbmdQaG9uZVJlZ2lvbiB7XG4gICAgICAgIGNhc2UgXCJVU1wiLCBcIkNBXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFgtWFhYLVhYWFhcIiAvLyBGb3JtYXQgZm9yIFVTIGFuZCBDYW5hZGFcbiAgICAgICAgY2FzZSBcIlVLXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJYWFhYLVhYWC1YWFhcIiAvLyBGb3JtYXQgZm9yIFVLXG4gICAgICAgIGNhc2UgXCJBVVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWFhYWC1YWFgtWFhYXCIgLy8gRm9ybWF0IGZvciBBdXN0cmFsaWFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlhYWC1YWFgtWFhYWFwiIC8vIERlZmF1bHQgZm9ybWF0XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Bob25lTnVtYmVyQ2hhbmdlL1Bob25lTnVtYmVyQ2hhbmdlVmlld01vZGVsLnN3aWZ0XG4uLi5cblxuICAgIC8vLyBWZXJpZnkgdGhlIHBob25lIG51bWJlciBjaGFuZ2VcbiAgICBmdW5jIHZlcmlmeVBob25lQ2hhbmdlKCkge1xuICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHZlcmlmeSB0aGUgY29kZSB3aXRoIHRoZSBzZXJ2ZXJcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgZGVsYXlcbiAgICAgICAgRGlzcGF0Y2hRdWV1ZS5tYWluLmFzeW5jQWZ0ZXIoZGVhZGxpbmU6IC5ub3coKSArIDEuNSkgeyBbd2VhayBzZWxmXSBpblxuICAgICAgICAgICAgZ3VhcmQgbGV0IHNlbGYgPSBzZWxmIGVsc2UgeyByZXR1cm4gfVxuICAgICAgICAgICAgc2VsZi5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBob25lIG51bWJlciBpZiB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgaWYgIXNlbGYuZWRpdGluZ1Bob25lLmlzRW1wdHkgJiYgc2VsZi52ZXJpZmljYXRpb25Db2RlLmNvdW50ID49IDQge1xuICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRQaG9uZSA9IFBob25lRm9ybWF0dGVyLmZvcm1hdFBob25lTnVtYmVyKHNlbGYuZWRpdGluZ1Bob25lLCByZWdpb246IHNlbGYuZWRpdGluZ1Bob25lUmVnaW9uKVxuICAgICAgICAgICAgICAgIHNlbGYub25QaG9uZU51bWJlckNoYW5nZWQ/KGZvcm1hdHRlZFBob25lLCBzZWxmLmVkaXRpbmdQaG9uZVJlZ2lvbilcbiAgICAgICAgICAgICAgICBzZWxmLm9uRGlzbWlzcz8oKVxuICAgICAgICAgICAgICAgIGlmIGxldCBkaXNtaXNzID0gc2VsZi5kaXNtaXNzQWN0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEhhcHRpY0ZlZWRiYWNrLm5vdGlmaWNhdGlvbkZlZWRiYWNrKHR5cGU6IC5zdWNjZXNzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8vIEhhbmRsZSBwaG9uZSBudW1iZXIgdGV4dCBjaGFuZ2VcbiAgICBmdW5jIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKG5ld1ZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyXG4gICAgICAgIGlmIG5ld1ZhbHVlID09IFwiKzExMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIxMjM0NTY3ODkwXCIgfHwgbmV3VmFsdWUgPT0gXCIwMDAwMDAwMDAwXCIge1xuICAgICAgICAgICAgLy8gQWxsb3cgdGhlIGRldmVsb3BtZW50IHRlc3RpbmcgbnVtYmVyIGFzIGlzXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCB0aGUgcGhvbmUgbnVtYmVyIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCByZWdpb25cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmV3VmFsdWUuZmlsdGVyIHsgJDAuaXNOdW1iZXIgfVxuXG4gICAgICAgIHN3aXRjaCBlZGl0aW5nUGhvbmVSZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVUyBhbmQgQ2FuYWRhOiBYWFgtWFhYLVhYWFhcbiAgICAgICAgICAgIGZvcm1hdFVTUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGNhc2UgXCJVS1wiOlxuICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBVSzogWFhYWC1YWFgtWFhYXG4gICAgICAgICAgICBmb3JtYXRVS1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICBjYXNlIFwiQVVcIjpcbiAgICAgICAgICAgIC8vIEZvcm1hdCBmb3IgQXVzdHJhbGlhOiBYWFhYLVhYWC1YWFhcbiAgICAgICAgICAgIGZvcm1hdEFVUGhvbmVOdW1iZXIoZmlsdGVyZWQpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBEZWZhdWx0IGZvcm1hdDogWFhYLVhYWC1YWFhYXG4gICAgICAgICAgICBmb3JtYXRVU1Bob25lTnVtYmVyKGZpbHRlcmVkKVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBMaWZlU2lnbmFsL0xpZmVTaWduYWwvRmVhdHVyZXMvVGFiU2NyZWVucy9Qcm9maWxlL1Byb2ZpbGVWaWV3LnN3aWZ0XG4uLi5cblxuICAgIHZhciBib2R5OiBzb21lIFZpZXcge1xuICAgICAgICBpZiBzdG9yZS5wcm9maWxlID09IG5pbCB8fCAoc3RvcmUudXNlckRhdGEubmFtZS5pc0VtcHR5ICYmIHN0b3JlLmlzTG9hZGluZykge1xuICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHZpZXcgd2hlbiB1c2VyIGRhdGEgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAgICAgUHJvZ3Jlc3NWaWV3KFwiTG9hZGluZyBwcm9maWxlLi4uXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTY3JvbGxWaWV3IHtcbiAgICAgICAgICAgICAgICBWU3RhY2sge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm9maWxlIEhlYWRlclxuICAgICAgICAgICAgICAgICAgICBWU3RhY2soc3BhY2luZzogMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENpcmNsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbGwoQ29sb3IoVUlDb2xvci5zeXN0ZW1CYWNrZ3JvdW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZnJhbWUod2lkdGg6IDgwLCBoZWlnaHQ6IDgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vdmVybGF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0KFN0cmluZyhzdG9yZS51c2VyRGF0YS5uYW1lLnByZWZpeCgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yZWdyb3VuZENvbG9yKC5ibHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnRpdGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3ZlcmxheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2lyY2xlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHJva2UoQ29sb3IuYmx1ZSwgbGluZVdpZHRoOiAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQoc3RvcmUudXNlckRhdGEubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0KHN0b3JlLnVzZXJEYXRhLnBob25lTnVtYmVyLmlzRW1wdHkgPyBcIig5NTQpIDIzNC01Njc4XCIgOiBzdG9yZS51c2VyRGF0YS5waG9uZU51bWJlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9udCguc3ViaGVhZGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IExpZmVTaWduYWwvTGlmZVNpZ25hbC9Db3JlL0hhcHRpY0ZlZWRiYWNrL0hhcHRpY0ZlZWRiYWNrQ2xpZW50LnN3aWZ0XG5pbXBvcnQgVUlLaXRcbmltcG9ydCBDb21wb3NhYmxlQXJjaGl0ZWN0dXJlXG5cbi8vLyBBIGNsaWVudCBmb3IgaGFwdGljIGZlZWRiYWNrXG5ARGVwZW5kZW5jeUNsaWVudFxuc3RydWN0IEhhcHRpY0ZlZWRiYWNrQ2xpZW50OiBTZW5kYWJsZSB7XG4gICAgLy8vIFRyaWdnZXIgYSBsaWdodCBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIGxpZ2h0SW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIG1lZGl1bSBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIG1lZGl1bUltcGFjdDogQFNlbmRhYmxlICgpIC0+IFZvaWQgPSB7fVxuXG4gICAgLy8vIFRyaWdnZXIgYSBoZWF2eSBpbXBhY3QgaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIGhlYXZ5SW1wYWN0OiBAU2VuZGFibGUgKCkgLT4gVm9pZCA9IHt9XG5cbiAgICAvLy8gVHJpZ2dlciBhIHNlbGVjdGlvbiBoYXB0aWMgZmVlZGJhY2tcbiAgICB2YXIgc2VsZWN0aW9uRmVlZGJhY2s6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cblxuICAgIC8vLyBUcmlnZ2VyIGEgbm90aWZpY2F0aW9uIGhhcHRpYyBmZWVkYmFja1xuICAgIHZhciBub3RpZmljYXRpb25GZWVkYmFjazogQFNlbmRhYmxlIChfIHR5cGU6IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IuRmVlZGJhY2tUeXBlKSAtPiBWb2lkID0geyBfIGluIH1cblxuICAgIC8vLyBUcmlnZ2VyIGEgc3VjY2VzcyBub3RpZmljYXRpb24gaGFwdGljIGZlZWRiYWNrXG4gICAgdmFyIHN1Y2Nlc3M6IEBTZW5kYWJsZSAoKSAtPiBWb2lkID0ge31cbi4uLlxuXG5leHRlbnNpb24gSGFwdGljRmVlZGJhY2tDbGllbnQge1xuICAgIC8vLyBUaGUgbGl2ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgaGFwdGljIGNsaWVudFxuICAgIHN0YXRpYyBsZXQgbGl2ZSA9IEhhcHRpY0NsaWVudChcbiAgICAgICAgbGlnaHRJbXBhY3Q6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJSW1wYWN0RmVlZGJhY2tHZW5lcmF0b3Ioc3R5bGU6IC5saWdodClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG1lZGl1bUltcGFjdDoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlJbXBhY3RGZWVkYmFja0dlbmVyYXRvcihzdHlsZTogLm1lZGl1bSlcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IuaW1wYWN0T2NjdXJyZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhlYXZ5SW1wYWN0OiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSUltcGFjdEZlZWRiYWNrR2VuZXJhdG9yKHN0eWxlOiAuaGVhdnkpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLmltcGFjdE9jY3VycmVkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3Rpb25GZWVkYmFjazoge1xuICAgICAgICAgICAgVGFzayB7IEBNYWluQWN0b3IgaW5cbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdG9yID0gVUlTZWxlY3Rpb25GZWVkYmFja0dlbmVyYXRvcigpXG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLnNlbGVjdGlvbkNoYW5nZWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrOiB7IHR5cGUgaW5cbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCh0eXBlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCguc3VjY2VzcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB3YXJuaW5nOiB7XG4gICAgICAgICAgICBUYXNrIHsgQE1haW5BY3RvciBpblxuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0b3IgPSBVSU5vdGlmaWNhdGlvbkZlZWRiYWNrR2VuZXJhdG9yKClcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3Iubm90aWZpY2F0aW9uT2NjdXJyZWQoLndhcm5pbmcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIFRhc2sgeyBATWFpbkFjdG9yIGluXG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRvciA9IFVJTm90aWZpY2F0aW9uRmVlZGJhY2tHZW5lcmF0b3IoKVxuICAgICAgICAgICAgICAgIGdlbmVyYXRvci5ub3RpZmljYXRpb25PY2N1cnJlZCguZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApXG59XG5cbi8vIE1BUks6IC0gTW9jayBJbXBsZW1lbnRhdGlvblxuXG5leHRlbnNpb24gSGFwdGljRmVlZGJhY2tDbGllbnQge1xuICAgIC8vLyBBIG1vY2sgaW1wbGVtZW50YXRpb24gdGhhdCBkb2VzIG5vdGhpbmcsIGZvciB0ZXN0aW5nXG4gICAgc3RhdGljIGxldCBtb2NrID0gU2VsZihcbiAgICAgICAgbGlnaHRJbXBhY3Q6IHt9LFxuICAgICAgICBtZWRpdW1JbXBhY3Q6IHt9LFxuICAgICAgICBoZWF2eUltcGFjdDoge30sXG4gICAgICAgIHNlbGVjdGlvbkZlZWRiYWNrOiB7fSxcbiAgICAgICAgbm90aWZpY2F0aW9uRmVlZGJhY2s6IHsgXyBpbiB9LFxuICAgICAgICBzdWNjZXNzOiB7fSxcbiAgICAgICAgd2FybmluZzoge30sXG4gICAgICAgIGVycm9yOiB7fVxuICAgIClcbn1cblxuLy8gTUFSSzogLSBEZXBlbmRlbmN5IFJlZ2lzdHJhdGlvblxuXG5leHRlbnNpb24gRGVwZW5kZW5jeVZhbHVlcyB7XG4gICAgLy8vIFRoZSBoYXB0aWMgY2xpZW50IGRlcGVuZGVuY3lcbiAgICB2YXIgaGFwdGljOiBIYXB0aWNDbGllbnQge1xuICAgICAgICBnZXQgeyBzZWxmW0hhcHRpY0NsaWVudC5zZWxmXSB9XG4gICAgICAgIHNldCB7IHNlbGZbSGFwdGljQ2xpZW50LnNlbGZdID0gbmV3VmFsdWUgfVxuICAgIH1cbn1cblxuZXh0ZW5zaW9uIEhhcHRpY0ZlZWRiYWNrQ2xpZW50OiBEZXBlbmRlbmN5S2V5IHtcbiAgICAvLy8gVGhlIGxpdmUgdmFsdWUgb2YgdGhlIGhhcHRpYyBjbGllbnRcbiAgICBzdGF0aWMgdmFyIGxpdmVWYWx1ZTogSGFwdGljQ2xpZW50IHtcbiAgICAgICAgcmV0dXJuIC5saXZlXG4gICAgfVxuXG4gICAgLy8vIFRoZSB0ZXN0IHZhbHVlIG9mIHRoZSBoYXB0aWMgY2xpZW50XG4gICAgc3RhdGljIHZhciB0ZXN0VmFsdWU6IEhhcHRpY0NsaWVudCB7XG4gICAgICAgIHJldHVybiAubW9ja1xuICAgIH1cbn1cblxuLy8gTUFSSzogLSBHbG9iYWwgQ29udmVuaWVuY2UgRnVuY3Rpb25cblxuLy8vIEdsb2JhbCBmdW5jdGlvbiB0byB0cmlnZ2VyIGEgc3RhbmRhcmQgaGFwdGljIGZlZWRiYWNrXG5mdW5jIHRyaWdnZXJIYXB0aWMoKSB7XG4gICAgQERlcGVuZGVuY3koXFwuaGFwdGljKSB2YXIgaGFwdGljXG4gICAgaGFwdGljLm1lZGl1bUltcGFjdCgpXG59XG4uLi5cblBhdGg6IEFyY2hpdGVjdHVyZS9pT1MvQXBwbGljYXRpb25TcGVjaWZpY2F0aW9uL01vY2tBcHBsaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vQ29yZS9VdGlsaXRpZXMvUGhvbmVGb3JtYXR0ZXIuc3dpZnRcbmltcG9ydCBGb3VuZGF0aW9uXG5cbi8vLyBVdGlsaXR5IGZvciBmb3JtYXR0aW5nIHBob25lIG51bWJlcnNcbnN0cnVjdCBQaG9uZUZvcm1hdHRlciB7XG4gICAgLy8vIEZvcm1hdCBhIHBob25lIG51bWJlciBiYXNlZCBvbiB0aGUgcmVnaW9uXG4gICAgLy8vIC0gUGFyYW1ldGVyczpcbiAgICAvLy8gICAtIHBob25lTnVtYmVyOiBUaGUgcGhvbmUgbnVtYmVyIHRvIGZvcm1hdFxuICAgIC8vLyAgIC0gcmVnaW9uOiBUaGUgcmVnaW9uIGNvZGUgKGUuZy4sIFwiVVNcIiwgXCJVS1wiKVxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBzdGF0aWMgZnVuYyBmb3JtYXRQaG9uZU51bWJlcihfIHBob25lTnVtYmVyOiBTdHJpbmcsIHJlZ2lvbjogU3RyaW5nKSAtPiBTdHJpbmcge1xuICAgICAgICAvLyBSZW1vdmUgYW55IG5vbi1kaWdpdCBjaGFyYWN0ZXJzXG4gICAgICAgIGxldCBkaWdpdHMgPSBwaG9uZU51bWJlci5maWx0ZXIgeyAkMC5pc051bWJlciB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBlbXB0eSwgcmV0dXJuIGVtcHR5IHN0cmluZ1xuICAgICAgICBpZiBkaWdpdHMuaXNFbXB0eSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXQgYmFzZWQgb24gcmVnaW9uXG4gICAgICAgIHN3aXRjaCByZWdpb24ge1xuICAgICAgICBjYXNlIFwiVVNcIiwgXCJDQVwiOlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFVTUGhvbmVOdW1iZXIoZGlnaXRzKVxuICAgICAgICBjYXNlIFwiVUtcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRVS1Bob25lTnVtYmVyKGRpZ2l0cylcbiAgICAgICAgY2FzZSBcIkFVXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0QVVQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VVNQaG9uZU51bWJlcihkaWdpdHMpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vIEZvcm1hdCBhIFVTL0NhbmFkYSBwaG9uZSBudW1iZXJcbiAgICAvLy8gLSBQYXJhbWV0ZXIgZGlnaXRzOiBUaGUgZGlnaXRzIHRvIGZvcm1hdFxuICAgIC8vLyAtIFJldHVybnM6IEEgZm9ybWF0dGVkIHBob25lIG51bWJlciBzdHJpbmdcbiAgICBwcml2YXRlIHN0YXRpYyBmdW5jIGZvcm1hdFVTUGhvbmVOdW1iZXIoXyBkaWdpdHM6IFN0cmluZykgLT4gU3RyaW5nIHtcbiAgICAgICAgbGV0IGxpbWl0ZWREaWdpdHMgPSBTdHJpbmcoZGlnaXRzLnByZWZpeCgxMCkpXG4gICAgICAgIFxuICAgICAgICBpZiBsaW1pdGVkRGlnaXRzLmNvdW50ID09IDEwIHtcbiAgICAgICAgICAgIGxldCBhcmVhQ29kZSA9IGxpbWl0ZWREaWdpdHMucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gbGltaXRlZERpZ2l0cy5kcm9wRmlyc3QoMykucHJlZml4KDMpXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDYpXG4gICAgICAgICAgICByZXR1cm4gXCIrMSAoXFwoYXJlYUNvZGUpKSBcXChwcmVmaXgpLVxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIisxIFxcKGxpbWl0ZWREaWdpdHMpXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIH1cbiAgICB9XG4uLi5cbiAgICBcbiAgICAvLy8gRm9ybWF0IGFuIEF1c3RyYWxpYW4gcGhvbmUgbnVtYmVyXG4gICAgLy8vIC0gUGFyYW1ldGVyIGRpZ2l0czogVGhlIGRpZ2l0cyB0byBmb3JtYXRcbiAgICAvLy8gLSBSZXR1cm5zOiBBIGZvcm1hdHRlZCBwaG9uZSBudW1iZXIgc3RyaW5nXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnVuYyBmb3JtYXRBVVBob25lTnVtYmVyKF8gZGlnaXRzOiBTdHJpbmcpIC0+IFN0cmluZyB7XG4gICAgICAgIGxldCBsaW1pdGVkRGlnaXRzID0gU3RyaW5nKGRpZ2l0cy5wcmVmaXgoMTApKVxuICAgICAgICBcbiAgICAgICAgaWYgbGltaXRlZERpZ2l0cy5jb3VudCA9PSAxMCB7XG4gICAgICAgICAgICBsZXQgYXJlYUNvZGUgPSBsaW1pdGVkRGlnaXRzLnByZWZpeCg0KVxuICAgICAgICAgICAgbGV0IHByZWZpeCA9IGxpbWl0ZWREaWdpdHMuZHJvcEZpcnN0KDQpLnByZWZpeCgzKVxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBsaW1pdGVkRGlnaXRzLmRyb3BGaXJzdCg3KVxuICAgICAgICAgICAgcmV0dXJuIFwiKzYxIFxcKGFyZWFDb2RlKSBcXChwcmVmaXgpIFxcKGxpbmVOdW1iZXIpXCJcbiAgICAgICAgfSBlbHNlIGlmIGxpbWl0ZWREaWdpdHMuY291bnQgPiAwIHtcbiAgICAgICAgICAgIHJldHVybiBcIis2MSBcXChsaW1pdGVkRGlnaXRzKVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBBcmNoaXRlY3R1cmUvaU9TL0FwcGxpY2F0aW9uU3BlY2lmaWNhdGlvbi9Nb2NrQXBwbGljYXRpb24vTW9ja0FwcGxpY2F0aW9uL0ZlYXR1cmVzL1RhYlNjcmVlbnMvUHJvZmlsZS9Qcm9maWxlVmlldy5zd2lmdFxuLi4uXG5cbiAgICB2YXIgYm9keTogc29tZSBWaWV3IHtcbiAgICAgICAgU2Nyb2xsVmlldyB7XG4gICAgICAgICAgICBWU3RhY2sge1xuICAgICAgICAgICAgICAgIC8vIFByb2ZpbGUgSGVhZGVyXG4gICAgICAgICAgICAgICAgVlN0YWNrKHNwYWNpbmc6IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIENvbW1vbkF2YXRhclZpZXcoXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2aWV3TW9kZWwubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB2aWV3TW9kZWwuYXZhdGFySW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiA4MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQ29sb3IuYmx1ZS5vcGFjaXR5KDAuMSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IC5ibHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogLmJsdWVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICBUZXh0KHZpZXdNb2RlbC5waG9uZS5pc0VtcHR5ID8gXCIoOTU0KSAyMzQtNTY3OFwiIDogdmlld01vZGVsLnBob25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvbnQoLnN1YmhlYWRsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvcmVncm91bmRDb2xvciguc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgIH1cbi4uLlxuICAgICAgICAuYWxlcnQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0NoZWNrSW5Db25maXJtYXRpb24pIHtcbiAgICAgICAgICAgIEFsZXJ0KFxuICAgICAgICAgICAgICAgIHRpdGxlOiBUZXh0KFwiQ29uZmlybSBDaGVjay1pblwiKSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBUZXh0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNoZWNrIGluIG5vdz8gVGhpcyB3aWxsIHJlc2V0IHlvdXIgdGltZXIuXCIpLFxuICAgICAgICAgICAgICAgIHByaW1hcnlCdXR0b246IC5kZWZhdWx0KFRleHQoXCJDaGVjayBJblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHZpZXcgbW9kZWwgaW4gYSByZWFsIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZWNvbmRhcnlCdXR0b246IC5jYW5jZWwoKVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIC5hbGVydChcIlNpZ24gT3V0XCIsIGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dTaWduT3V0Q29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICBCdXR0b24oXCJDYW5jZWxcIiwgcm9sZTogLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEJ1dHRvbihcIlNpZ24gT3V0XCIsIHJvbGU6IC5kZXN0cnVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHZpZXdNb2RlbC5zaWduT3V0KClcbiAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIHRvIHNpZ24taW4gc2NyZWVuIHdvdWxkIGJlIGhhbmRsZWQgYnkgYSBjb29yZGluYXRvciBvciBwYXJlbnQgdmlld1xuICAgICAgICAgICAgfVxuICAgICAgICB9IG1lc3NhZ2U6IHtcbiAgICAgICAgICAgIFRleHQoXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2lnbiBvdXQ/XCIpXG4gICAgICAgIH1cbiAgICAgICAgLnNoZWV0KGlzUHJlc2VudGVkOiAkdmlld01vZGVsLnNob3dFZGl0RGVzY3JpcHRpb25TaGVldCkge1xuICAgICAgICAgICAgZW1lcmdlbmN5Tm90ZVNoZWV0Vmlld1xuICAgICAgICB9XG4gICAgICAgIC5zaGVldChpc1ByZXNlbnRlZDogJHZpZXdNb2RlbC5zaG93RWRpdE5hbWVTaGVldCkge1xuICAgICAgICAgICAgbmFtZUVkaXRTaGVldFZpZXdcbiAgICAgICAgfVxuICAgICAgICAuc2hlZXQoaXNQcmVzZW50ZWQ6ICR2aWV3TW9kZWwuc2hvd0VkaXRBdmF0YXJTaGVldCkge1xuICAgICAgICAgICAgYXZhdGFyRWRpdFNoZWV0Vmlld1xuICAgICAgICB9XG4gICAgICAgIC5zaGVldChpc1ByZS4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX19LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6dHJ1ZSwiZXh0cmFEYXRhIjp7ImlzQWdlbnRDb252ZXJzYXRpb24iOnRydWUsImhhc0RpcnR5RWRpdHMiOnRydWUsImJhc2VsaW5lVGltZXN0YW1wIjoxNzQ3NTU4MjM0NTAwfSwicGVyc29uYVR5cGUiOjB9fSwiYWdlbnRFeGVjdXRpb25Nb2RlIjoiYXV0byIsImlzQWdlbnRFZGl0c0NvbGxhcHNlZCI6ZmFsc2UsInNvcnRDb252ZXJzYXRpb25zQnkiOiJsYXN0TWVzc2FnZVRpbWVzdGFtcCJ9" />
      </map>
    </option>
  </component>
</project>